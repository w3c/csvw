<!DOCTYPE html><html lang="en" dir="ltr"><head><meta content="width=device-width,initial-scale=1" name="viewport"><meta charset="utf-8"><meta name="generator" content="ReSpec 18.2.4"><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title , div.ednote-title, div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title, div.ednote-title { color: #2b2; }
div.warning-title { color: #f22; }
div.issue-title span, div.note-title span, div.ednote-title span, div.warning-title span {
    text-transform: uppercase;
}
div.note, div.issue, div.ednote, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .ednote > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
.issue, .note, .ednote, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note , div.ednote,  div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.ednote, span.issue, span.warning { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note, .ednote {
    border-color: #52e052;
    background: #e9fbe9;
}

.warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}
</style><style>/* --- Best Practices --- */
div.practice {
    border: solid #bebebe 1px;
    margin: 2em 1em 1em 2em;
}

span.practicelab {
    margin: 1.5em 0.5em 1em 1em;
    font-weight: bold;
    font-style: italic;
    background: #dfffff;
    position: relative;
    padding: 0 0.5em;
    top: -1.5em;
}

p.practicedesc {
    margin: 1.5em 0.5em 1em 1em;
}

@media screen {
    p.practicedesc {
        position: relative;
        top: -2em;
        padding: 0;
        margin: 1.5em 0.5em -1em 1em;
    }
}
</style>
    
    
    <title>Embedding Tabular Metadata in HTML</title>
    
    
    
    
    
    <style>
      td, th { padding-left: 1em; padding-right: 1em; }
      tbody tr th { text-align: left; }
      ol.algorithm {
        counter-reset: numsection;
        list-style-type: none;
      }
      ol.algorithm > li {
        margin: 1em -1em;
        padding-right: 1em;
        text-indent: -1em;
      }
      ol.algorithm > li:before {
        font-weight: bold;
        counter-increment: numsection;
        content: counters(numsection, ".") " ";
      }
      ol.algorithm>li p, ol.algorithm>li div {text-indent: 0em}
      ol.algorithm>li>p:first-child {position: relative; display: inline;}
      pre {overflow: auto;}
      dd a.externalDFN, p a.externalDFN {border-bottom:  1px solid #99c; font-style: italic;}

      dl.typography dt { font-weight: normal}
      dl.typography dd { margin-bottom: 0.3em; margin-top: 0.2em;}
      dl.typography a.externalDFN { border-bottom:  1px solid #99c; font-style: italic; }
      /* Style script blocks to be visable */
      div.example script {
          display:block;
      }
    </style>
  <style id="respec-mainstyle">/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* Override code highlighter background */
.hljs {
  background: transparent !important;
}

/* --- INLINES --- */
h1 abbr,
h2 abbr,
h3 abbr,
h4 abbr,
h5 abbr,
h6 abbr,
a abbr {
  border: none;
}

dfn {
  font-weight: bold;
}

a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
}

a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
}

a.bibref {
  text-decoration: none;
}

cite .bibref {
  font-style: normal;
}

code {
  color: #c83500;
}

th code {
  color: inherit;
}

/* --- TOC --- */

.toc a,
.tof a {
  text-decoration: none;
}

a .secno,
a .figno {
  color: #000;
}

ul.tof,
ol.tof {
  list-style: none outside none;
}

.caption {
  margin-top: 0.5em;
  font-style: italic;
}

/* --- TABLE --- */

table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
}

.simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
}

.simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
}

.simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
  background: #f0f6ff;
}

/* --- DL --- */

.section dd > p:first-child {
  margin-top: 0;
}

.section dd > p:last-child {
  margin-bottom: 0;
}

.section dd {
  margin-bottom: 1em;
}

.section dl.attrs dd,
.section dl.eldef dd {
  margin-bottom: 0;
}

#issue-summary > ul,
.respec-dfn-list {
  column-count: 2;
}

#issue-summary li,
.respec-dfn-list li {
  list-style: none;
}

details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
}

details.respec-tests-details > * {
  padding-right: 2em;
}

details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: .3em;
  background-color: white;
  padding-bottom: .5em;
}

details.respec-tests-details[open] > summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
}

details.respec-tests-details > ul {
  width: 100%;
  margin-top: -0.3em;
}

details.respec-tests-details > li {
  padding-left: 1em;
}

@media print {
  .removeOnSave {
    display: none;
  }
}
</style><style>/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WG-NOTE.css"><link rel="canonical" href="https://www.w3.org/TR/csvw-html/"><script id="initialUserConfig" type="application/json">{
  "specStatus": "WG-NOTE",
  "shortName": "csvw-html",
  "publishDate": "2016-02-25",
  "edDraftURI": "https://w3c.github.io/csvw/html-note/",
  "editors": [
    {
      "name": "Gregg Kellogg",
      "url": "http://greggkellogg.net/",
      "company": "Kellogg Associates",
      "companyURL": "http://kellogg-assoc.com/",
      "w3cid": "44770"
    }
  ],
  "wg": "CSV on the Web Working Group",
  "wgURI": "https://www.w3.org/2013/csvw/",
  "wgPublicList": "public-csv-wg",
  "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/68238/status",
  "otherLinks": [
    {
      "key": "Repository",
      "data": [
        {
          "value": "We are on Github",
          "href": "https://github.com/w3c/csvw"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/w3c/csvw"
        }
      ]
    }
  ],
  "alternateFormats": [
    {
      "uri": "csvw-html.epub",
      "label": "ePub"
    }
  ],
  "inlineCSS": true,
  "issueBase": "https://github.com/w3c/csvw/issues/",
  "noIDLIn": true,
  "noLegacyStyle": false,
  "publishISODate": "2016-02-25T00:00:00.000Z",
  "generatedSubtitle": "Working Group Note 25 February 2016"
}</script><meta name="description" content="The Model for Tabular Data and Metadata on the Web describes mechanisms for extracting metadata from CSV documents starting with either a tabular data file, or a metadata description. In the case of starting with a CSV document, a procedure is followed to locate metadata describing that CSV (see Locating Metadata in [tabular-data-model]). Alternatively, processing may begin with a metadata file directly, which references the tabular data file(s). However, in some cases, it is preferred to publish datasets using HTML rather than starting with either CSV or metadata files."></head>
  <body aria-busy="false" class="h-entry toc-inline"><div class="head">
    <p>
      <a class="logo" href="https://www.w3.org/"><img width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C"></a>
    </p>
  <p><!--_hyper: 2056816196;--></p>
  <h1 class="title p-name" id="title">Embedding Tabular Metadata in HTML</h1>
  <h2 id="w3c-working-group-note-25-february-2016"><abbr title="World Wide Web Consortium">W3C</abbr> Working Group Note <time class="dt-published" datetime="2016-02-25">25 February 2016</time></h2>
  <dl>
      <dt>This version:</dt>
      <dd><a class="u-url" href="https://www.w3.org/TR/2016/NOTE-csvw-html-20160225/">https://www.w3.org/TR/2016/NOTE-csvw-html-20160225/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="https://www.w3.org/TR/csvw-html/">https://www.w3.org/TR/csvw-html/</a></dd>
      <dt>Latest editor's draft:</dt>
      <dd><a href="https://w3c.github.io/csvw/html-note/">https://w3c.github.io/csvw/html-note/</a></dd>
    <dt>Editor:</dt>
    <dd class="p-author h-card vcard" data-editor-id="44770"><a class="u-url url p-name fn" href="http://greggkellogg.net/">Gregg Kellogg</a>, <a class="p-org org h-org h-card" href="http://kellogg-assoc.com/">Kellogg Associates</a></dd>

          <dt>Repository:</dt>
                  <dd>
                    <a href="https://github.com/w3c/csvw">
                      We are on Github
                    </a>
                  </dd>
                  <dd>
                    <a href="https://github.com/w3c/csvw">
                      File a bug
                    </a>
                  </dd>
  </dl>
    <p>
        This document is also available in this non-normative format:
      <a rel="alternate" href="csvw-html.epub">ePub</a>
    </p>
      <p class="copyright">
        <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2016
        
        <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>).
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a>
        rules apply.
      </p>
  <hr title="Separator for header">
</div>
    <section id="abstract" class="introductory"><h2 id="abstract-0">Abstract</h2>
      <p>The <cite><a href="https://www.w3.org/TR/tabular-data-model/">Model for Tabular Data and Metadata on the Web</a></cite> describes mechanisms for extracting metadata from CSV documents starting with either a <cite><a href="https://www.w3.org/TR/tabular-data-model/#dfn-tabular-data-file" class="externalDFN">tabular data file</a></cite>, or a metadata description. In the case of starting with a CSV document, a procedure is followed to locate metadata describing that CSV (see <cite><a href="https://www.w3.org/TR/tabular-data-model/#locating-metadata">Locating Metadata</a></cite> in [<cite><a class="bibref" href="#bib-tabular-data-model">tabular-data-model</a></cite>]). Alternatively, processing may begin with a metadata file directly, which references the <cite><a href="https://www.w3.org/TR/tabular-data-model/#dfn-tabular-data-file" class="externalDFN">tabular data file(s)</a></cite>. However, in some cases, it is preferred to publish datasets using HTML rather than starting with either CSV or metadata files.</p>
      <p>Secondly, tabular data is often contained within HTML in the form of <cite><a href="https://www.w3.org/TR/html5/tabular-data.html#tabular-data">HTML table elements</a></cite> (see [<cite><a class="bibref" href="#bib-html5">html5</a></cite>]). This document describes a means of identifying such tables from [<cite><a class="bibref" href="#bib-tabular-metadata">tabular-metadata</a></cite>] and extracting annotated tabular data from HTML tables.</p>
      <div class="note"><div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div><p class="">This document does not attempt to address the full range of ways in which tabular datasets can be used within browser based applications, e.g. related Javascript efforts such as IndexedDB and Web Components. It is concerned primarily with providing additional information about tabular data. Discussion of deeper integration into Web-based apps is encouraged via the <a href="https://www.w3.org/community/csvw/">CSVW Community Group</a>.</p></div>
    </section>
    <section id="sotd" class="introductory"><h2 id="status-of-this-document">Status of This Document</h2>
      <p>
        <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em>
      </p>
        
      <p>
        The <a href="https://www.w3.org/2013/csvw">CSV on the Web Working Group</a> was <a href="https://www.w3.org/2013/05/lcsv-charter.html">chartered</a> to produce a recommendation "Access methods for CSV Metadata" as well as recommendations for "Metadata vocabulary for CSV data" and "Mapping mechanism to transforming CSV into various formats (e.g., RDF, JSON, or XML)". This non-normative document describes extensions for discovering [<cite><a class="bibref" href="#bib-tabular-metadata">tabular-metadata</a></cite>] within HTML documents, and for extracting <cite><a href="https://www.w3.org/TR/tabular-data-model/#dfn-annotated-table" class="externalDFN">annotated tables</a></cite> from HTML tables. The normative standards are:
      </p>
      <ul>
        <li><a href="https://www.w3.org/TR/tabular-data-model/">Model for Tabular Data and Metadata on the Web</a></li>
        <li><a href="https://www.w3.org/TR/tabular-metadata/">Metadata Vocabulary for Tabular Data</a></li>
        <li><a href="https://www.w3.org/TR/csv2json/">Generating JSON from Tabular Data on the Web</a></li>
        <li><a href="https://www.w3.org/TR/csv2rdf/">Generating RDF from Tabular Data on the Web</a></li>
      </ul>
    
        <p>
          This document was published by the <a href="https://www.w3.org/2013/csvw/">CSV on the Web Working Group</a> as a Working Group Note.
            Comments regarding this document are welcome. Please send them to
            <a href="mailto:public-csv-wg@w3.org">public-csv-wg@w3.org</a>
            (<a href="mailto:public-csv-wg-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="https://lists.w3.org/Archives/Public/public-csv-wg/">archives</a>).
        </p>
          <p>
            Publication as a Working Group Note does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr>
            Membership. This is a draft document and may be updated, replaced or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other than work in
            progress.
          </p>
        <p>
            This document was produced by
            a group
             operating under the
            <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
              <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="https://www.w3.org/2004/01/pp-impl/68238/status" rel="disclosure">public list of any patent
              disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual knowledge of a patent
            which the individual believes contains
            <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential
            Claim(s)</a> must disclose the information in accordance with
            <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section
            6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        </p>
          <p>This document is governed by the <a id="w3c_process_revision" href="https://www.w3.org/2017/Process-20170301/">1 March 2017 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
          </p>
        

</section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a href="#embedding-tabular-metadata-within-html-documents" class="tocxref"><span class="secno">1. </span>Embedding Tabular Metadata within HTML Documents</a><ol class="toc"><li class="tocline"><a href="#embedding-metadata-in-a-script-element" class="tocxref"><span class="secno">1.1 </span>Embedding Metadata in a <code>script</code> Element</a></li><li class="tocline"><a href="#linking-to-metadata" class="tocxref"><span class="secno">1.2 </span>Linking to Metadata</a></li></ol></li><li class="tocline"><a href="#extracting-table-data" class="tocxref"><span class="secno">2. </span>Extracting Tabular Data from HTML Tables</a><ol class="toc"><li class="tocline"><a href="#extracting-html-tables" class="tocxref"><span class="secno">2.1 </span>Extracting HTML Tables</a></li><li class="tocline"><a href="#html-example" class="tocxref"><span class="secno">2.2 </span>Example</a></li></ol></li><li class="tocline"><a href="#extracting-tabular-data-from-embedded-csv" class="tocxref"><span class="secno">3. </span>Extracting Tabular Data from embedded CSV</a><ol class="toc"><li class="tocline"><a href="#csv-example" class="tocxref"><span class="secno">3.1 </span>Example</a></li></ol></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">A. </span>References</a><ol class="toc"><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">A.1 </span>Informative references</a></li></ol></li></ol></nav>
    <section id="embedding-tabular-metadata-within-html-documents">
      <!--OddPage--><h2 id="x1-embedding-tabular-metadata-within-html-documents"><span class="secno">1. </span>Embedding Tabular Metadata within HTML Documents</h2>
      <p>Metadata may be exposed in an HTML document in a couple of different ways.</p>
      <section id="embedding-metadata-in-a-script-element">
        <h3 id="x1-1-embedding-metadata-in-a-script-element"><span class="secno">1.1 </span>Embedding Metadata in a <code>script</code> Element</h3>
        <p>This section describes mechanisms similar to <a href="https://www.w3.org/TR/json-ld/#embedding-json-ld-in-html-documents">Embedding JSON-LD in HTML Documents</a> (see [<cite><a class="bibref" href="#bib-json-ld">json-ld</a></cite>]) for <dfn data-lt-nodefault="" data-lt="embedded metadata|embedding metadata|embed metadata" data-dfn-type="dfn" id="dfn-embedded-metadata">embedding metadata</dfn> within an HTML document.</p>
        <p>HTML <code>script</code> elements can be used to embed data blocks in documents (see <cite><a href="https://www.w3.org/TR/html5/scripting-1.html#scripting-1">Scripting</a></cite> in [<cite><a class="bibref" href="#bib-html5">html5</a></cite>]). Metadata [<cite><a class="bibref" href="#bib-tabular-metadata">tabular-metadata</a></cite>] describing one or more <cite><a href="https://www.w3.org/TR/tabular-data-model/#dfn-tabular-data-file" class="externalDFN">tabular data files</a></cite> can be embedded in HTML, which can be used as an alternative way to publish datasets.</p>
        <p>The content should be placed in a <cite><a href="https://www.w3.org/TR/html5/scripting-1.html#the-script-element"><code>script</code> element</a></cite> with the <code>type</code> set to <code>application/csvm+json</code>. The character encoding of the embedded metadata will match the HTML documents encoding.</p>
        <div class="example"><div class="example-title marker"><span>Example 1</span><span style="text-transform: none">: Tabular Metadata embedded in HTML</span></div><pre class="highlight hljs xml" aria-busy="false" aria-live="polite"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/csvm+json"</span>&gt;</span><span class="javascript">
    {
      <span class="hljs-string">"@context"</span>: <span class="hljs-string">"http://www.w3.org/ns/csvw"</span>,
      <span class="hljs-string">"tables"</span>: [{
        <span class="hljs-string">"url"</span>: <span class="hljs-string">"countries.csv"</span>,
        <span class="hljs-string">"tableSchema"</span>: {
          <span class="hljs-string">"columns"</span>: [{
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"countryCode"</span>,
            <span class="hljs-string">"titles"</span>: <span class="hljs-string">"countryCode"</span>,
            <span class="hljs-string">"datatype"</span>: <span class="hljs-string">"string"</span>,
            <span class="hljs-string">"propertyUrl"</span>: <span class="hljs-string">"http://www.geonames.org/ontology{#_name}"</span>
          }, {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"latitude"</span>,
            <span class="hljs-string">"titles"</span>: <span class="hljs-string">"latitude"</span>,
            <span class="hljs-string">"datatype"</span>: <span class="hljs-string">"number"</span>
          }, {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"longitude"</span>,
            <span class="hljs-string">"titles"</span>: <span class="hljs-string">"longitude"</span>,
            <span class="hljs-string">"datatype"</span>: <span class="hljs-string">"number"</span>
          }, {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"name"</span>,
            <span class="hljs-string">"titles"</span>: <span class="hljs-string">"name"</span>,
            <span class="hljs-string">"datatype"</span>: <span class="hljs-string">"string"</span>
          }],
          <span class="hljs-string">"aboutUrl"</span>: <span class="hljs-string">"countries.csv{#countryCode}"</span>,
          <span class="hljs-string">"propertyUrl"</span>: <span class="hljs-string">"http://schema.org/{_name}"</span>,
          <span class="hljs-string">"primaryKey"</span>: <span class="hljs-string">"countryCode"</span>
        }
      }, {
        <span class="hljs-string">"url"</span>: <span class="hljs-string">"country_slice.csv"</span>,
        <span class="hljs-string">"tableSchema"</span>: {
          <span class="hljs-string">"columns"</span>: [{
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"countryRef"</span>,
            <span class="hljs-string">"titles"</span>: <span class="hljs-string">"countryRef"</span>,
            <span class="hljs-string">"valueUrl"</span>: <span class="hljs-string">"countries.csv{#countryRef}"</span>
          }, {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"year"</span>,
            <span class="hljs-string">"titles"</span>: <span class="hljs-string">"year"</span>,
            <span class="hljs-string">"datatype"</span>: <span class="hljs-string">"gYear"</span>
          }, {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"population"</span>,
            <span class="hljs-string">"titles"</span>: <span class="hljs-string">"population"</span>,
            <span class="hljs-string">"datatype"</span>: <span class="hljs-string">"integer"</span>
          }],
          <span class="hljs-string">"foreignKeys"</span>: [{
            <span class="hljs-string">"columnReference"</span>: <span class="hljs-string">"countryRef"</span>,
            <span class="hljs-string">"reference"</span>: {
              <span class="hljs-string">"resource"</span>: <span class="hljs-string">"countries.csv"</span>,
              <span class="hljs-string">"columnReference"</span>: <span class="hljs-string">"countryCode"</span>
            }
          }]
        }
      }]
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></pre></div>
        <p>Depending on how the HTML document is served, <code>script</code> content may need to be escaped. See <cite><a href="https://www.w3.org/TR/html5/scripting-1.html#restrictions-for-contents-of-script-elements">Restrictions for contents of <code>script</code> elements</a></cite> in [<cite><a class="bibref" href="#bib-html5">html5</a></cite>] for more information.</p>
      <p>Processing embedded metadata is the same as processing <cite><a href="https://www.w3.org/TR/tabular-data-model/#overriding-metadata">Overriding Metadata</a></cite> where the retrieved document type is <code>text/html</code> or <code>application/xhtml+xml</code> instead of a JSON document type. The base URI of the encapsulating HTML document provides a "Base URI Embedded in Content" per [<cite><a class="bibref" href="#bib-RFC3986">RFC3986</a></cite>] <cite><a href="https://tools.ietf.org/html/rfc3986#section-5.1.1">section 5.1.1</a></cite>; metadata is extracted from the first <code>script</code> element having <code>@type</code> <code>application/csvm+json</code>. Metadata documents parsed from an HTML DOM will be a stream of character data rather than a stream of UTF-8 encoded bytes. No decoding is necessary if the HTML document has already been parsed into DOM. Each matching <code>script</code> data block is considered to be it's own metadata document.</p>
      </section>
      <section id="linking-to-metadata">
        <h3 id="x1-2-linking-to-metadata"><span class="secno">1.2 </span>Linking to Metadata</h3>
        <p>An alternative to <a href="#dfn-embedded-metadata" class="internalDFN" data-link-type="dfn">embedding metadata</a> within a <code>script</code> element is linking to the metadata using an HTTP Link header and/or an HTML <code>link</code> element using the equivalent mechanism described for CSV files by <cite><a href="https://www.w3.org/TR/tabular-data-model/#link-header" class="sectionRef">Link Header</a></cite> in [<cite><a class="bibref" href="#bib-tabular-data-model">tabular-data-model</a></cite>]. <dfn data-lt="link metadata|linked metadata" data-dfn-type="dfn" id="dfn-link-metadata">Linked metadata</dfn> provides an alternate mechanism for referencing metadata that would otherwise be discovered by <cite><a href="https://www.w3.org/TR/tabular-data-model/#locating-metadata">Locating Metadata</a> as defined in [<cite><a class="bibref" href="#bib-tabular-data-model">tabular-data-model</a></cite>]</cite>. See <cite><a href="https://www.w3.org/TR/html5/document-metadata.html#the-link-element">The <code>link</code> element</a></cite> in [<cite><a class="bibref" href="#bib-html5">html5</a></cite>] for more information.</p>
        <div class="example"><div class="example-title marker"><span>Example 2</span><span style="text-transform: none">: Linking to Metadata</span></div><pre class="highlight hljs http" aria-busy="false" aria-live="polite">HTTP/1.1 <span class="hljs-number">200</span> OK
<span class="hljs-attribute">Link</span>: &lt;metadata.jsonld&gt;; rel="describedby"
<span class="hljs-attribute">Content-Type</span>: text/html

<span class="javascript">&lt;html&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"describedby"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/csvm+json"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"metadata.json"</span>/&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span></span></pre></div>
        <p>The preceding example shows an HTTP response for an HTML document containing a <code>link</code> element referencing external metadata, along with an HTTP Link header referencing the same metadata.</p>
        <div class="practice">
          <p><span class="practicelab" id="bp-html-and-http-link-references-must-be-consistent">Best Practice 1: HTML and HTTP Link references must be consistent</span></p>
          <p class="practicedesc">If using both HTML <code>link</code> and HTTP Link it is important to reference the same metadata URI.</p>
        </div>
        <div class="practice">
          <p><span class="practicelab" id="bp-prefer-embedded-metadata">Best Practice 2: Prefer embedded metadata</span></p>
          <p class="practicedesc">To avoid inconsistencies, do not both <a href="#dfn-embedded-metadata" class="internalDFN" data-link-type="dfn">embed metadata</a> and <a href="#dfn-link-metadata" class="internalDFN" data-link-type="dfn">link metadata</a> as differences in the embedded representation and the linked representation can cause processing inconsistencies.</p>
        </div>
    </section>
  </section>
    <section id="extracting-table-data">
      <!--OddPage--><h2 id="x2-extracting-tabular-data-from-html-tables"><span class="secno">2. </span>Extracting Tabular Data from HTML Tables</h2>
      <p>This section describes a mechanism for locating tabular data within an HTML document, extracting tabular data from an identified <cite><a href="https://www.w3.org/TR/html5/tabular-data.html#tabular-data">table element</a></cite>, and processing the tabular data to create <cite><a href="https://www.w3.org/TR/tabular-data-model/#dfn-annotated-table" class="externalDFN">annotated tables</a></cite>.</p>
      <p>In addition to <a href="https://www.w3.org/TR/tabular-data-model/#dfn-tabular-data-file" class="externalDFN">tabular data files</a>, a metadata <a href="https://www.w3.org/TR/tabular-data-model/#dfn-table-id" class="externalDFN">table id</a> may reference an HTML table within an HTML document. A reference within an HTML document is described using a document-relative <em>fragment identifier</em> which is defined using the <code>@id</code> attribute on an <cite><a href="https://www.w3.org/TR/html5/tabular-data.html#tabular-data">HTML <code>table</code> element</a></cite>.</p>
      <div class="practice">
        <p><span class="practicelab" id="bp-include-metadata-and-referenced-html-tables-in-a-single-html-document">Best Practice 3: Include metadata and referenced HTML tables in a single HTML document</span></p>
        <p class="practicedesc">HTML documents which are self contained, including both embedded metadata which references HTML tables contained within the same document, are preferred to HTML tables or CSV files defined externally.</p>
      </div>
      <p>Consideration must be given to the generation of URLs. The standard forms of both JSON [<cite><a class="bibref" href="#bib-csv2json">csv2json</a></cite>] and RDF [<cite><a class="bibref" href="#bib-csv2rdf">csv2rdf</a></cite>] generate URLs by appending a fragment identifier to the table URL to identify rows. Also, unless an explicit <a href="https://www.w3.org/TR/tabular-data-model/#dfn-cell-property-url" class="externalDFN">propertyUrl</a> is defined, RDF properties are also generated using a fragment of the table URL.</p>
      <div class="practice">
        <p><span class="practicelab" id="bp-avoid-automatically-generated-urls">Best Practice 4: Avoid automatically generated URLs</span></p>
        <p class="practicedesc">Explicitly define <a href="https://www.w3.org/TR/tabular-data-model/#dfn-cell-about-url" class="externalDFN">aboutUrl</a>, <a href="https://www.w3.org/TR/tabular-data-model/#dfn-cell-property-url" class="externalDFN">propertyUrl</a>, and <a href="https://www.w3.org/TR/tabular-data-model/#dfn-cell-value-url" class="externalDFN">valueUrl</a>, where appropriate, to avoid using automatically generated URL fragments which conflict with using fragments to identify tables.</p>
      </div>

      <section id="extracting-html-tables">
        <h3 id="x2-1-extracting-html-tables"><span class="secno">2.1 </span>Extracting HTML Tables</h3>
        <p>Raw tabular data may be extracted from HTML tables with use of the <a href="https://www.w3.org/TR/tabular-metadata/#dfn-dialect-description" class="externalDFN">dialect description</a> as with CSV tables.</p>
        <ul>
          <li><p>Table rows are numbered starting from <code>1</code>, as with CSV files.</p></li>
          <li><p>The in scope <a href="https://www.w3.org/TR/html5/dom.html#language" class="externalDFN">language</a> of the table element is used as the <a href="https://www.w3.org/TR/tabular-metadata/#cell-language">lang</a> inherited property for <a href="https://www.w3.org/TR/tabular-data-model/#dfn-embedding-metadata" class="externalDFN">embedded metadata</a>.</p></li>
          <li><p>Rows containing only <code>th</code> elements have their <a href="https://www.w3.org/TR/html5/infrastructure.html#textcontent" class="externalDFN">text content</a> used as the <a href="https://www.w3.org/TR/tabular-data-model/#dfn-column-titles" class="externalDFN">column titles</a> in the <a href="https://www.w3.org/TR/tabular-data-model/#dfn-embedding-metadata" class="externalDFN">embedded metadata</a>.</p></li>
          <li><p>Rows containing  <code>td</code> are used as <a href="https://www.w3.org/TR/tabular-data-model/#dfn-row-content" class="externalDFN">row content</a> with the <a href="https://www.w3.org/TR/html5/infrastructure.html#textcontent" class="externalDFN">text content</a> of each <code>td</code> element used as the <a href="https://www.w3.org/TR/tabular-data-model/#dfn-cell-string-value" class="externalDFN">cell string value</a>; such rows may also contain <code>th</code> elements which are treated as data elements.</p></li>
          <li><p><code>caption</code> elements within a <code>table</code> element are ignored.</p></li>
          <li><p><code>th</code> and <code>td</code> elements contained within <code>thead</code>, <code>tbody</code>, or <code>tfoot</code> elements are processed as if they were child elements of the <code>table</code> element.</p></li>
        </ul>
        <p>Processing extracted tables is otherwise handled in a similar manner to CSV as defined in <cite><a href="https://www.w3.org/TR/tabular-data-model/#parsing">Parsing Tabular Data</a></cite> in [<cite><a class="bibref" href="#bib-tabular-data-model">tabular-data-model</a></cite>].</p>
        <div class="note"><div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div><p class="">Processors using a <cite><a href="https://www.w3.org/DOM/">Document Object Model Model</a></cite> [<cite><a class="bibref" href="#bib-DOM">DOM</a></cite>] may have their content coerced to a normalized including optional elements such as <code>tbody</code>.</p></div>
        <div class="practice">
          <p><span class="practicelab" id="bp-header-rows-precede-content-rows">Best Practice 5: Header rows precede content rows</span></p>
          <p class="practicedesc">Tables should be organized with the first rows containing only <code>th</code> elements to describe column headers. Subsequent rows should contain only <code>td</code> elements to describe table data.</p>
        </div>
        <div class="practice">
          <p><span class="practicelab" id="bp-avoid-use-of-colspan-and-rowspan-attributes">Best Practice 6: Avoid use of <code>@colspan</code> and <code>@rowspan</code> attributes</span></p>
          <p class="practicedesc">The processing algorithm for tabular data does not account for differences in column counts and row counts that might be present in HTML tables using the <code>@colspan</code> and/or <code>@rowspan</code> attributes; use of these attributes should be avoided. Note that a header row containing <code>@colspan</code>, or a data column containing <code>@rowspan</code> may be ignored using appropriate <a href="https://www.w3.org/TR/tabular-metadata/#dfn-dialect-description" class="externalDFN">dialect descriptions</a>.</p>
        </div>
      </section>
      <section id="html-example">
        <h3 id="x2-2-example"><span class="secno">2.2 </span>Example</h3>
        <p>The following tables are identified using <a href="#countries"><code>#countries</code></a> and <a href="#country_slice"><code>#country_slice</code></a>:</p>
        <table id="countries">
          <caption>Countries</caption>
          <tbody><tr><th>countryCode</th><th>latitude</th><th>longitude</th><th>name</th></tr>
          <tr><td>AD</td><td>42.5</td><td>1.6</td><td>Andorra</td></tr>
          <tr><td>AE</td><td>23.4</td><td>53.8</td><td>United Arab Emirates</td></tr>
          <tr><td>AF</td><td>33.9</td><td>67.7</td><td>Afghanistan</td></tr>
        </tbody></table>
        <table id="country_slice">
          <caption>Country Slice</caption>
          <tbody><tr><th>countryRef</th><th>year</th><th>population</th></tr>
          <tr><td>AF</td><td>1960</td><td>9616353</td></tr>
          <tr><td>AF</td><td>1961</td><td>9799379</td></tr>
          <tr><td>AF</td><td>1962</td><td>9989846</td></tr>
        </tbody></table>
        <div class="example"><div class="example-title marker"><span>Example 3</span><span style="text-transform: none">: Referenced HTML tables</span></div><pre class="highlight hljs xml" aria-busy="false" aria-live="polite"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"countries"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">caption</span>&gt;</span>Countries<span class="hljs-tag">&lt;/<span class="hljs-name">caption</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>countryCode<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>latitude<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>longitude<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>AD<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>42.5<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>1.6<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Andorra<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>AE<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>23.4<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>53.8<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>United Arab Emirates<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>AF<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>33.9<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>67.7<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>Afghanistan<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"country_slice"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">caption</span>&gt;</span>Country Slice<span class="hljs-tag">&lt;/<span class="hljs-name">caption</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>countryRef<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>year<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>population<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>AF<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>1960<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>9616353<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>AF<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>1961<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>9799379<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>AF<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>1962<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>9989846<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></pre></div>
        <p>The metadata is describe here in a <code>script</code> element:</p>
        <div class="example"><div class="example-title marker"><span>Example 4</span></div><pre class="hljs json" aria-busy="false" aria-live="polite">
{
  <span class="hljs-attr">"@context"</span>: <span class="hljs-string">"http://www.w3.org/ns/csvw"</span>,
  <span class="hljs-attr">"tables"</span>: [{
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"#countries"</span>,
    <span class="hljs-attr">"tableSchema"</span>: {
      <span class="hljs-attr">"columns"</span>: [{
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"countryCode"</span>,
        <span class="hljs-attr">"titles"</span>: <span class="hljs-string">"countryCode"</span>,
        <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">"propertyUrl"</span>: <span class="hljs-string">"http://www.geonames.org/ontology{#_name}"</span>
      }, {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"latitude"</span>,
        <span class="hljs-attr">"titles"</span>: <span class="hljs-string">"latitude"</span>,
        <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"number"</span>
      }, {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"longitude"</span>,
        <span class="hljs-attr">"titles"</span>: <span class="hljs-string">"longitude"</span>,
        <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"number"</span>
      }, {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"name"</span>,
        <span class="hljs-attr">"titles"</span>: <span class="hljs-string">"name"</span>,
        <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"string"</span>
      }],
      <span class="hljs-attr">"aboutUrl"</span>: <span class="hljs-string">"http://example.org/#countries-{countryCode}"</span>,
      <span class="hljs-attr">"propertyUrl"</span>: <span class="hljs-string">"http://schema.org/{_name}"</span>,
      <span class="hljs-attr">"primaryKey"</span>: <span class="hljs-string">"countryCode"</span>
    }
  }, {
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"#country_slice"</span>,
    <span class="hljs-attr">"tableSchema"</span>: {
      <span class="hljs-attr">"columns"</span>: [{
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"countryRef"</span>,
        <span class="hljs-attr">"titles"</span>: <span class="hljs-string">"countryRef"</span>,
        <span class="hljs-attr">"propertyUrl"</span>: <span class="hljs-string">"http://dbpedia.org/ontology/locationCountry"</span>,
        <span class="hljs-attr">"valueUrl"</span>: <span class="hljs-string">"http://example.org/#countries-{countryRef}"</span>
      }, {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"year"</span>,
        <span class="hljs-attr">"titles"</span>: <span class="hljs-string">"year"</span>,
        <span class="hljs-attr">"propertyUrl"</span>: <span class="hljs-string">"http://dbpedia.org/property/urbanAreaDate"</span>,
        <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"gYear"</span>
      }, {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"population"</span>,
        <span class="hljs-attr">"titles"</span>: <span class="hljs-string">"population"</span>,
        <span class="hljs-attr">"propertyUrl"</span>: <span class="hljs-string">"http://www.geonames.org/ontology/population"</span>,
        <span class="hljs-attr">"datatype"</span>: <span class="hljs-string">"integer"</span>
      }],
      <span class="hljs-attr">"foreignKeys"</span>: [{
        <span class="hljs-attr">"columnReference"</span>: <span class="hljs-string">"countryRef"</span>,
        <span class="hljs-attr">"reference"</span>: {
          <span class="hljs-attr">"resource"</span>: <span class="hljs-string">"#countries"</span>,
          <span class="hljs-attr">"columnReference"</span>: <span class="hljs-string">"countryCode"</span>
        }
      }]
    }
  }]
}
</pre></div>
        <p>Generating Minimal JSON from this document should result in the following:</p>
        <div class="example"><div class="example-title marker"><span>Example 5</span><span style="text-transform: none">: Minimal JSON output</span></div><pre class="hljs json" data-oninclude="escapeContent" aria-busy="false" aria-live="polite">[
  {
    <span class="hljs-attr">"@id"</span>: <span class="hljs-string">"http://example.org/#countries-AD"</span>,
    <span class="hljs-attr">"http://www.geonames.org/ontology#countryCode"</span>: <span class="hljs-string">"AD"</span>,
    <span class="hljs-attr">"schema:latitude"</span>: <span class="hljs-number">42.5</span>,
    <span class="hljs-attr">"schema:longitude"</span>: <span class="hljs-number">1.6</span>,
    <span class="hljs-attr">"schema:name"</span>: <span class="hljs-string">"Andorra"</span>
  },
  {
    <span class="hljs-attr">"@id"</span>: <span class="hljs-string">"http://example.org/#countries-AE"</span>,
    <span class="hljs-attr">"http://www.geonames.org/ontology#countryCode"</span>: <span class="hljs-string">"AE"</span>,
    <span class="hljs-attr">"schema:latitude"</span>: <span class="hljs-number">23.4</span>,
    <span class="hljs-attr">"schema:longitude"</span>: <span class="hljs-number">53.8</span>,
    <span class="hljs-attr">"schema:name"</span>: <span class="hljs-string">"United Arab Emirates"</span>
  },
  {
    <span class="hljs-attr">"@id"</span>: <span class="hljs-string">"http://example.org/#countries-AF"</span>,
    <span class="hljs-attr">"http://www.geonames.org/ontology#countryCode"</span>: <span class="hljs-string">"AF"</span>,
    <span class="hljs-attr">"schema:latitude"</span>: <span class="hljs-number">33.9</span>,
    <span class="hljs-attr">"schema:longitude"</span>: <span class="hljs-number">67.7</span>,
    <span class="hljs-attr">"schema:name"</span>: <span class="hljs-string">"Afghanistan"</span>
  },
  {
    <span class="hljs-attr">"http://dbpedia.org/ontology/locationCountry"</span>: <span class="hljs-string">"http://example.org/#countries-AF"</span>,
    <span class="hljs-attr">"http://dbpedia.org/property/urbanAreaDate"</span>: <span class="hljs-string">"1960"</span>,
    <span class="hljs-attr">"http://www.geonames.org/ontology/population"</span>: <span class="hljs-number">9616353</span>
  },
  {
    <span class="hljs-attr">"http://dbpedia.org/ontology/locationCountry"</span>: <span class="hljs-string">"http://example.org/#countries-AF"</span>,
    <span class="hljs-attr">"http://dbpedia.org/property/urbanAreaDate"</span>: <span class="hljs-string">"1961"</span>,
    <span class="hljs-attr">"http://www.geonames.org/ontology/population"</span>: <span class="hljs-number">9799379</span>
  },
  {
    <span class="hljs-attr">"http://dbpedia.org/ontology/locationCountry"</span>: <span class="hljs-string">"http://example.org/#countries-AF"</span>,
    <span class="hljs-attr">"http://dbpedia.org/property/urbanAreaDate"</span>: <span class="hljs-string">"1962"</span>,
    <span class="hljs-attr">"http://www.geonames.org/ontology/population"</span>: <span class="hljs-number">9989846</span>
  }
]</pre></div>
        <p>Generating Minimal RDF from this document should result in the following:</p>
        <div class="example"><div class="example-title marker"><span>Example 6</span><span style="text-transform: none">: Minimal RDF output</span></div><pre class="hljs xml" data-oninclude="escapeContent" aria-busy="false" aria-live="polite">@prefix geonames: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.geonames.org</span>/<span class="hljs-attr">ontology</span>#&gt;</span> .
@prefix schema: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">schema.org</span>/&gt;</span> .
@prefix xsd: <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">2001</span>/<span class="hljs-attr">XMLSchema</span>#&gt;</span> .

<span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">example.org</span>/#<span class="hljs-attr">countries-AD</span>&gt;</span> schema:latitude 4.25e1;
   schema:longitude 1.6e0;
   schema:name "Andorra";
   geonames:countryCode "AD" .

<span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">example.org</span>/#<span class="hljs-attr">countries-AE</span>&gt;</span> schema:latitude 2.34e1;
   schema:longitude 5.38e1;
   schema:name "United Arab Emirates";
   geonames:countryCode "AE" .

<span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">example.org</span>/#<span class="hljs-attr">countries-AF</span>&gt;</span> schema:latitude 3.39e1;
   schema:longitude 6.77e1;
   schema:name "Afghanistan";
   geonames:countryCode "AF" .

 [
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">dbpedia.org</span>/<span class="hljs-attr">ontology</span>/<span class="hljs-attr">locationCountry</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">example.org</span>/#<span class="hljs-attr">countries-AF</span>&gt;</span>;
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">dbpedia.org</span>/<span class="hljs-attr">property</span>/<span class="hljs-attr">urbanAreaDate</span>&gt;</span> "1962"^^xsd:gYear;
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.geonames.org</span>/<span class="hljs-attr">ontology</span>/<span class="hljs-attr">population</span>&gt;</span> 9989846
 ] .

 [
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">dbpedia.org</span>/<span class="hljs-attr">ontology</span>/<span class="hljs-attr">locationCountry</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">example.org</span>/#<span class="hljs-attr">countries-AF</span>&gt;</span>;
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">dbpedia.org</span>/<span class="hljs-attr">property</span>/<span class="hljs-attr">urbanAreaDate</span>&gt;</span> "1961"^^xsd:gYear;
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.geonames.org</span>/<span class="hljs-attr">ontology</span>/<span class="hljs-attr">population</span>&gt;</span> 9799379
 ] .

 [
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">dbpedia.org</span>/<span class="hljs-attr">ontology</span>/<span class="hljs-attr">locationCountry</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">example.org</span>/#<span class="hljs-attr">countries-AF</span>&gt;</span>;
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">dbpedia.org</span>/<span class="hljs-attr">property</span>/<span class="hljs-attr">urbanAreaDate</span>&gt;</span> "1960"^^xsd:gYear;
     <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">www.geonames.org</span>/<span class="hljs-attr">ontology</span>/<span class="hljs-attr">population</span>&gt;</span> 9616353
 ] .</pre></div>
      </section>
    </section>
    <section id="extracting-tabular-data-from-embedded-csv">
      <!--OddPage--><h2 id="x3-extracting-tabular-data-from-embedded-csv"><span class="secno">3. </span>Extracting Tabular Data from embedded CSV</h2>
      <p>This section describes a mechanism for locating tabular data within an HTML document, extracting tabular data from an identified <cite><a href="https://www.w3.org/TR/html5/scripting-1.html#the-script-element"><code>script</code> element</a></cite>, and processing the tabular data to create <cite><a href="https://www.w3.org/TR/tabular-data-model/#dfn-annotated-table" class="externalDFN">annotated tables</a></cite>.</p>
      <p>In addition to <a href="#dfn-embedded-metadata" class="internalDFN" data-link-type="dfn">embedded metadata</a>, CSV data may also be embedded within HTML using a <cite><a href="https://www.w3.org/TR/html5/scripting-1.html#the-script-element"><code>script</code> element</a></cite>. The general provisions and access patterns described in <a href="#extracting-table-data" class="sectionRef sec-ref">section <span class="secno">2.</span> <span class="sec-title">Extracting Tabular Data from HTML Tables</span></a> apply for embedded CSV data.</p>
      <section id="csv-example">
        <h3 id="x3-1-example"><span class="secno">3.1 </span>Example</h3>
        <p>The following CSV <code>script</code> elements are identified using <a href="#countries"><code>#countries</code></a> and <a href="#country_slice"><code>#country_slice</code></a>:</p>
        <div class="example"><div class="example-title marker"><span>Example 7</span><span style="text-transform: none">: Referenced CSV data</span></div><pre class="highlight hljs xml" aria-busy="false" aria-live="polite"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"countries"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/csv"</span>&gt;</span><span class="javascript">
countryCode,latitude,longitude,name
AD,<span class="hljs-number">42.5</span>,<span class="hljs-number">1.6</span>,Andorra
AE,<span class="hljs-number">23.4</span>,<span class="hljs-number">53.8</span>,<span class="hljs-string">"United Arab Emirates"</span>
AF,<span class="hljs-number">33.9</span>,<span class="hljs-number">67.7</span>,Afghanistan
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"country_slice"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/csv"</span>&gt;</span><span class="undefined">
countryRef,year,population
AF,1960,9616353
AF,1961,9799379
AF,1962,9989846
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></pre></div>
        <p>The metadata shown in <a href="#html-example" class="sectionRef sec-ref">section <span class="secno">2.2</span> <span class="sec-title">Example</span></a> can be used to access embedded CSV as well as HTML tables.</p>
      </section>
    </section>
  

<section id="references" class="appendix"><!--OddPage--><h2 id="a-references"><span class="secno">A. </span>References</h2><section id="informative-references"><h3 id="a-1-informative-references"><span class="secno">A.1 </span>Informative references</h3><dl class="bibliography"><dt id="bib-csv2json">[csv2json]</dt><dd><a href="https://www.w3.org/TR/csv2json/"><cite>Generating JSON from Tabular Data on the Web</cite></a>. Jeremy Tandy; Ivan Herman. W3C. 17 December 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/csv2json/">https://www.w3.org/TR/csv2json/</a>
</dd><dt id="bib-csv2rdf">[csv2rdf]</dt><dd><a href="https://www.w3.org/TR/csv2rdf/"><cite>Generating RDF from Tabular Data on the Web</cite></a>. Jeremy Tandy; Ivan Herman; Gregg Kellogg. W3C. 17 December 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/csv2rdf/">https://www.w3.org/TR/csv2rdf/</a>
</dd><dt id="bib-DOM">[DOM]</dt><dd><a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
</dd><dt id="bib-html5">[html5]</dt><dd><a href="https://www.w3.org/TR/html5/"><cite>HTML5</cite></a>. Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Theresa O'Connor; Silvia Pfeiffer. W3C. 28 October 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/html5/">https://www.w3.org/TR/html5/</a>
</dd><dt id="bib-json-ld">[json-ld]</dt><dd><a href="https://www.w3.org/TR/json-ld/"><cite>JSON-LD 1.0</cite></a>. Manu Sporny; Gregg Kellogg; Markus Lanthaler. W3C. 16 January 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/json-ld/">https://www.w3.org/TR/json-ld/</a>
</dd><dt id="bib-RFC3986">[RFC3986]</dt><dd><a href="https://tools.ietf.org/html/rfc3986"><cite>Uniform Resource Identifier (URI): Generic Syntax</cite></a>. T. Berners-Lee; R. Fielding; L. Masinter. IETF. January 2005. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc3986">https://tools.ietf.org/html/rfc3986</a>
</dd><dt id="bib-tabular-data-model">[tabular-data-model]</dt><dd><a href="https://www.w3.org/TR/tabular-data-model/"><cite>Model for Tabular Data and Metadata on the Web</cite></a>. Jeni Tennison; Gregg Kellogg. W3C. 17 December 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/tabular-data-model/">https://www.w3.org/TR/tabular-data-model/</a>
</dd><dt id="bib-tabular-metadata">[tabular-metadata]</dt><dd><a href="https://www.w3.org/TR/tabular-metadata/"><cite>Metadata Vocabulary for Tabular Data</cite></a>. Jeni Tennison; Gregg Kellogg. W3C. 17 December 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/tabular-metadata/">https://www.w3.org/TR/tabular-metadata/</a>
</dd></dl></section></section><p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to Top">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>