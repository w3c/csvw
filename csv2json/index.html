<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <title>Generating JSON from Tabular Data on the Web</title>
    <link href="hide.css" rel="stylesheet">
    <script type="text/javascript" src="hide.js"></script>
    <script class="remove" src="../local-biblio.js"></script>
    <script class="remove" src="https://www.w3.org/Tools/respec/respec-w3c-common"></script>
    <script class="remove" src="../replace-ed-uris.js"></script>
    <script class="remove">
      var respecConfig = {
          localBiblio: localBibliography,
          specStatus: "ED",
          shortName: "csv2json",
          // publishDate:  "2014-04-01",
          previousPublishDate: "2015-11-17",
          previousMaturity: "PR",
          previousURI: "http://www.w3.org/TR/2015/PR-csv2json-20151117/",
          edDraftURI: "http://w3c.github.io/csvw/csv2json/",
          testSuiteURI: "http://www.w3.org/2013/csvw/tests/",
          implementationReportURI: "http://www.w3.org/2013/csvw/implementation_report.html",
          lcEnd: "2015-10-30",
          crEnd: "2015-10-30",
          prEnd: "2015-12-15",
          editors:
           [{
                  name: "Jeremy Tandy",
                  company: "Met Office",
                  companyURL: "http://www.metoffice.gov.uk/",
                  w3cid: "65512"
            },{
             name: "Ivan Herman",
             url: "http://www.w3.org/People/Ivan/",
             company: "W3C",
             companyURL: "http://www.w3.org",
             w3cid: "7382"
           }],
          wg: "CSV on the Web Working Group",
          wgURI: "http://www.w3.org/2013/csvw/",
          wgPublicList: "public-csv-wg",
          wgPatentURI: "http://www.w3.org/2004/01/pp-impl/68238/status",
          otherLinks: [{
            key: "Repository",
            data: [{
                value: "We are on GitHub",
                href: "https://github.com/w3c/csvw/"
              }, {
                value: "File a bug",
                href: "https://github.com/w3c/csvw/issues"
              }]
            } , 
            {
              key: "Changes",
              data: [{
                  value: "Diff to previous version",
                  href: "diff.html"
                }, {
                  value: "Commit history",
                  href: "https://github.com/w3c/csvw/commits/gh-pages"
                }]
             }] ,
          alternateFormats: [
            {
              uri: "csv2json.epub",
              label: "ePub"
            }
          ],
          inlineCSS: true,
          noIDLIn: true,
          issueBase: "https://github.com/w3c/csvw/issues/",
          errata: "http://www.w3.org/2013/csvw/errata/",
          noLegacyStyle: false
          };
    </script>
    <script class="remove">
    function updateExample(doc, content) {
   	  var utils = require("core/utils");
    // perform transformations to make it render and prettier
      return utils.xmlEscape(content);
    }
    </script>
    <style type="text/css">
      .grammar td { font-family: monospace; vertical-align: top; }
      .grammar-literal { color: gray;}
      .TBD { font-style: italic; background: yellow;}
      .steps li { margin-bottom: 0.5em;}
      dl.nvp {
        padding: 0 0 0 1em;
        margin-left: -1em;
        text-indent: 0em;
      }
      dl.nvp dt, dl.nvp dd { margin: 0; display: inline }
      dl.nvp dt:after { content: ':'; }
      dl.nvp dd:after { content: '\A'; white-space: pre; }
      ol.algorithm {
        counter-reset: numsection;
        list-style-type: none;
      }
      ol.algorithm > li {
        margin: 1em -1em;
        padding-right: 1em;
        text-indent: -1em;
      }
      ol.algorithm > li:before {
        font-weight: bold;
        counter-increment: numsection;
        content: counters(numsection, ".") " ";
      }
      ol.algorithm>li p {text-indent: 0em}
      ol.algorithm>li>p:first-child {position: relative; display: inline;}
      dd a.externalDFN, p a.externalDFN {border-bottom:  1px solid #99c; font-style: italic;}
      pre {overflow: auto;}

      dl.typography dt { font-weight: normal}
      dl.typography dd { margin-bottom: 0.3em; margin-top: 0.2em;}
      dl.typography a.externalDFN { border-bottom:  1px solid #99c; font-style: italic; }
    </style>
  </head>
  <body>
    <section id="abstract">
      <p>This document defines the procedures and rules to be applied when converting tabular data into JSON. Tabular data may be complemented with metadata annotations that describe its structure, the meaning of its content and how it may form part of a collection of interrelated tabular data. This document specifies the effect of this metadata on the resulting JSON.</p>
    </section>
    
    <section id="sotd">
      <p>
        The <a href="http://www.w3.org/2013/csvw">CSV on the Web Working Group</a> was <a href="http://www.w3.org/2013/05/lcsv-charter.html">chartered</a> to produce a recommendation "Access methods for CSV Metadata" as well as recommendations for "Metadata vocabulary for CSV data" and "Mapping mechanism to transforming CSV into various formats (e.g., RDF, JSON, or XML)".  This document aims to satisfy the JSON variant of the mapping recommendation.</p>
    </section>

    <section id="intro">
      <h2>Introduction</h2>
      <p>This document describes the processing of <a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data">tabular data</a> to create a set of nested objects that MUST be serialized as JSON [[!RFC7159]].</p>

      <p class="note">The conversion of CSV content to JSON is intended for web developers who need not care about the complexities of RDF [[!rdf11-concepts]]. Where the formality of RDF is required, [[!csv2rdf]] provides the procedures for mapping from CSV content to RDF which may be serialized to [[json-ld]].</p>

      <p> The [[!tabular-data-model]] defines an <a href="http://w3c.github.io/csvw/syntax/#dfn-annotated-tabular-data-model" class="externalDFN">annotated tabular data model</a> consisting of <a href="http://w3c.github.io/csvw/syntax/#dfn-table" class="externalDFN">tables</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-column" class="externalDFN">columns</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-row" class="externalDFN">rows</a>, and <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cells</a>, enriched with <a href="http://w3c.github.io/csvw/syntax/#dfn-annotation" class="externalDFN">annotations</a> that describe the structure of the <a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data" class="externalDFN">tabular data</a> and the meaning of its content. A <a href="http://w3c.github.io/csvw/syntax/#dfn-group-of-tables" class="externalDFN">group of tables</a> is a collection of <a href="http://w3c.github.io/csvw/syntax/#dfn-table" class="externalDFN">tables</a> published as a single atomic unit.</p>

      <p>The conversion procedure described in this specification operates on the <a href="http://w3c.github.io/csvw/syntax/#dfn-annotated-tabular-data-model" class="externalDFN">annotated tabular data model</a>. This specification does not specify the processes needed to convert CSV-encoded data into tabular data form. Please refer to [[!tabular-data-model]] for details of <a href="http://w3c.github.io/csvw/syntax/#parsing">parsing tabular data</a>.</p>

      <p>Conversion applications MUST provide at least two modes of operation: <a>standard</a> and <a>minimal</a>.</p>

      <p><dfn data-lt="standard mode|standard">Standard mode</dfn> conversion frames the information gleaned from the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cells</a> of the <a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data" class="externalDFN">tabular data</a> with details of the <a href="http://w3c.github.io/csvw/syntax/#dfn-row" class="externalDFN">rows</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-table" class="externalDFN">tables</a>, and a <a href="http://w3c.github.io/csvw/syntax/#dfn-group-of-tables" class="externalDFN">group of tables</a> within which that information is provided.</p>

      <p><dfn data-lt="minimal mode|minimal">Minimal mode</dfn> conversion includes <em>only</em> the information gleaned from the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cells</a> of the <a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data" class="externalDFN">tabular data</a> within the output.</p>

      <p><a>Standard</a> and <a>minimal</a> conversion are described normatively <a href="#generating-json">below</a>.</p>

      <p>Conversion applications MAY offer additional implementation specific conversion modes.</p>

      <p><a href="http://w3c.github.io/csvw/metadata/#dfn-transformation-definition" class="externalDFN">Transformation definitions</a>, as defined in [[!tabular-metadata]] MAY be used to specify how <a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data" class="externalDFN">tabular data</a> can be transformed into another format using a script or template. Such <a href="http://w3c.github.io/csvw/metadata/#dfn-transformation-definition" class="externalDFN">transformation definitions</a> MAY use the JSON output described in this specification as input.</p>
    </section>

    <section id="conformance">
      <p><a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data" class="externalDFN">Tabular data</a> MUST conform to the description from [[!tabular-data-model]]. In particular note that each <a href="http://w3c.github.io/csvw/syntax/#dfn-row" class="externalDFN">row</a> MUST contain the same number of <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cells</a> (although some of these <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cells</a> may be empty).</p>
      <p class="note">
        Not all CSV-encoded data can be parsed into a tabular data model. An algorithm for parsing CSV-based files is described in [[!tabular-data-model]].
      </p>
    </section>
    
    <section>
      <h2>Typographical conventions</h2>
      <div data-include="../typographical-conventions.html"></div>
    </section>

    <section id="conversion">
      <h2>Converting Tabular Data to JSON</h2>

      <p>The procedures for converting <a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data" class="externalDFN">tabular data</a> into JSON are described below for both <a>standard</a> and <a>minimal</a> modes.</p>

      <section id="algorithm-terms">
        <h3>Algorithm terms</h3>
        <dl>
          <dt><dfn>about URL</dfn></dt>
          <dd>The <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a> annotation on the current <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cell</a>. As defined in [[!tabular-data-model]].</dd>

          <dt><dfn data-lt="annotated table|annotated tables|table|tables">annotated table</dfn></dt>
          <dd>The <a href="http://w3c.github.io/csvw/syntax/#dfn-annotated-table" class="externalDFN">annotated table</a> is defined in [[!tabular-data-model]] as describing a particular <a href="http://w3c.github.io/csvw/syntax/#dfn-table" class="externalDFN">table</a> and its annotations.</dd>

          <dt><dfn data-lt="array|arrays">array</dfn></dt>
          <dd>An <a>array</a> is defined in JSON ([[!RFC7159]]) as an ordered sequence of zero or more values, where a value is a string, number, boolean, null, <a>object</a>, or <a>array</a>.</dd>

          <dt><dfn data-lt="cell|cells">cell</dfn></dt>
          <dd>A <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cell</a> is defined in [[!tabular-data-model]] as the intersection of a <a>row</a> and a <a>column</a> within a <a>table</a>.</dd>

          <dt><dfn>cell errors</dfn></dt>
          <dd><a href="http://w3c.github.io/csvw/syntax/#dfn-cell-errors" class="externalDFN">Cell errors</a> are defined in [[!tabular-data-model]] as a (possibly empty) list of validation errors generated while parsing the literal content of a <a>cell</a> to generate the <a data-lt="cell value">semantic value</a>.</dd>

          <dt><dfn data-lt="cell value|cell values">cell value</dfn></dt>
          <dd>A <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value" class="externalDFN">cell value</a> is defined in [[!tabular-data-model]] as the semantic value of the <a>cell</a>; this MAY be <code>null</code> or a sequence of values.</dd>

          <dt><dfn data-lt="column|columns">column</dfn></dt>
          <dd>A <a href="http://w3c.github.io/csvw/syntax/#dfn-column" class="externalDFN">column</a> is defined in [[!tabular-data-model]] as a vertical arrangement of <a>cells</a> within a <a>table</a>.</dd>

          <dt><dfn>group of tables</dfn></dt>
          <dd>A <a href="http://w3c.github.io/csvw/syntax/#dfn-group-of-tables" class="externalDFN">group of tables</a> is defined in [[!tabular-data-model]] as comprising a set of <a>annotated tables</a> and a set of annotations that relate to that group.</dd>

          <dt><dfn>group of tables identifier</dfn></dt>
          <dd>The group of tables identifier is the <a href="http://w3c.github.io/csvw/syntax/#dfn-table-group-id" class="externalDFN">id</a> annotation on a <a>group of tables</a>. As defined in [[!tabular-data-model]].</dd>

          <dt><dfn>name</dfn></dt>
          <dd>In the context of this specification, <a>name</a> is used as defined in JSON ([[!RFC7159]]); that is, that <a>name</a> is a string that provides a unique key within a set of name-value pairs within a JSON <a>object</a>.</dd>

          <dt><dfn>non-core annotations</dfn></dt>
          <dd>Core annotations are listed in [[!tabular-data-model]]; <a data-lt="group of tables">groups of tables</a> and <a>tables</a> may also have other annotations that are not defined in that specification; these are known as <a>non-core annotations</a>.</dd>

          <dt><dfn>notes</dfn></dt>
          <dd>A list of <a href="http://w3c.github.io/csvw/syntax/#dfn-table-notes" class="externalDFN">notes</a>, as defined in [[!tabular-data-model]], attached to an <a>annotated table</a> or <a>group of tables</a> using the <code>notes</code> property. This may be an empty list.</dd>

          <dt><dfn data-lt="object|objects">object</dfn></dt>
          <dd>An <a>object</a> is defined in JSON ([[!RFC7159]]) as an unordered collection of zero or more name-value pairs, where <var>name</var> is a string and <var>value</var> is a string, number, boolean, null, <a>object</a>, or <a>array</a>.</dd>

          <dt><dfn data-lt="property url|property urls">property URL</dfn></dt>
          <dd>The <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> annotation on the current <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cell</a>. As defined in [[!tabular-data-model]].</dd>

          <dt><dfn data-lt="row|rows">row</dfn></dt>
          <dd>The <a href="http://w3c.github.io/csvw/syntax/#dfn-row" class="externalDFN">row</a> is defined in [[!tabular-data-model]] as a horizontal arrangement of <a>cells</a> within a <a>table</a>.</dd>

          <dt><dfn>row number</dfn></dt>
          <dd>A <a href="http://w3c.github.io/csvw/syntax/#dfn-row-number" class="externalDFN">row number</a> is defined in [[!tabular-data-model]] as the position of the <a>row</a> within the <a>table</a>, starting from 1.</dd>

          <dt><dfn>row source number</dfn></dt>
          <dd>A <a href="http://w3c.github.io/csvw/syntax/#dfn-row-source-number" class="externalDFN">row source number</a> is defined in [[!tabular-data-model]] as the position of the <a>row</a> within the source <a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data-file" class="externalDFN">tabular data file</a>. Provision of the <a>row source number</a> is dependent on parsing applications and may be reported as <code>null</code>.</dd>

          <dt><dfn data-lt="subject|subjects|subject(s)">subject</dfn></dt>
          <dd>Within this algorithm, a <a>subject</a> is the resource that the value of a given <a>cell</a> refers to. This may be specified using <a>about URL</a>.</dd>

          <dt><dfn>table identifier</dfn></dt>
          <dd>The table identifier is the <a href="http://w3c.github.io/csvw/syntax/#dfn-table-id" class="externalDFN">id</a> annotation on an <a>annotated table</a>. As defined in [[!tabular-data-model]].</dd>

          <dt><dfn data-lt="value url|value urls">value URL</dfn></dt>
          <dd>The <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-url" class="externalDFN">value URL</a> annotation on the current <a href="http://w3c.github.io/csvw/syntax/#dfn-cell" class="externalDFN">cell</a>. As defined in [[!tabular-data-model]].</dd>
        </dl>
      </section>

      <section id="generating-json">
        <h3>Generating JSON</h3>

        <p>A conformant JSON conversion application MUST produce output conforming to this algorithm according to the chosen mode of conversion: <a>standard</a> or <a>minimal</a>.</p>

       <p class="note">Where an <a>annotated table</a> is defined in isolation (e.g. in the absence of a <a>group of tables</a>), a default <a>group of tables</a> is provided with a single <a href="http://w3c.github.io/csvw/syntax/#dfn-table-group-tables" class="externalDFN">tables</a> annotation that refers to the given <a>table</a>.</p>

       <p>The [[!tabular-data-model]] specifies that string values within <a href="http://w3c.github.io/csvw/syntax/#dfn-tabular-data" class="externalDFN">tabular data</a> (such as <a href="http://w3c.github.io/csvw/syntax/#dfn-column-titles" class="externalDFN">column titles</a> or <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-string-value" class="externalDFN">cell string values</a>) MUST contain only Unicode characters. No Unicode normalization (as specified in [[UAX15]]) is applied to these string values during the conversion to JSON.</p>

        <section>
          <h3>Minimal mode</h3>
          <p>The steps in the algorithm defined here apply to <a>minimal</a> mode.</p>
          <ol class="algorithm">
            <li>
              <p>Insert an empty <a>array</a> <var>A</var> into the JSON output. The <a>objects</a> containing the name-value pairs associated with the <a>cell values</a> will be subsequently inserted into this <a>array</a>.</p>
            </li>
            <li>
              <p>Each <a>table</a> is processed sequentially in the order they are referenced in the <a>group of tables</a>. For each <a>table</a> where the  <a href="http://w3c.github.io/csvw/syntax/#dfn-table-suppress-output" class="externalDFN">suppress output</a> annotation is <code>false</code>:</p>
              <ol class="algorithm">
                <li>
                  <p>Each <a>row</a> within the <a>table</a> is processed sequentially in order. For each <a>row</a> in the current <a>table</a>:</p>
                  <ol class="algorithm">
                    <li>
                      <p>Generate a sequence of <a>objects</a>, <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var>, each of which corresponds to a <a>subject</a> described by the current <a>row</a>, as described in <a href="#gen-subj-cells"></a>.</p>

                      <p class="note">The <a>subject(s)</a> described by each <a>row</a> are determined according to the <a>about URL</a> annotation for each <a>cell</a> in the current <a>row</a>. Where <a>about URL</a> is undefined, a default <a>subject</a> for the <a>row</a> is used.</p>
                    </li>
                    <li>
                      <p>As described in <a href="#nesting-objects"></a>, process the sequence of <a>objects</a>, <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var>, to produce a new sequence of <em>root</em> <a>objects</a>, <var>S<sup>R</sup><sub>1</sub></var> to <var>S<sup>R</sup><sub>m</sub></var>, that MAY include <em>nested</em> <a>objects</a>.</p>

                      <p class="note">A <a>row</a> MAY describe multiple interrelated <a>subjects</a>; where the <a>value URL</a> annotation on one <a>cell</a> matches the <a>about URL</a> annotation on another <a>cell</a> in the same <a>row</a>.</p>
                    </li>
                    <li>
                      <p>Insert each <em>root</em> <a>object</a>, <var>S<sup>R</sup><sub>1</sub></var> to <var>S<sup>R</sup><sub>m</sub></var>, into <a>array</a> <var>A</var>.</p>
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
          </ol>
        </section>

        <section>
          <h3>Standard mode</h3>
          <p>The steps in the algorithm defined here apply to <a>standard mode</a>.</p>
          <ol class="algorithm">
            <li>
              <p>Insert an empty <a>object</a> <var>G</var> into the JSON output which is associated with the <a>group of tables</a>.</p>
            </li>
            <li>
              <p>If the <a>group of tables</a> has an <a data-lt="group of tables identifier">identifier</a> <var>I<sub>G</sub></var>; insert the following name-value pair into <a>object</a> <var>G</var>:</p>
              <dl class="nvp">
                <dt>name</dt>
                <dd><code>@id</code></dd>
                <dt>value</dt>
                <dd><var>I<sub>G</sub></var></dd>
              </dl>
            </li>
            <li>
              <p>Insert any <a>notes</a> and <a>non-core annotations</a> specified for the <a>group of tables</a> into <a>object</a> <var>G</var> according to the rules provided in <a href="#json-ld-to-json"></a>.</p>
            </li>
            <li>
              <p>Insert the following name-value pair into <a>object</a> <var>G</var>:</p>
              <dl class="nvp">
                <dt>name</dt>
                <dd><code>tables</code></dd>
                <dt>value</dt>
                <dd><var>A<sub>T</sub></var></dd>
              </dl>
              <p>where <var>A<sub>T</sub></var> is an <a>array</a> into which the <a>objects</a> describing the <a>annotated tables</a> will be subsequently inserted.</p>
            </li>
            <li>
              <p>Each <a>table</a> is processed sequentially in the order they are referenced in the <a>group of tables</a>.</p>
              <p>For each <a>table</a> where the  <a href="http://w3c.github.io/csvw/syntax/#dfn-table-suppress-output" class="externalDFN">suppress output</a> annotation is <code>false</code>:</p>
              <ol class="algorithm">
                <li>
                  <p>Insert an empty <a>object</a> <var>T</var> into the <a>array</a> <var>A<sub>T</sub></var> to represent the <a>table</a>.</p>
                </li>
                <li>
                  <p>If the <a>table</a> has an <a data-lt="table identifier">identifier</a> <var>I<sub>T</sub></var>; insert the following name-value pair into <a>object</a> <var>T</var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><code>@id</code></dd>
                    <dt>value</dt>
                    <dd><var>I<sub>T</sub></var></dd>
                  </dl>
                </li>
                <li>
                  <p>Specify the source tabular data file <var>URL</var> for the current table based on the <a href="http://w3c.github.io/csvw/syntax/#dfn-table-url" class="externalDFN">url</a> annotation; insert the following name-value pair into <a>object</a> <var>T</var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><code>url</code></dd>
                    <dt>value</dt>
                    <dd><var>URL</var></dd>
                  </dl>
                </li>
                <li>
                  <p>Insert any <a>notes</a> and <a>non-core annotations</a> specified for the <a>table</a> into <a>object</a> <var>T</var> according to the rules provided in <a href="#json-ld-to-json"></a>.</p>

                  <p class="note">All other <a href="http://w3c.github.io/csvw/syntax/#dfn-core-annotations" class="externalDFN">core annotations</a> for the <a>table</a> are ignored during the conversion; including information about <a href="http://w3c.github.io/csvw/syntax/#dfn-table-schema" class="externalDFN">table schemas</a> and their <a href="http://w3c.github.io/csvw/syntax/#dfn-column" class="externalDFN">columns</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-table-foreign-keys" class="externalDFN">foreign keys</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-table-direction" class="externalDFN">table direction</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-table-transformation" class="externalDFN">transformations</a>, etc.</p>
                </li>
                <li>
                  <p>Insert the following name-value pair into <a>object</a> <var>T</var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><code>row</code></dd>
                    <dt>value</dt>
                    <dd><var>A<sub>R</sub></var></dd>
                  </dl>
                  <p>where <var>A<sub>R</sub></var> is an <a>array</a> into which the <a>objects</a> describing the <a>rows</a> will be subsequently inserted.</p>
                </li>
                <li>
                  <p>Each <a>row</a> within the <a>table</a> is processed sequentially in order. For each <a>row</a> in the current <a>table</a>:</p>
                  <ol class="algorithm">
                    <li>
                      <p>Insert an empty <a>object</a> <var>R</var> into the <a>array</a> <var>A<sub>R</sub></var> to represent the <a>row</a>.</p>
                    </li>
                    <li>
                      <p>Specify the <a>row number</a> <var>n</var> for the <a>row</a>; insert the following name-value pair into <a>object</a> <var>R</var>:</p>
                      <dl class="nvp">
                        <dt>name</dt>
                        <dd><code>rownum</code></dd>
                        <dt>value</dt>
                        <dd><var>n</var></dd>
                      </dl>
                    </li>
                    <li>
                      <p>Specify the <a>row source number</a> <var>n<sub>source</sub></var> for the <a>row</a> within the source tabular data file <var>URL</var> using a fragment-identifier as specified in [[RFC7111]]; if <a>row source number</a> is not <code>null</code>, insert the following name-value pair into <a>object</a> <var>R</var>:</p>
                      <dl class="nvp">
                        <dt>name</dt>
                        <dd><code>url</code></dd>
                        <dt>value</dt>
                        <dd><var>URL</var><code>#row=</code><var>n<sub>source</sub></var></dd>
                      </dl>
                    </li>
                    <li>
                      <p>Specify any <a href="http://w3c.github.io/csvw/syntax/#dfn-row-titles" class="externalDFN">titles</a> for the <a>row</a>; if <a href="http://w3c.github.io/csvw/syntax/#dfn-row-titles" class="externalDFN">row titles</a> is not <code>null</code>, insert the following name-value pair into <a>object</a> <var>R</var>:</p>
                      <dl class="nvp">
                        <dt>name</dt>
                        <dd><code>titles</code></dd>
                        <dt>value</dt>
                        <dd><var>t</var></dd>
                      </dl>
                      <p>where <var>t</var> is the single value or array of values provided by the <a href="http://w3c.github.io/csvw/syntax/#dfn-row-titles" class="externalDFN">row titles</a> annotation.</p>
                      <p class="note">JSON has no native support for expressing language information; therefore any such information associated with the <a href="http://w3c.github.io/csvw/syntax/#dfn-row-titles" class="externalDFN">row titles</a> is ignored.</p>
                    </li>
                    <li>
                      <p>Insert any <a>non-core annotations</a> specified for the <a>row</a> into <a>object</a> <var>R</var> according to the rules provided in <a href="#json-ld-to-json"></a>.</p>
                    </li>
                    <li>
                      <p>Insert the following name-value pair into <a>object</a> <var>R</var>:</p>
                      <dl class="nvp">
                        <dt>name</dt>
                        <dd><code>describes</code></dd>
                        <dt>value</dt>
                        <dd><var>A</var></dd>
                      </dl>
                      <p>where <var>A</var> is an <a>array</a>. The <a>objects</a> containing the name-value pairs associated with the <a>cell values</a> will be subsequently inserted into this <a>array</a>.</p>
                    </li>
                    <li>
                      <p>Generate a sequence of <a>objects</a>, <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var>, each of which corresponds to a <a>subject</a> described by the current <a>row</a>, as described in <a href="#gen-subj-cells"></a>.</p>

                      <p class="note">The <a>subject(s)</a> described by each <a>row</a> are determined according to the <a>about URL</a> annotation for each <a>cell</a> in the current <a>row</a>. Where <a>about URL</a> is undefined, a default <a>subject</a> for the <a>row</a> is used.</p>
                    </li>
                    <li>
                      <p>As described in <a href="#nesting-objects"></a>, process the sequence of <a>objects</a>, <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var>, to produce a new sequence of <em>root</em> <a>objects</a>, <var>S<sup>R</sup><sub>1</sub></var> to <var>S<sup>R</sup><sub>m</sub></var>, that MAY include <em>nested</em> <a>objects</a>.</p>

                      <p class="note">A <a>row</a> MAY describe multiple interrelated <a>subjects</a>; where the <a>value URL</a> annotation on one <a>cell</a> matches the <a>about URL</a> annotation on another <a>cell</a> in the same <a>row</a>.</p>
                    </li>
                    <li>
                      <p>Insert each <em>root</em> <a>object</a>, <var>S<sup>R</sup><sub>1</sub></var> to <var>S<sup>R</sup><sub>m</sub></var>, into <a>array</a> <var>A</var>.</p>
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
          </ol>
        </section>
      </section>

      <section id="gen-subj-cells">
        <h2>Generating Objects</h2>
        <p>The steps in the algorithm defined here apply to both <a>standard</a> <em>and</em> <a>minimal</a> modes.</p>

        <p>This algorithm generates a sequence of <a>objects</a>, <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var>, each of which corresponds to a <a>subject</a> described by the current <a>row</a>. The algorithm inserts name-value pairs into <var>S<sub>i</sub></var> depending on the cell values as outlined in the following steps.</p>

        <ol class="algorithm">
          <li>
            <p>Determine the unique <a>subjects</a> for the current <a>row</a>. The <a>subject(s)</a> described by each <a>row</a> are determined according to the <a>about URL</a> annotation for each <a>cell</a> in the current <a>row</a>. A default <a>subject</a> for the <a>row</a> is used for any <a>cells</a> where <a>about URL</a> is undefined.</p>
          </li>
          <li>
            <p>For each <a>subject</a> that the current <a>row</a> describes where at least one of the <a>cells</a> that refers to that <a>subject</a> has a <a data-lt="cell value">value</a> or <a>value URL</a> that is not <code>null</code>, and is associated with a <a>column</a> where <a href="http://w3c.github.io/csvw/syntax/#dfn-column-suppress-output" class="externalDFN">suppress output</a> annotation is <code>false</code>:</p>
            <ol class="algorithm">
              <li>
                <p>Create an empty <a>object</a> <var>S<sub>i</sub></var> to represent the <a>subject</a> <var>i</var>.</p>
                <p>(<var>i</var> is the index number with values from <var>1</var> to <var>n</var>, where <var>n</var> is the number of <a>subjects</a> for the <a>row</a>)</p>
                <p><a>Subject</a> <var>i</var> is identified according to the <a>about URL</a> annotation of its associated <a>cells</a>: <var>I<sub>S</sub></var>. For a <em>default</em> <a>subject</a> where <a>about URL</a> is not specified by its <a>cells</a>, <var>I<sub>S</sub></var> is <code>null</code>.</p>
              </li>
              <li>
                <p>If the identifier for <a>subject</a> <var>i</var>, <var>I<sub>S</sub></var>, is not <code>null</code>, then insert the following name-value pair into <a>object</a> <var>S<sub>i</sub></var>:</p>
                <dl class="nvp">
                  <dt>name</dt>
                  <dd><code>@id</code></dd>
                  <dt>value</dt>
                  <dd><var>I<sub>S</sub></var></dd>
                </dl>
              </li>
              <li>
                <p>Each <a>cell</a> referring to <a>subject</a> <var>i</var> is then processed sequentially according to the order of the <a>columns</a>.</p>
                <p>For each <a>cell</a> referring to <a>subject</a> <var>i</var>, where the <a href="http://w3c.github.io/csvw/syntax/#dfn-column-suppress-output" class="externalDFN">suppress output</a> annotation for the <a>column</a> associated with that <a>cell</a> is <code>false</code>, insert a name-value pair into <a>object</a> <var>S<sub>i</sub></var> as described below:</p>
                <ol class="algorithm">
                  <li>
                    <p>If the value of <a>property URL</a> for the <a>cell</a> is not <code>null</code>, then <a>name</a> <var>N</var> takes the value of <a>property URL</a> compacted according to the rules as defined in <cite><a href="http://w3c.github.io/csvw/metadata/#url-compaction">URL Compaction</a></cite> in [[!tabular-metadata]].</p>
                    <p>Else, <a>name</a> <var>N</var> takes the URI decoded value of the <a href="http://w3c.github.io/csvw/syntax/#dfn-column-name" class="externalDFN">name</a> annotation for the <a>column</a> associated with the <a>cell</a>. (URI decoding is necessary as <a href="http://w3c.github.io/csvw/syntax/#dfn-column-name" class="externalDFN">name</a> may have been encoded if it was taken from a supplied title.)</p>
                  </li>
                  <li>
                    <p>If the <a>value URL</a> for the current <a>cell</a> is not <code>null</code>, then insert the following name-value pair into <a>object</a> <var>S<sub>i</sub></var>:</p>
                    <dl class="nvp">
                      <dt>name</dt>
                      <dd><var>N</var></dd>
                      <dt>value</dt>
                      <dd><var>V<sub>url</sub></var></dd>
                    </dl>
                    <p>where <var>V<sub>url</sub></var> is the value of <a>value URL</a> annotation for the current <a>cell</a> expressed as a string in the JSON output. If <var>N</var> is <code>@type</code>, compact <var>V<sub>url</sub></var> according to the rules as defined in <cite><a href="http://w3c.github.io/csvw/metadata/#url-compaction">URL Compaction</a></cite> in [[!tabular-metadata]].</p>
                  </li>
                  <li>
                    <p>Else, if the <a>cell value</a> is a <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-list" class="externalDFN">list</a> that is not empty, then the <a>cell value</a> provides a sequence of values for inclusion within the JSON output; insert an <a>array</a> <var>A<sub>v</sub></var> containing each value <var>V</var> of the sequence into <a>object</a> <var>S<sub>i</sub></var>:</p>
                    <dl class="nvp">
                      <dt>name</dt>
                      <dd><var>N</var></dd>
                      <dt>value</dt>
                      <dd><var>A<sub>v</sub></var></dd>
                    </dl>
                    <p>Each of the values <var>V</var> derived from the sequence MUST be expressed in the JSON output according to the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-datatype" class="externalDFN">datatype</a> of <var>V</var> as defined below in <a href="#datatypes" class="sectionRef"></a>.</p>
                    <p class="note">Since <a>arrays</a> are implicitly <em>ordered</em> in JSON, the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-ordered" class="externalDFN">ordered</a> annotation has no effect on the JSON output.</p>
                  </li>
                  <li>
                    <p>Else, if the <a>cell value</a> is not <code>null</code>, then the <a>cell value</a> provides a single value <var>V</var> for inclusion within the JSON output; insert the following name-value pair into <a>object</a> <var>S<sub>i</sub></var>:</p>
                    <dl class="nvp">
                      <dt>name</dt>
                      <dd><var>N</var></dd>
                      <dt>value</dt>
                      <dd><var>V</var></dd>
                    </dl>

                    <p>Value <var>V</var> derived from the <a>cell values</a> MUST be expressed in the JSON output according to the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-datatype" class="externalDFN">datatype</a> of the value as defined in <a href="#datatypes" class="sectionRef"></a>.</p> 
                  </li>
                </ol>
              </li>
              <li>
                <p>If <a>name</a> <var>N</var> occurs more than once within <a>object</a> <var>S<sub>i</sub></var>, the name-value pairs from each occurrence of <a>name</a> <var>N</var> MUST be compacted to form a single name-value pair with <a>name</a> <var>N</var> and whose value is an array containing all values from each of those name-value pairs. Where the value from one or more contributing name-value pairs is of type array, the values from contributing arrays are included directly to the resulting array (i.e. arrays of values are flattened).</p>
              </li>
            </ol>
          </li>
        </ol>
      </section>

      <section id="nesting-objects">
        <h2>Generating Nested Objects</h2>
        <p>The steps in the algorithm defined herein apply to both <a>standard</a> <em>and</em> <a>minimal</a> modes.</p>

        <p>Where the current <a>row</a> describes multiple <a>subjects</a>, it MAY be possible to organize the <a>objects</a> associated with those <a>subjects</a> such that some <a>objects</a> are <em>nested</em> within others; e.g. where the <a>value URL</a> annotation for one <a>cell</a> matches the <a>about URL</a> annotation for another <a>cell</a> in the same <a>row</a>. This algorithm considers a sequence of <a>objects</a> generated according to <a href="#gen-subj-cells"></a>, <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var>, each of which corresponds to a <a>subject</a> described by the current <a>row</a>. It generates a new sequence of <a>root</a> <a>objects</a>, <var>S<sup>R</sup><sub>1</sub></var> to <var>S<sup>R</sup><sub>m</sub></var>, that MAY include <em>nested</em> <a>objects</a>.</p>

        <p class="note">Where the current <a>row</a> describes only a single <a>subject</a>, this algorithm may be bypassed as no nesting is possible. In such a case, the <a>root</a> <a>object</a> <var>S<sup>R</sup><sub>1</sub></var> is identical to the original <a>object</a> <var>S<sub>1</sub></var>.</p>

        <p class="note">This nesting algorithm is based on the interrelationships between <a>subjects</a> described within a given <a>row</a> that are specified using the <a>value URL</a> annotation. <a>Cell values</a> expressing the identity of a <a>subject</a> in the current <a>row</a> (i.e., as a simple literal) will be ignored by this algorithm.</p>

        <p>The algorithm uses the following terms:</p>
        <dl>
          <dt><dfn>child</dfn></dt>
          <dd>If two <a>vertices</a> are connected in a <a>tree</a>, the one which is further away from the <a>root</a> of the <a>tree</a> is referred to as the <em>child</em> of the other.</dd>

          <dt><dfn>descendant</dfn></dt>
          <dd>A <a>vertex</a> <var>N</var> is a <em>descendant</em> of a <a>vertex</a> <var>M</var> if either <var>N</var> is the <a>child</a> <var>M</var>, or there are <a>vertices</a> <var>V<sub>1</sub>,â€¦,V<sub>k</sub></var>, such that <var>V<sub>1</sub>=M</var>, <var>V<sub>k</sub>=N</var>, and <var>V<sub>k+1</sub></var> is a <a>child</a> of <var>V<sub>k</sub></var>.</dd>

          <dt><dfn data-lt="edge|edges">edge</dfn></dt>
          <dd>One of the main constituents of <a>graphs</a>; <em>edges</em> are used to establish relationships among <a>vertices</a>. In the context of this algorithm, <em>edges</em> are expressed in JSON using a name-value pair whose value is another <a>object</a> or an <a>array</a> of <a>objects</a>.</dd>

          <dt><dfn>forest</dfn></dt>
          <dd>A collection of disjoint <a>trees</a>. For the purpose of this algorithm, the order of <a>trees</a> is important, i.e., forests can also be viewed as an ordered sequence of <a>roots</a>.</dd>

          <dt><dfn data-lt="graph|graphs">graph</dfn></dt>
          <dd>Data structure consisting of <a>vertices</a> (or "nodes") and <a>edges</a>. See, for example,&nbsp;[[Knuth]] for further details.</dd>

          <dt><dfn>node</dfn></dt>
          <dd>Synonym of <a>vertex</a>.</dd>

          <dt><dfn data-lt="root|roots">root</dfn></dt>
          <dd>A dedicated <a>vertex</a> in a <a>tree</a>; a <em>root</em> is not the <a>child</a> of any <a>vertex</a>.</dd>

          <dt><dfn data-lt="tree|trees">tree</dfn></dt>
          <dd>A <em>tree</em> (or <em>rooted tree</em>) is a connected, acyclic <a>graph</a> where one <a>vertex</a> has been designated as the <a>root</a>, in which case the <a>edges</a> have a natural orientation <em>towards</em> or <em>away</em> from the <a>root</a>.</dd>

          <dt><dfn data-lt="vertex|vertices">vertex</dfn></dt>
          <dd>One of the main constituents of <a>graphs</a>; a <em>vertex</em> usually holds further information or data. In the context of this algorithm, <em>vertices</em> are used to represent the JSON <a>objects</a>.</dd>
        </dl>

        <p>The nesting algorithm is defined as follows:</p>

        <ol class="algorithm">
          <li>
            <p>For all <a>cells</a> in the current <a>row</a>, determine the <a>value URLs</a>, <var>V<sub>url</sub></var>, that occur <em>only once</em>. The list of these uniquely occurring <a>value URLs</a> is referred to as the <em>URL-list</em>.</p>
          </li>
          <li>
            <p>Create an empty <a>forest</a> <var>F</var>. <a>Vertices</a> in the <a>trees</a> of this <a>forest</a> represent the <a>subjects</a> described by the current <a>row</a>.</p>
          </li>
          <li>
            <p>For each <a>object</a> <var>S<sub>i</sub></var> in the sequence <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var>:</p>
            <ol class="algorithm">
              <li>
                <p>Determine the identity of <a>object</a> <var>S<sub>i</sub></var>: <var>I<sub>S</sub></var>. If present in <a>object</a> <var>S<sub>i</sub></var>, the name-value pair with <a>name</a> <code>@id</code> provides the value of <var>I<sub>S</sub></var>. Else, <a>object</a> <var>S<sub>i</sub></var> is not explicitly identified and <var>I<sub>S</sub></var> is <code>null</code>.</p>
              </li>
              <li>
                <p>Check whether there is a <a>vertex</a> <var>N</var> in <a>forest</a> <var>F</var> that represents <a>object</a> <var>S<sub>i</sub></var>. If none of the existing <a>vertices</a> in <a>forest</a> <var>F</var> represent <a>object</a> <var>S<sub>i</sub></var>, then insert a new <a>tree</a> into <a>forest</a> <var>F</var> whose <a>root</a> is a <a>vertex</a> <var>N</var> that represents <a>object</a> <var>S<sub>i</sub></var> and has identity <var>I<sub>S</sub></var>.</p>
              </li>
              <li>
                <p>For all <a>cells</a> associated with the current <a>object</a> <var>S<sub>i</sub></var> (e.g. whose <a>about URL</a> annotation matches <var>I<sub>S</sub></var>):</p>
                <ol class="algorithm">
                  <li>
                    <p>If the <a>value URL</a> annotation of the current <a>cell</a> is defined and its value, <var>V<sub>url</sub></var>, appears in the <em>URL-list</em>, then check each of the <em>other</em> <a>objects</a> in the sequence <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var> to determine if <var>V<sub>url</sub></var> identifies one of those <a>objects</a>.</p>
                    <p>For <a>object</a> <var>S<sub>j</sub></var>, if the name-value pair with <a>name</a> <code>@id</code> is present and its value matches <var>V<sub>url</sub></var>, then:</p>
                    <ol class="algorithm">
                      <li>
                        <p>If the <a>root</a> of the <a>tree</a> containing <a>vertex</a> <var>N</var> is a <a>vertex</a> that represents <a>object</a> <var>S<sub>j</sub></var>, then <a>object</a> <var>S<sub>i</sub></var> is already a <a>descendant</a> of <a>object</a> <var>S<sub>j</sub></var>; no further action SHOULD be taken for this instance of <var>V<sub>url</sub></var>.</p>
                        <div class="note">
                          <p>This clause in the algorithm prevents circular loops from being created.</p>
                          <p>Furthermore, because the <em>URL-list</em> contains <a>value URLs</a> that occur only once for the current <a>row</a>, <a>object</a> <var>S<sub>i</sub></var> cannot be a <a>descendant</a> of intermediate <a>vertices</a> in the <a>tree</a>.</p>
                        </div>
                      </li>
                      <li>
                        <p>Else, if there is a <a>root</a> <a>vertex</a> <var>M</var> in <a>forest</a> <var>F</var> that represents <a>object</a> <var>S<sub>j</sub></var>, then set <a>vertex</a> <var>M</var> as a <a>child</a> of <a>vertex</a> <var>N</var> and remove <a>vertex</a> <var>M</var> from the list of <a>roots</a> in <a>forest</a> <var>F</var> (i.e., the <a>tree</a> rooted by <var>M</var> becomes a sub-tree of <var>N</var>).</p>
                      </li>
                      <li>
                        <p>Else, create a new <a>vertex</a> <var>M</var> that represents <a>object</a> <var>S<sub>j</sub></var> as a <a>child</a> of <a>vertex</a> <var>N</var>.</p>
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>
            <p>Each <a>vertex</a> in <a>forest</a> <var>F</var> represents an object in the original sequence of <a>objects</a> <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var> and is associated with a <a>subject</a> described by the current <a>row</a>. Rearrange <a>objects</a> <var>S<sub>1</sub></var> to <var>S<sub>n</sub></var> such that they mirror the structure of the <a>trees</a> in <a>forest</a> <var>F</var> as follows: If <a>vertex</a> <var>M</var>, representing <a>object</a> <var>S<sub>i</sub></var>, is a <a>child</a> of <a>vertex</a> <var>N</var>, representing <a>object</a> <var>S<sub>j</sub></var>, then the name-value pair in <a>object</a> <var>S<sub>j</sub></var> associated with the <a>edge</a> relating <var>M</var> and <var>N</var> MUST be modified such that the (literal) value, <var>V<sub>url</sub></var>, from that name-value pair is replaced by <a>object</a> <var>S<sub>i</sub></var> thus creating a <em>nested</em> <a>object</a>.</p>
            <p class="note"><a>Objects</a> represented by <a>root</a> <a>vertices</a> are referred to as <em><a>root</a> <a>objects</a></em>.</p>
          </li>
          <li>
            <p>Return the sequence of <a>root</a> <a>objects</a>, <var>S<sup>R</sup><sub>1</sub></var> to <var>S<sup>R</sup><sub>m</sub></var>.</p>
          </li>
        </ol>

        <p class="note">An implementation may be able to optimize the algorithm by skipping branches (e.g. if <var>URL-list</var> is empty) or by other means.</p>

      </section>


      <section id="datatypes">
        <h3>Interpreting datatypes</h3>
        <p><a>Cell values</a> are expressed in the JSON output according to the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-datatype" class="externalDFN">cell value's datatype</a>. The relationship between the <a href="http://w3c.github.io/csvw/syntax/#dfn-datatype-base" class="externalDFN">base</a> annotation value of the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-datatype" class="externalDFN">cell value's datatype</a> and the primitive types supported by JSON (as specified in [[!RFC7159]]) is provided below:</p>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th><code>datatype</code></th><th>JSON primitive type</th></tr>
          </thead>
          <tbody>
            <tr><td><code>anyAtomicType</code></td><td>string</td></tr>
            <tr><td><code>anyURI</code></td><td>string</td></tr>
            <tr><td><code>base64Binary</code></td><td>string</td></tr>
            <tr><td><code>boolean</code></td><td>boolean</td></tr>
            <tr><td><code>date</code></td><td>string</td></tr>
            <tr><td><code>dateTime</code></td><td>string</td></tr>
            <tr><td><code>dateTimeStamp</code></td><td>string</td></tr>
            <tr><td><code>decimal</code></td><td>number</td></tr>
            <tr><td><code>integer</code></td><td>number</td></tr>
            <tr><td><code>long</code></td><td>number</td></tr>
            <tr><td><code>int</code></td><td>number</td></tr>
            <tr><td><code>short</code></td><td>number</td></tr>
            <tr><td><code>byte</code></td><td>number</td></tr>
            <tr><td><code>nonNegativeInteger</code></td><td>number</td></tr>
            <tr><td><code>positiveInteger</code></td><td>number</td></tr>
            <tr><td><code>unsignedLong</code></td><td>number</td></tr>
            <tr><td><code>unsignedInt</code></td><td>number</td></tr>
            <tr><td><code>unsignedShort</code></td><td>number</td></tr>
            <tr><td><code>unsignedByte</code></td><td>number</td></tr>
            <tr><td><code>nonPositiveInteger</code></td><td>number</td></tr>
            <tr><td><code>negativeInteger</code></td><td>number</td></tr>
            <tr><td><code>double</code></td><td>number</td></tr>
            <tr><td><code>duration</code></td><td>string</td></tr>
            <tr><td><code>dayTimeDuration</code></td><td>string</td></tr>
            <tr><td><code>yearMonthDuration</code></td><td>string</td></tr>
            <tr><td><code>float</code></td><td>number</td></tr>
            <tr><td><code>gDay</code></td><td>string</td></tr>
            <tr><td><code>gMonth</code></td><td>string</td></tr>
            <tr><td><code>gMonthDay</code></td><td>string</td></tr>
            <tr><td><code>gYear</code></td><td>string</td></tr>
            <tr><td><code>gYearMonth</code></td><td>string</td></tr>
            <tr><td><code>hexBinary</code></td><td>string</td></tr>
            <tr><td><code>QName</code></td><td>string</td></tr>
            <tr><td><code>string</code></td><td>string</td></tr>
            <tr><td><code>normalizedString</code></td><td>string</td></tr>
            <tr><td><code>token</code></td><td>string</td></tr>
            <tr><td><code>language</code></td><td>string</td></tr>
            <tr><td><code>Name</code></td><td>string</td></tr>
            <tr><td><code>NMTOKEN</code></td><td>string</td></tr>
            <tr><td><code>xml</code></td><td>string</td></tr>
            <tr><td><code>html</code></td><td>string</td></tr>
            <tr><td><code>json</code></td><td>string</td></tr>
            <tr><td><code>time</code></td><td>string</td></tr>
          </tbody>
        </table>

         <div class="note">
          <p>Instances of JSON reserved characters within string values MUST be escaped as defined in [[!RFC7159]].</p>
          <p>JSON has no native support for expressing language information; therefore the <a href="http://w3c.github.io/csvw/syntax/#dfn-column-lang" class="externalDFN">language</a> of a value has no effect on the JSON output.</p>
        </div>

        <div class="note">
          <p>Only the <a href="http://w3c.github.io/csvw/syntax/#dfn-datatype-base" class="externalDFN">base</a> annotation value is used to determine the primitive type used within the JSON output. Additional restrictions to the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-datatype" class="externalDFN">cell value's datatype</a>, such as the <a href="http://w3c.github.io/csvw/syntax/#dfn-datatype-id" class="externalDFN">id</a> annotation, are ignored for the purposes of conversion to JSON.</p>
        </div>
        
        <div class="note">
          <p>A <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-datatype" class="externalDFN">datatype's</a> <a href="http://w3c.github.io/csvw/syntax/#dfn-datatype-format" class="externalDFN">format</a> is irrelevant to the conversion procedure defined in this specification; the <a>cell value</a> has already been parsed from the contents of the <a>cell</a> according to the <a href="http://w3c.github.io/csvw/syntax/#dfn-datatype-format" class="externalDFN">format</a> annotation.</p>

          <p><a>Cell errors</a> MUST be recorded by applications where the contents of a <a>cell</a> cannot be parsed or validated (see <cite><a href="http://w3c.github.io/csvw/syntax/#parsing-cells">Parsing Cells</a></cite> and <cite><a href="http://w3c.github.io/csvw/syntax/#validating-tables">Validating Tables</a></cite> in [[!tabular-data-model]] respectively). In cases where <a>cell errors</a> are recorded, applications may attempt to determine the appropriate JSON primitive type during the subsequent conversion process according to local rules.</p>
        </div>

      </section>

    </section>

    <section>
      <h3>JSON-LD to JSON</h3>
      <p>This section defines a mechanism for transforming the [[json-ld]] <a href="http://w3c.github.io/csvw/metadata/#json-ld-dialect">dialect</a> used for <a>non-core annotations</a> and <a>notes</a> originating from the processing of metadata (as defined in [[!tabular-metadata]]) into JSON.</p>

      <p class="note">Conversion applications may have other means to create <a>annotated tables</a>, e.g. through some application specific APIs. In such cases the exact format for non-core annotations or notes may be different. Specifications for such annotation processes should specify how these annotations are converted into JSON.</p>

      <p>Name-value pairs from <a>notes</a> and <a>non-core annotations</a> annotations are generally copied verbatim from the metadata description subject to the exceptions below:</p>
      <ol>
        <li>
          <p>Name-value pairs whose value is an <a>object</a> using the [[json-ld]] keyword <code>@value</code>, for example:</p>
          <dl class="nvp">
            <dt>name</dt>
            <dd><var>N</var></dd>
            <dt>value</dt>
            <dd><code>{ "@value": "</code><var>V</var><code>" }</code></dd>
          </dl>
          <p>are transformed to:</p>
          <dl class="nvp">
            <dt>name</dt>
            <dd><var>N</var></dd>
            <dt>value</dt>
            <dd><var>V</var></dd>
          </dl>
          <p>Name-value pairs occurring within the value object that use [[json-ld]] keywords <code>@language</code> and <code>@type</code> are ignored.</p>
        </li>
        <li>
          <p>Name-value pairs whose value is an <a>object</a> using the [[json-ld]] keyword <code>@id</code> to coerce a string-value to be interpreted as an IRI, for example:</p>
          <dl class="nvp">
            <dt>name</dt>
            <dd><var>N</var></dd>
            <dt>value</dt>
            <dd><code>{ "@id": "</code><var>V<sub>url</sub></var><code>" }</code></dd>
          </dl>
          <p>are transformed to:</p>
          <dl class="nvp">
            <dt>name</dt>
            <dd><var>N</var></dd>
            <dt>value</dt>
            <dd><var>V<sub>url</sub></var></dd>
          </dl>
        </li>
      </ol>

      <p>In addition to compacting values of <a>property URLs</a>, URLs which were the value of <a>objects</a> using the [[json-ld]] keyword <code>@type</code> are compacted according to the rules as defined in <cite><a href="http://w3c.github.io/csvw/metadata/#url-compaction">URL Compaction</a></cite> in [[!tabular-metadata]].</p>
    </section>

    <section id="examples" class="informative">
      <h2>Examples</h2>

      <p class="note">Each of the examples expresses more complex conversions - it is recommended that readers of this specification work through the examples in sequential order.</p>

      <section id="example-countries">
        <h3>Simple example</h3>
        <p>
          This example comprises a single <a>annotated table</a> containing information attributes about countries; country code, position (latitude, longitude) and name. Whilst the input tabular data file, published at <code>http://example.org/countries.csv</code>, includes a <a href="http://w3c.github.io/csvw/syntax/#dfn-header-line" class="externalDFN">header line</a>, no further metadata annotations are given. The tabular data file is provided below:
        </p>
        <pre class="example"
             id="example-countries-csv+"
             title="http://example.org/countries.csv"
             data-include="../examples/countries.csv"
             data-oninclude="updateExample">
        </pre>

        <p>The <a>annotated table</a> generated from parsing the tabular data file is shown below and provides the basis for the conversion to JSON.</p>

        <button class="toggle" data-toggle-target="ex-countries-annotation">empty</button>
        <div id="ex-countries-annotation" class="to-toggle">

          <p>Annotations for the resulting <a>table</a> <var>T</var>, with 4 columns and 3 rows, are shown below:</p>

          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="3">core annotations</th></tr>
              <tr><th>url</th><th>columns</th><th>rows</th></tr>
            </thead>
            <tbody>
              <tr><td><var>T</var></td><td><code>http://example.org/countries.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var></td><td><var>R1</var>, <var>R2</var>, <var>R3</var></td></tr>
            </tbody>
          </table>

          <p>Annotations for the <a>columns</a>, <a>rows</a> and <a>cells</a> in <a>table</a> <var>T</var> are shown in the tables below:</p>

          <p><a>Column</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="6">core annotations</th></tr>
              <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th>name</th><th>titles</th></tr>
            </thead>
            <tbody>
              <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var>, <var>C3.1</var></td><td><code>countryCode</code></td><td><code>countryCode</code></td></tr>
              <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var>, <var>C3.2</var></td><td><code>latitude</code></td><td><code>latitude</code></td></tr>
              <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var>, <var>C3.3</var></td><td><code>longitude</code></td><td><code>longitude</code></td></tr>
              <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var>, <var>C3.4</var></td><td><code>name</code></td><td><code>name</code></td></tr>
            </tbody>
          </table>

          <p><a>Row</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
              <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
            </thead>
            <tbody>
              <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var></td></tr>
              <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var></td></tr>
              <tr><td><var>R3</var></td><td><var>T</var></td><td>3</td><td>4</td><td><var>C3.1</var>, <var>C3.2</var>, <var>C3.3</var>, <var>C3.4</var></td></tr>
            </tbody>
          </table>

          <p><a>Cell</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="6">core annotations</th></tr>
              <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>property URL</th></tr>
            </thead>
            <tbody>
              <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"AD"</code></td><td><code>"AD"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"42.5"</code></td><td><code>"42.5"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"1.6"</code></td><td><code>"1.6"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"Andorra"</code></td><td><code>"Andorra"</code></td><td><code>null</code></td></tr>

              <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"AE"</code></td><td><code>"AE"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"23.4"</code></td><td><code>"23.4"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"53.8"</code></td><td><code>"53.8"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"United Arab Emirates"</code></td><td><code>"United Arab Emirates"</code></td><td><code>null</code></td></tr>

              <tr><td><var>C3.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R3</var></td><td><code>"AF"</code></td><td><code>"AF"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C3.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R3</var></td><td><code>"33.9"</code></td><td><code>"33.9"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C3.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R3</var></td><td><code>"67.7"</code></td><td><code>"67.7"</code></td><td><code>null</code></td></tr>
              <tr><td><var>C3.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R3</var></td><td><code>"Afghanistan"</code></td><td><code>"Afghanistan"</code></td><td><code>null</code></td></tr>
            </tbody>
          </table>
      </div>

        <p><strong><a>Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-countries-minimal-json"
             title="http://example.org/countries-minimal.json"
             data-include="../examples/countries-minimal.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>The <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a> annotation has not been set for cells in table <var>T</var> (<code>{ "url": "http://example.org/countries.csv"}</code>); <a>cells</a> in a given <a>row</a> where <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a> has not been specified are assumed to refer to the same <a>subject</a> and so the name-value pairs associated with the <a>cell values</a> of that <a>row</a> occur within the same <a>object</a>.</p>
          <p>Given that the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> is <code>null</code> for cells in table <var>T</var> (<code>{ "url": "http://example.org/countries.csv"}</code>), the simplified <a>name</a> is used in the name-value pairs; e.g. <code>countryCode</code> rather than <code>http://example.org/countries.csv#countryCode</code></p>
        </div>

        <p><strong><a>Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-countries-standard-json"
             title="http://example.org/countries-standard.json"
             data-include="../examples/countries-standard.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>Even though the <a>table</a> was defined in isolation, the <a>annotated table</a> is wrapped in a <a>group of tables</a>.</p>
          <p>The name-value pair with <a>name</a> <code>url</code> provides reference to the original tabular data file and to specific <a>rows</a> therein.</p>
          <p>The <a>row number</a> is provided for each <a>row</a> using name-value pair with <a>name</a> <code>rownum</code>.</p>
          <p>The <a>object</a> containing the name-values pairs associated with the <a>cell values</a> of a <a>row</a> are related to the <a>object</a> for that <a>row</a> using the name-value pair with <a>name</a> <code>describes</code>.</p>
        </div>

      </section>
      <section id="example-tree-ops-ext">
        <h3>Example with single table and rich annotations</h3>
        <p>
          This example is based on <a href="http://w3c.github.io/csvw/use-cases-and-requirements/#UC-PaloAltoTreeData">Use Case #11 - City of Palo Alto Tree Data</a> and comprises a single <a>annotated table</a> describing an inventory of tree maintenance operations. The input tabular data file, published at <code>http://example.org/tree-ops-ext.csv</code>, and the associated metadata description <code>http://example.org/tree-ops-ext.csv-metadata.json</code> are provided below:
        </p>
        <pre class="example"
             id="example-tree-ops-ext-csv+"
             title="http://example.org/tree-ops-ext.csv"
             data-include="../examples/tree-ops-ext.csv"
             data-oninclude="updateExample">
        </pre>
        <pre class="example highlight"
             id="example-tree-ops-ext-metadata"
             title="http://example.org/tree-ops-ext.csv-metadata.json"
             data-include="../examples/tree-ops-ext.csv-metadata.json"
             data-oninclude="updateExample">
        </pre>

        <p class="note">The <a>notes</a> annotation in the metadata description uses the <a href="http://www.openannotation.org/spec/core/">Open Annotation data model</a> currently under development within the <a href="http://www.w3.org/annotation/">Web Annotations Working Group</a>. This is purely illustrative; no constraints are placed on the value of the <a>notes</a> annotation.</p>

        <p>The <a>annotated table</a> generated from parsing the tabular data file and associated metadata is shown below and provides the basis for the conversion to JSON.</p>

        <button class="toggle" data-toggle-target="ex-trees-annotation">empty</button>
        <div id="ex-trees-annotation" class="to-toggle">
          <p>Core annotations for the resulting <a>table</a> <var>T</var>, with 9 <a>columns</a> and 3 <a>rows</a>, are shown below:</p>

          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="5">core annotations</th></tr>
              <tr><th>id</th><th>url</th><th>columns</th><th>rows</th><th>notes</th></tr>
            </thead>
            <tbody>
              <tr><td><var>T</var></td><td>&lt;http://example.org/tree-ops-ext&gt;</td><td><code>http://example.org/tree-ops-ext.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var>, <var>C5</var>, <var>C6</var>, <var>C7</var>, <var>C8</var>, <var>C9</var></td><td><var>R1</var>, <var>R2</var>, <var>R3</var></td><td><code>[{ "@type": "oa:Annotation", ... }]</code></td></tr>
            </tbody>
          </table>

          <p>Non-core annotations for the <a>table</a> <var>T</var> are:</p>

          <dl>
            <dt><code>dc:title</code></dt>
            <dd><code>"Tree Operations"</code></dd>
            <dt><code>dcat:keyword</code></dt>
            <dd><code>["tree", "street", "maintenance"]</code></dd>
            <dt><code>dc:publisher</code></dt>
            <dd><code>[{ "schema:name": "Example Municipality", "schema:url": { "@id": "http://example.org" } }]</code></dd>
            <dt><code>dc:license</code></dt>
            <dd><code>{ "@id": "http://opendefinition.org/licenses/cc-by/" }</code></dd>
            <dt><code>dc:modified</code></dt>
            <dd><code>"2010-12-31"</code></dd>
          </dl>

          <div class="note">
            <p>The value of the <a>notes</a> annotation has been shortened for clarity in the table above.
          </div>

          <p>Annotations for the <a>columns</a>, <a>rows</a> and <a>cells</a> in <a>table</a> <var>T</var> are shown in the tables below:</p>

        <p><a>Column</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="8">core annotations</th><th colspan="1">annotations</th></tr>
              <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th>name</th><th>titles</th><th>required</th><th>suppress output</th><th><code>dc:description</code></th></tr>
            </thead>
            <tbody>
              <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var>, <var>C3.1</var></td><td><code>GID</code></td><td><code>GID</code>, <code>Generic Identifier</code></td><td><code>true</code></td><td><code>true</code></td><td><code>An identifier for the operation on a tree.</code></td></tr>
              <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var>, <var>C3.2</var></td><td><code>on_street</code></td><td><code>On Street</code></td><td></td><td></td><td><code>The street that the tree is on.</code></td></tr>
              <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var>, <var>C3.3</var></td><td><code>species</code></td><td><code>Species</code></td><td></td><td></td><td><code>The species of the tree.</code></td></tr>
              <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var>, <var>C3.4</var></td><td><code>trim_cycle</code></td><td><code>Trim Cycle</code></td><td></td><td></td><td><code>The operation performed on the tree.</code></td></tr>
              <tr><td><var>C5</var></td><td><var>T</var></td><td>5</td><td>5</td><td><var>C1.5</var>, <var>C2.5</var>, <var>C3.5</var></td><td><code>dbh</code></td><td><code>Diameter at Breast Ht</code></td><td></td><td></td><td><code>Diameter at Breast Height (DBH) of the tree (in feet), measured 4.5ft above ground.</code></td></tr>
              <tr><td><var>C6</var></td><td><var>T</var></td><td>6</td><td>6</td><td><var>C1.6</var>, <var>C2.6</var>, <var>C3.6</var></td><td><code>inventory_date</code></td><td><code>Inventory Date</code></td><td></td><td></td><td><code>The date of the operation that was performed.</code></td></tr>
              <tr><td><var>C7</var></td><td><var>T</var></td><td>7</td><td>7</td><td><var>C1.7</var>, <var>C2.7</var>, <var>C3.7</var></td><td><code>comments</code></td><td><code>Comments</code></td><td></td><td></td><td><code>Supplementary comments relating to the operation or tree.</code></td></tr>
              <tr><td><var>C8</var></td><td><var>T</var></td><td>8</td><td>8</td><td><var>C1.8</var>, <var>C2.8</var>, <var>C3.8</var></td><td><code>protected</code></td><td><code>Protected</code></td><td></td><td></td><td><code>Indication (YES / NO) whether the tree is subject to a protection order.</code></td></tr>
              <tr><td><var>C9</var></td><td><var>T</var></td><td>9</td><td>9</td><td><var>C1.9</var>, <var>C2.9</var>, <var>C3.9</var></td><td><code>kml</code></td><td><code>KML</code></td><td></td><td></td><td><code>KML-encoded description of tree location.</code></td></tr>
            </tbody>
          </table>

          <p class="note">In this example, output for <a>column</a> <var>C1</var> (<code>GID</code>) is not required; note the <a href="http://w3c.github.io/csvw/syntax/#dfn-column-suppress-output" class="externalDFN">suppress output</a> annotation on this <a>column</a>.</p>

          <p><a>Row</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="5">core annotations</th></tr>
              <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th>primary key</th></tr>
            </thead>
            <tbody>
              <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var>, <var>C1.5</var>, <var>C1.6</var>, <var>C1.7</var>, <var>C1.8</var>, <var>C1.9</var></td><td><var>C1.1</var></td></tr>
              <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var>, <var>C2.5</var>, <var>C2.6</var>, <var>C2.7</var>, <var>C2.8</var>, <var>C2.9</var></td><td><var>C2.1</var></td></tr>
              <tr><td><var>R3</var></td><td><var>T</var></td><td>3</td><td>4</td><td><var>C3.1</var>, <var>C3.2</var>, <var>C3.3</var>, <var>C3.4</var>, <var>C3.5</var>, <var>C3.6</var>, <var>C3.7</var>, <var>C3.8</var>, <var>C3.9</var></td><td><var>C3.1</var></td></tr>
            </tbody>
          </table>

          <p><a>Cell</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="6">core annotations</th></tr>
              <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>about URL</th></tr>
            </thead>
            <tbody>
              <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"1"</code></td><td><code>"1"</code></td><td><code>http://example.org/tree-ops-ext#gid-1</code></td></tr>
              <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"ADDISON AV"</code></td><td><code>"ADDISON AV"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
              <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"Celtis australis"</code></td><td><code>"Celtis australis"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
              <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code> (English)</td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
              <tr><td><var>C1.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R1</var></td><td><code>"11"</code></td><td><code>11</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
              <tr><td><var>C1.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R1</var></td><td><code>"10/18/2010"</code></td><td><code>2010-10-18</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
              <tr><td><var>C1.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
              <tr><td><var>C1.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>false</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
              <tr><td><var>C1.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R1</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"</code> (XML)</td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>

              <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"2"</code></td><td><code>"2"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
              <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"EMERSON ST"</code></td><td><code>"EMERSON ST"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
              <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"Liquidambar styraciflua"</code></td><td><code>"Liquidambar styraciflua"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
              <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code> (English)</td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
              <tr><td><var>C2.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R2</var></td><td><code>"11"</code></td><td><code>11</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
              <tr><td><var>C2.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R2</var></td><td><code>"6/2/2010"</code></td><td><code>2010-06-02</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
              <tr><td><var>C2.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
              <tr><td><var>C2.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>false</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
              <tr><td><var>C2.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R2</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"</code> (XML)</td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>

              <tr><td><var>C3.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R3</var></td><td><code>"6"</code></td><td><code>"6"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
              <tr><td><var>C3.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R3</var></td><td><code>"ADDISON AV"</code></td><td><code>"ADDISON AV"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
              <tr><td><var>C3.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R3</var></td><td><code>"Robinia pseudoacacia"</code></td><td><code>"Robinia pseudoacacia"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
              <tr><td><var>C3.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R3</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code> (English)</td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
              <tr><td><var>C3.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R3</var></td><td><code>"29"</code></td><td><code>29</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
              <tr><td><var>C3.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R3</var></td><td><code>"6/1/2010"</code></td><td><code>2010-06-01</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
              <tr><td><var>C3.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R3</var></td><td><code>"cavity or decay; trunk decay; codominant leaders; included bark; large leader or limb decay; previous failure root damage; root decay;  beware of BEES"</code></td><td><code>"cavity or decay"</code>, <code>"trunk decay"</code>, <code>"codominant leaders"</code>, <code>"included bark"</code>, <code>"large leader or limb decay"</code>, <code>"previous failure root damage"</code>, <code>"root decay"</code>, <code>"beware of BEES"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
              <tr><td><var>C3.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R3</var></td><td><code>"YES"</code></td><td><code>true</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
              <tr><td><var>C3.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R3</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"</code> (XML)</td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            </tbody>
          </table>

          <p class="note">The lists of values from <a>cells</a> in <a>column</a> <var>C7</var> (<code>"name": "comments"</code>) are assumed to be <em>unordered</em> as the boolean <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-ordered" class="externalDFN">ordered</a> annotation, which defaults to <code>false</code>, has not be set within the metadata description.</p>

        </div>

        <p><strong><a>Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-tree-ops-ext-minimal-json"
             title="http://example.org/tree-ops-ext-minimal.json"
             data-include="../examples/tree-ops-ext-minimal.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>The <a>subject</a> described by each <a>row</a> is explicitly defined using the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a> annotation; e.g. the <a>subject</a> of <a>row</a> <var>R1</var> is <code>http://example.org/tree-ops-ext#gid-1</code>.</p>
          <p>Output for <a>column</a> <var>C1</var> (<code>{ "name": "GID" }</code>) is not included as <a>column</a> <a href="http://w3c.github.io/csvw/syntax/#dfn-column-suppress-output" class="externalDFN">suppress output</a> annotation is <code>true</code>.</p>
          <p><a>Cells</a> <var>C1.7</var> and <var>C2.7</var> (<a>rows</a> <var>R1</var> and <var>R2</var>; <a>column</a>, <code>{ "name": "comments" }</code>) have <code>null</code> <a data-lt="cell value">values</a> - no output is included for these <a>cells</a>.</p>
          <p><a>Cell</a> <var>C3.7</var> (<a>row</a> <var>R3</var>; <a>column</a>, <code>{ "name": "comments" }</code>) contains a sequence of values; the set of values are included in an <a>array</a>.</p>
        </div>

        <p><strong><a>Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-tree-ops-ext-standard-json"
             title="http://example.org/tree-ops-ext-standard.json"
             data-include="../examples/tree-ops-ext-standard.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p><a>Table</a> <var>T</var> (<code>{ "url": "http://example.org/tree-ops-ext.csv"}</code>) has been explicitly identified: <code>{ "@id": "&lt;http://exmple.org/tree-ops-ext&gt;"}</code>.</p>
          <p><a>Non-core annotations</a> and <a>notes</a> specified for <a>table</a> <var>T</var> (<code>{ "url": "http://example.org/tree-ops-ext.csv"}</code>) are included in the output.</p>
        </div>

      </section>

      <section id="example-events-listing">
        <h3>Example with single table and using <em>virtual columns</em> to produce multiple subjects per row</h3>
        <p>
          This example uses a single <a>annotated table</a> describing a listing of music events. Each <a>row</a> from the tabular data file corresponds to three resources; the music event itself, the location where that event occurs and the offer to sell tickets for that event. The goal is to convert the CSV content into <a href="http://schema.org">schema.org</a> markup that a search engine such as <a href="http://www.google.com">Google</a> can use to index music events. Details of how Google expects this information to be structured can be found <a href="https://developers.google.com/structured-data/events/performers?hl=en&amp;rd=1">here</a>.
        </p>
        <p> 
          The input tabular data file, published at <code>http://example.org/events-listing.csv</code>, and the associated metadata description <code>http://example.org/events-listing.csv-metadata.json</code> are provided below:
        </p>
        <pre class="example"
             id="example-events-listing-csv+"
             title="http://example.org/events-listing.csv"
             data-include="../examples/events-listing.csv"
             data-oninclude="updateExample">
        </pre>
        <pre class="example highlight"
             id="example-events-listing-metadata"
             title="http://example.org/events-listing.csv-metadata.json"
             data-include="../examples/events-listing.csv-metadata.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>
            The CSV to JSON translation is limited to providing one statement, or triple, per <a>column</a> in the <a>table</a>. The target <a href="http://schema.org">schema.org</a> markup requires 10 statements to describe each event. As the base tabular data file contains 5 columns, an additional 5 <em>virtual <a>columns</a></em> have been added in order to provide for the full complement of statementsâ€”including the relationships between the 3 resources (event, location, and offer) described by each <a>row</a> of the <a>table</a>. Note that the <a href="http://w3c.github.io/csvw/syntax/#dfn-column-virtual" class="externalDFN">virtual</a> annotation is <code>true</code> for these <em>virtual <a>columns</a></em>.
          </p>
          <p>
            Furthermore, note that no attempt is made to reconcile between locations or offers that may be associated with more than one event; every <a>row</a> in the <a>table</a> will create both a new location resource and offer resource in addition to the event resource. If considered necessary, applications such as <a href="http://openrefine.org">OpenRefine</a> may be used to identify and reconcile duplicate location resources once the JSON output has been generated.
          </p>
        </div>

        <p>The <a>annotated table</a> generated from parsing the tabular data file and associated metadata is shown below and provides the basis for the conversion to JSON.</p>

        <button class="toggle" data-toggle-target="ex-events-annotation">empty</button>
        <div id="ex-events-annotation" class="to-toggle">

          <p>Annotations for the resulting <a>table</a> <var>T</var>, with 10 <a>columns</a> and 2 <a>rows</a>, are shown below:</p>

          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="3">core annotations</th></tr>
              <tr><th>url</th><th>columns</th><th>rows</th></tr>
            </thead>
            <tbody>
              <tr><td><var>T</var></td><td><code>http://example.org/events-listing.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var>, <var>C5</var>, <var>C6</var>, <var>C7</var>, <var>C8</var>, <var>C9</var>, <var>C10</var></td><td><var>R1</var>, <var>R2</var></td></tr>
            </tbody>
          </table>

          <p>Annotations for the <a>columns</a>, <a>rows</a> and <a>cells</a> in <a>table</a> <var>T</var> are shown in the tables below:</p>

          <p><a>Column</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="7">core annotations</th></tr>
              <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th>name</th><th>titles</th><th>virtual</th></tr>
            </thead>
            <tbody>
              <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var></td><td><code>name</code></td><td><code>Name</code></td><td></td></tr>
              <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var></td><td><code>start_date</code></td><td><code>Start Date</code></td><td></td></tr>
              <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var></td><td><code>location_name</code></td><td><code>Location Name</code></td><td></td></tr>
              <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var></td><td><code>location_address</code></td><td><code>Location Address</code></td><td></td></tr>
              <tr><td><var>C5</var></td><td><var>T</var></td><td>5</td><td>5</td><td><var>C1.5</var>, <var>C2.5</var></td><td><code>ticket_url</code></td><td><code>Ticket Url</code></td><td></td></tr>
              <tr><td><var>C6</var></td><td><var>T</var></td><td>6</td><td>6</td><td><var>C1.6</var>, <var>C2.6</var></td><td><code>type_event</code></td><td></td><td><code>true</code></td></tr>
              <tr><td><var>C7</var></td><td><var>T</var></td><td>7</td><td>7</td><td><var>C1.7</var>, <var>C2.7</var></td><td><code>type_place</code></td><td></td><td><code>true</code></td></tr>
              <tr><td><var>C8</var></td><td><var>T</var></td><td>8</td><td>8</td><td><var>C1.8</var>, <var>C2.8</var></td><td><code>type_offer</code></td><td></td><td><code>true</code></td></tr>
              <tr><td><var>C9</var></td><td><var>T</var></td><td>9</td><td>9</td><td><var>C1.9</var>, <var>C2.9</var></td><td><code>location</code></td><td></td><td><code>true</code></td></tr>
              <tr><td><var>C10</var></td><td><var>T</var></td><td>10</td><td>10</td><td><var>C1.10</var>, <var>C2.10</var></td><td><code>offers</code></td><td></td><td><code>true</code></td></tr>
            </tbody>
          </table>

          <p><a>Row</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
              <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
            </thead>
            <tbody>
              <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var>, <var>C1.5</var>, <var>C1.6</var>, <var>C1.7</var>, <var>C1.8</var>, <var>C1.9</var>, <var>C1.10</var></td></tr>
              <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var>, <var>C2.5</var>, <var>C2.6</var>, <var>C2.7</var>, <var>C2.8</var>, <var>C2.9</var>, <var>C2.10</var></td></tr>
            </tbody>
          </table>

          <p><a>Cell</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="8">core annotations</th></tr>
              <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>about URL</th><th>property URL</th><th>value URL</th></tr>
            </thead>
            <tbody>
              <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"B.B. King"</code></td><td><code>"B.B. King"</code></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
              <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"2014-04-12T19:30"</code></td><td><code>2014-04-12T19:30:00</code></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:startDate</code></td><td></td></tr>
              <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"Lupoâ€™s Heartbreak Hotel"</code></td><td><code>"Lupoâ€™s Heartbreak Hotel"</code></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
              <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"79 Washington St., Providence, RI"</code></td><td><code>"79 Washington St., Providence, RI"</code></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>schema:address</code></td><td></td></tr>
              <tr><td><var>C1.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R1</var></td><td><code>"https://www.etix.com/ticket/1771656"</code></td><td><code>&lt;https://www.etix.com/ticket/1771656&gt;</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td><td><code>schema:url</code></td><td></td></tr>
              <tr><td><var>C1.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:MusicEvent</code></td></tr>
              <tr><td><var>C1.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Place</code></td></tr>
              <tr><td><var>C1.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Offer</code></td></tr>
              <tr><td><var>C1.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:location</code></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td></tr>
              <tr><td><var>C1.10</var></td><td><var>T</var></td><td><var>C10</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:offers</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td></tr>

              <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"B.B. King"</code></td><td><code>"B.B. King"</code></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
              <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"2014-04-13T20:00"</code></td><td><code>2014-04-13T20:00:00</code></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:startDate</code></td><td></td></tr>
              <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"Lynn Auditorium"</code></td><td><code>"Lynn Auditorium"</code></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
              <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"Lynn, MA, 01901"</code></td><td><code>"Lynn, MA, 01901"</code></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>schema:address</code></td><td></td></tr>
              <tr><td><var>C2.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R2</var></td><td><code>"http://frontgatetickets.com/venue.php?id=11766"</code></td><td><code>&lt;http://frontgatetickets.com/venue.php?id=11766&gt;</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td><td><code>schema:url</code></td><td></td></tr>
              <tr><td><var>C2.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:MusicEvent</code></td></tr>
              <tr><td><var>C2.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Place</code></td></tr>
              <tr><td><var>C2.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Offer</code></td></tr>
              <tr><td><var>C2.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:location</code></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td></tr>
              <tr><td><var>C2.10</var></td><td><var>T</var></td><td><var>C10</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:offers</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td></tr>
            </tbody>
          </table>

        </div>

        <p><strong><a>Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-events-listing-minimal-json"
             title="http://example.org/events-listing-minimal.json"
             data-include="../examples/events-listing-minimal.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>Three resources are defined for each row within the table; event, location and offer. Therefore three <a>objects</a> are created for each <a>row</a>.</p>
          <p>Each <a>column</a> description explicitly defines both <a href="http://w3c.github.io/csvw/metadata/#cell-aboutUrl"><code>aboutUrl</code></a> and <a href="http://w3c.github.io/csvw/metadata/#cell-propertyUrl"><code>propertyUrl</code></a> properties which are used to create the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a>  and <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> annotations on the column's <a>cells</a>.</p>
          <p><a>Columns</a> <var>C6</var>, <var>C7</var> and <var>C8</var> (<code>{ "name": "type_event"}</code>, <code>{ "name": "type_place"}</code> and <code>{ "name": "type_offer"}</code>) define the semantic types of the resources described by each <a>row</a>: <code>schema:MusicEvent</code>, <code>schema:Place</code> and <code>schema:Offer</code> respectivelyâ€”noting that the use of <code>rdf:type</code> is converted to the <a>name</a> <code>@type</code> (as used in [[json-ld]]) by this conversion application.</p>
          <p><a>Column</a> <var>C9</var> (<code>{ "name": "location"}</code>) uses the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> and <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-url" class="externalDFN">value URL</a> to assert the relationship between the event and location resources.</p>
          <p><a>Column</a> <var>C10</var> (<code>{ "name": "offer"}</code>) uses the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> and <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-url" class="externalDFN">value URL</a> to assert the relationship between the event and offer resources.</p>
        </div>

        <p><strong><a>Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-events-listing-standard-json"
             title="http://example.org/events-listing-standard.json"
             data-include="../examples/events-listing-standard.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>The resources described by each <a>row</a> are explicitly defined using the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a> annotationâ€”in this case three resources per <a>row</a> (event, location, and offer). The <a>objects</a> containing the name-values pairs associated with the <a>cell values</a> of a <a>row</a> are related to the <a>object</a> for each <a>subject</a> in that <a>row</a> using the name-value pair with <a>name</a> <code>describes</code>.</p>
        </div>
        
      </section>

      <section id="example-public-sector-roles-and-salaries">
        <h3>Example with table group comprising four interrelated tables</h3>
        <p>
          This example is based on <a href="http://w3c.github.io/csvw/use-cases-and-requirements/#UC-OrganogramData">Use Case #4 - Publication of public sector roles and salaries</a> and uses four <a>annotated tables</a> published as a <a>group of tables</a>. Information about senior roles and junior roles within a government department or organization are published in CSV format by each department. These are validated against a centrally published <a href="http://w3c.github.io/csvw/metadata/#dfn-schema" class="externalDFN">schema</a> to ensure that all the data published by departments is consistent. Additionally, lists of organizations and professions are also published centrally, providing <em>controlled vocabularies</em> against which departmental submissions are validated.
        </p>

        <p>
          Information published about junior and senior roles provides summary information for each post within the government department or organization. Whilst the junior role information is anonymous, providing only an indication of the number of full-time-equivalent (FTE) staff occupying a given post, the senior role information specifies the named individual occupying each post. As such, each <a>row</a> from the tabular data file describing senior roles corresponds to two resources; the <em>post</em> and the <em>person</em> occupying that post.
        </p>

        <p>
          This example is concerned only with converting the information provided by each government department or organization rather than the centrally published information listing organizations and professions.
        </p>

        <p> 
          The input tabular data files and associated metadata descriptions are provided below:
        </p>
        <pre class="example"
             id="example-public-sector-roles-and-salaries-csv+-organizations"
             data-include="../examples/gov.uk/data/organizations.csv"
             data-oninclude="updateExample"
             title="http://example.org/gov.uk/data/organizations.csv">
        </pre>
        <pre class="example"
             id="example-public-sector-roles-and-salaries-csv+-professions"
             data-include="../examples/gov.uk/data/professions.csv"
             data-oninclude="updateExample"
             title="http://example.org/gov.uk/data/professions.csv">
        </pre>
        <pre class="example"
             id="example-public-sector-roles-and-salaries-csv+-senior-roles"
             data-include="../examples/senior-roles.csv"
             data-oninclude="updateExample"
             title="http://example.org/senior-roles.csv">
        </pre>
        <pre class="example"
             id="example-public-sector-roles-and-salaries-csv+-junior-roles"
             data-include="../examples/junior-roles.csv"
             data-oninclude="updateExample"
             title="http://example.org/junior-roles.csv">
        </pre>
        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-metadata"
             data-include="../examples/csv-metadata.json"
             data-oninclude="updateExample"
             title="http://example.org/csv-metadata.json">
        </pre>
        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-metadata-organizations"
             data-include="../examples/gov.uk/schema/organizations.json"
             data-oninclude="updateExample"
             title="http://example.org/gov.uk/schema/organizations.json">
        </pre>
        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-metadata-professions"
             data-include="../examples/gov.uk/schema/professions.json"
             data-oninclude="updateExample"
             title="http://example.org/gov.uk/schema/professions.json">
        </pre>
        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-metadata-senior"
             data-include="../examples/gov.uk/schema/senior-roles.json"
             data-oninclude="updateExample"
             title="http://example.org/gov.uk/schema/senior-roles.json">
        </pre>
        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-metadata-junior"
             data-include="../examples/gov.uk/schema/junior-roles.json"
             data-oninclude="updateExample"
             title="http://example.org/gov.uk/schema/junior-roles.json">
        </pre>

        <div class="note">
          <p>This example makes extensive use of the <code>example.org</code> domain. As described in [[RFC6761]], this domain is used for illustrative examples within documentation. In reality, the resources described here with the URL path <code>/gov.uk</code> would be centrally published by the UK Government at, say, the domain <code>data.gov.uk</code>.</p>
          <p>Given that these resources are centrally published with an aspiration for reuse, the <a href="http://w3c.github.io/csvw/metadata/#dfn-schema-description" class="externalDFN">schema descriptions</a> have been factored out into separate resources. As such, the top-level metadata description resource <code>metadata.json</code> simply provides the list of <a href="http://w3c.github.io/csvw/syntax/#dfn-table" class="externalDFN">tables</a> and binds each of them to the appropriate <a href="http://w3c.github.io/csvw/metadata/#dfn-schema" class="externalDFN">schema</a> that is defined elsewhere.</p>
          <p>Finally, note that because the centrally published metadata descriptions are intended to be reused across many government departments and organizations, extra consideration has been given to defining URIs for the <em>person</em> and <em>post</em> resources defined in each row of the senior roles tabular data and subsequently referenced from the junior roles tabular data. To ensure that naming clashes are avoided, the unique reference for the organization to which the <em>person</em> or <em>post</em> belongs has been included in a path segment of the identifier. For example, the <a href="http://w3c.github.io/csvw/metadata/#dfn-uri-template-property">URI template property</a> <a href="http://w3c.github.io/csvw/metadata/#cell-aboutUrl"><code>aboutUrl</code></a> used to identify the senior <em>post</em> is specified as <code>http://example.org/organization/{organizationRef}/post/{ref}</code>, thus yielding the URI <code>http://example.org/organization/hefce.ac.uk/post/90115</code> for the <em>post</em> described in the first <a>row</a> of the senior roles tabular data.</p>
        </div>

        <p>The <a>group of tables</a> generated from parsing the tabular data files and associated metadata is shown below and provides the basis for the conversion to JSON.</p>

        <button class="toggle" data-toggle-target="ex-groups-annotation">empty</button>
        <div id="ex-groups-annotation" class="to-toggle">

          <p>Annotations for the <a>group of tables</a> <var>G</var> and the four <a>tables</a> <var>Ta</var>, <var>Tb</var>, <var>Tc</var>, and <var>Td</var> are shown below:</p>

          <p><a>Group of Tables</a> annotations:</p>
          <table>
            <thead>
              <tr><th rowspan="2">id</th><th>core annotations</th></tr>
              <tr><th>tables</th>
            </thead>
            <tbody>
              <tr><td><var>G</var></td><td><var>Ta</var>, <var>Tb</var>, <var>Tc</var>, <var>Td</var></td></tr>
            </tbody>
          </table>

          <p><a>Table</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="5">core annotations</th></tr>
              <tr><th><code>url</code></th><th>columns</th><th>rows</th><th>suppress output</th><th>foreign keys</th></tr>
            </thead>
            <tbody>
              <tr><td><var>Ta</var></td><td><code>http://example.org/gov.uk/data/organizations.csv</code></td><td><var>Ca1</var>, <var>Ca2</var>, <var>Ca3</var></td><td><var>Ra1</var>, <var>Ra2</var></td><td><code>true</code></td><td><var>Fa1</var></td></tr>

              <tr><td><var>Tb</var></td><td><code>http://example.org/gov.uk/professions.csv</code></td><td><var>Cb1</var></td><td><var>Rb1</var>, <var>Rb2</var>, <var>Rb3</var>, <var>Rb4</var></td><td><code>true</code></td><td></td></tr>

              <tr><td><var>Tc</var></td><td><code>http://example.org/senior-roles.csv</code></td><td><var>Cc1</var>, <var>Cc2</var>, <var>Cc3</var>, <var>Cc4</var>, <var>Cc5</var>, <var>Cc6</var></td><td><var>Rc1</var>, <var>Rc2</var></td><td><code>false</code></td><td><var>Fc1</var>, <var>Fc2</var>, <var>Fc3</var></td></tr>
              
              <tr><td><var>Td</var></td><td><code>http://example.org/junior-roles.csv</code></td><td><var>Cd1</var>, <var>Cd2</var>, <var>Cd3</var>, <var>Cd4</var>, <var>Cd5</var>, <var>Cd6</var>, <var>Cd7</var></td><td><var>Rd1</var>, <var>Rd2</var></td><td><code>false</code></td><td><var>Fd1</var>, <var>Fd2</var>, <var>Fd3</var></td></tr>
            </tbody>
          </table>

          <p class="note">In this example, output for the centrally published lists of organizations and professions, tables <var>Ta</var> and <var>Tb</var> (<code>http://example.org/gov.uk/data/organizations.csv</code> and <code>http://example.org/gov.uk/data/professions.csv</code> respectively), are not required; only information from the departmental submissions is to be translated to RDF. Note the <a href="http://w3c.github.io/csvw/syntax/#dfn-table-suppress-output" class="externalDFN">suppress output</a> annotation on this <a>table</a>.</p>

          <p>The following foreign keys are defined:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th>id</th><th>columns in table</th><th>columns in referenced table</th></tr>
            </thead>
            <tbody>
              <tr><td><var>Fa1</var></td><td><var>Ca3</var></td><td><var>Ca1</var></td></tr>
              <tr><td><var>Fc1</var></td><td><var>Cc5</var></td><td><var>Cc1</var></td></tr>
              <tr><td><var>Fc2</var></td><td><var>Cc6</var></td><td><var>Cb1</var></td></tr>
              <tr><td><var>Fc3</var></td><td><var>Cc7</var></td><td><var>Ca1</var></td></tr>
              <tr><td><var>Fd1</var></td><td><var>Cd1</var></td><td><var>Cc1</var></td></tr>
              <tr><td><var>Fd2</var></td><td><var>Cd7</var></td><td><var>Cb1</var></td></tr>
              <tr><td><var>Fd3</var></td><td><var>Cd8</var></td><td><var>Ca1</var></td></tr>
            </tbody>
          </table>

          <p>Annotations for the <a>columns</a>, <a>rows</a> and <a>cells</a> in <a>table</a> <var>T</var> are shown in the tables below:</p>

          <p><a>Column</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="8">core annotations</th></tr>
              <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th>name</th><th>titles</th><th>required</th><th>virtual</th></tr>
            </thead>
            <tbody>
              <tr><td><var>Ca1</var></td><td><var>Ta</var></td><td>1</td><td>1</td><td><var>Ca1.1</var>, <var>Ca2.1</var></td><td><code>ref</code></td><td><code>Organization Unique Reference</code></td><td><code>true</code></td><td></td></tr>
              <tr><td><var>Ca2</var></td><td><var>Ta</var></td><td>1</td><td>1</td><td><var>Ca1.2</var>, <var>Ca2.2</var></td><td><code>name</code></td><td><code>Organization Name</code></td><td></td><td></td></tr>
              <tr><td><var>Ca3</var></td><td><var>Ta</var></td><td>1</td><td>1</td><td><var>Ca1.3</var>, <var>Ca2.3</var></td><td><code>department</code></td><td><code>Department Reference</code></td><td></td><td></td></tr>

              <tr><td><var>Cb1</var></td><td><var>Tb</var></td><td>1</td><td>1</td><td><var>Cb1.1</var>, <var>Cb2.1</var>, <var>Cb3.1</var>, <var>Cb4.1</var></td><td><code>name</code></td><td><code>Profession</code></td><td><code>true</code></td><td></td></tr>

              <tr><td><var>Cc1</var></td><td><var>Tc</var></td><td>1</td><td>1</td><td><var>Cc1.1</var>, <var>Cc2.1</var></td><td><code>ref</code></td><td><code>Post Unique Reference</code></td><td><code>true</code></td><td></td></tr>
              <tr><td><var>Cc2</var></td><td><var>Tc</var></td><td>2</td><td>2</td><td><var>Cc1.2</var>, <var>Cc2.2</var></td><td><code>name</code></td><td><code>Name</code></td><td></td><td></td></tr>
              <tr><td><var>Cc3</var></td><td><var>Tc</var></td><td>3</td><td>3</td><td><var>Cc1.3</var>, <var>Cc2.3</var></td><td><code>grade</code></td><td><code>Grade</code></td><td></td><td></td></tr>
              <tr><td><var>Cc4</var></td><td><var>Tc</var></td><td>4</td><td>4</td><td><var>Cc1.4</var>, <var>Cc2.4</var></td><td><code>job</code></td><td><code>Job Title</code></td><td></td><td></td></tr>
              <tr><td><var>Cc5</var></td><td><var>Tc</var></td><td>5</td><td>5</td><td><var>Cc1.5</var>, <var>Cc2.5</var></td><td><code>reportsTo</code></td><td><code>Reports to Senior Post</code></td><td></td><td></td></tr>
              <tr><td><var>Cc6</var></td><td><var>Tc</var></td><td>6</td><td>6</td><td><var>Cc1.6</var>, <var>Cc2.6</var></td><td><code>profession</code></td><td><code>Profession</code></td><td></td><td></td></tr>
              <tr><td><var>Cc7</var></td><td><var>Tc</var></td><td>7</td><td>7</td><td><var>Cc1.7</var>, <var>Cc2.7</var></td><td><code>organizationRef</code></td><td><code>Organization Reference</code></td><td><code>true</code></td><td></td></tr>
              <tr><td><var>Cc8</var></td><td><var>Tc</var></td><td>8</td><td>8</td><td><var>Cc1.8</var>, <var>Cc2.8</var></td><td><code>post_holder</code></td><td></td><td></td><td><code>true</code></td></tr>

              <tr><td><var>Cd1</var></td><td><var>Td</var></td><td>1</td><td>1</td><td><var>Cd1.1</var>, <var>Cd2.1</var></td><td><code>reportsToSenior</code></td><td><code>Reporting Senior Post</code></td><td><code>true</code></td><td></td></tr>
              <tr><td><var>Cd2</var></td><td><var>Td</var></td><td>2</td><td>2</td><td><var>Cd1.2</var>, <var>Cd2.2</var></td><td><code>grade</code></td><td><code>Grade</code></td><td></td><td></td></tr>
              <tr><td><var>Cd3</var></td><td><var>Td</var></td><td>3</td><td>3</td><td><var>Cd1.3</var>, <var>Cd2.3</var></td><td><code>min_pay</code></td><td><code>Payscale Minimum (Â£)</code></td><td></td><td></td></tr>
              <tr><td><var>Cd4</var></td><td><var>Td</var></td><td>4</td><td>4</td><td><var>Cd1.4</var>, <var>Cd2.4</var></td><td><code>max_pay</code></td><td><code>Payscale Maximum (Â£)</code></td><td></td><td></td></tr>
              <tr><td><var>Cd5</var></td><td><var>Td</var></td><td>5</td><td>5</td><td><var>Cd1.5</var>, <var>Cd2.5</var></td><td><code>job</code></td><td><code>Generic Job Title</code></td><td></td><td></td></tr>
              <tr><td><var>Cd6</var></td><td><var>Td</var></td><td>6</td><td>6</td><td><var>Cd1.6</var>, <var>Cd2.6</var></td><td><code>number</code></td><td><code>Number of Posts (FTE)</code></td><td></td><td></td></tr>
              <tr><td><var>Cd7</var></td><td><var>Td</var></td><td>7</td><td>7</td><td><var>Cd1.7</var>, <var>Cd2.7</var></td><td><code>profession</code></td><td><code>Profession</code></td><td></td><td></td></tr>
              <tr><td><var>Cd8</var></td><td><var>Td</var></td><td>8</td><td>8</td><td><var>Cd1.8</var>, <var>Cd2.8</var></td><td><code>organizationRef</code></td><td><code>Organization Reference</code></td><td><code>true</code></td><td></td></tr>
            </tbody>
          </table>

          <p class="note"><a>Column</a> <var>Cc8</var>, with the <a href="http://w3c.github.io/csvw/metadata/#column-virtual"><code>virtual</code></a> annotation specified as <code>true</code>, is used to relate the <em>person</em> resource, whose name is provided in <a>column</a> <var>Cc2</var>, to the associated <em>post</em> resource within the current <a>row</a> of <a>table</a> <var>Tc</var> (<code>{ "url": "http://example.org/senior-roles.csv" }</code>).</p>

          <p><a>Row</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
              <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
            </thead>
            <tbody>
              <tr><td><var>Ra1</var></td><td><var>Ta</var></td><td>1</td><td>2</td><td><var>Ca1.1</var>, <var>Ca1.2</var>, <var>Ca1.3</var></td></tr>
              <tr><td><var>Ra2</var></td><td><var>Ta</var></td><td>2</td><td>3</td><td><var>Ca2.1</var>, <var>Ca2.2</var>, <var>Ca2.3</var></td></tr>

              <tr><td><var>Rb1</var></td><td><var>Tb</var></td><td>1</td><td>2</td><td><var>Cb1.1</var></td></tr>
              <tr><td><var>Rb2</var></td><td><var>Tb</var></td><td>2</td><td>3</td><td><var>Cb2.1</var></td></tr>
              <tr><td><var>Rb3</var></td><td><var>Tb</var></td><td>3</td><td>4</td><td><var>Cb3.1</var></td></tr>
              <tr><td><var>Rb4</var></td><td><var>Tb</var></td><td>4</td><td>5</td><td><var>Cb4.1</var></td></tr>

              <tr><td><var>Rc1</var></td><td><var>Tc</var></td><td>1</td><td>2</td><td><var>Cc1.1</var>, <var>Cc1.2</var>, <var>Cc1.3</var>, <var>Cc1.4</var>, <var>Cc1.5</var>, <var>Cc1.6</var>, <var>Cc1.7</var>, <var>Cc1.8</var></td></tr>
              <tr><td><var>Rc2</var></td><td><var>Tc</var></td><td>2</td><td>3</td><td><var>Cc2.1</var>, <var>Cc2.2</var>, <var>Cc2.3</var>, <var>Cc2.4</var>, <var>Cc2.5</var>, <var>Cc2.6</var>, <var>Cc2.7</var>, <var>Cc2.8</var></td></tr>

              <tr><td><var>Rd1</var></td><td><var>Td</var></td><td>1</td><td>2</td><td><var>Cd1.1</var>, <var>Cd1.2</var>, <var>Cd1.3</var>, <var>Cd1.4</var>, <var>Cd1.5</var>, <var>Cd1.6</var>, <var>Cd1.7</var>, <var>Cd1.8</var></td></tr>
              <tr><td><var>Rd2</var></td><td><var>Td</var></td><td>2</td><td>3</td><td><var>Cd2.1</var>, <var>Cd2.2</var>, <var>Cd2.3</var>, <var>Cd2.4</var>, <var>Cd2.5</var>, <var>Cd2.6</var>, <var>Cd2.7</var>, <var>Cd2.8</var></td></tr>
            </tbody>
          </table>

          <p><a>Cell</a> annotations:</p>
          <table style="width: 100%; text-align: left">
            <thead>
              <tr><th rowspan="2">id</th><th colspan="8">core annotations</th></tr>
              <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>about URL</th><th>property URL</th><th>value URL</th></tr>
            </thead>
            <tbody>
              <tr><td><var>Ca1.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra1</var></td><td><code>"hefce.ac.uk"</code></td><td><code>"hefce.ac.uk"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk&gt;</code></td><td><code>dc:identifier</code></td><td></td></tr>
              <tr><td><var>Ca1.2</var></td><td><var>Ta</var></td><td><var>Ca2</var></td><td><var>Ra1</var></td><td><code>"Higher Education Funding Council for England"</code></td><td><code>"Higher Education Funding Council for England"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk&gt;</code></td><td><code>foaf:name</code></td><td></td></tr>
              <tr><td><var>Ca1.3</var></td><td><var>Ta</var></td><td><var>Ca3</var></td><td><var>Ra1</var></td><td><code>"bis.gov.uk"</code></td><td><code>"bis.gov.uk"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk&gt;</code></td><td><code>org:subOrganizationOf</code></td><td><code>&lt;http://example.org/organization/bis.gov.uk&gt;</code></td></tr>

              <tr><td><var>Ca2.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra2</var></td><td><code>"bis.gov.uk"</code></td><td><code>"bis.gov.uk"</code></td><td><code>&lt;http://example.org/organization/bis.gov.uk&gt;</code></td><td><code>dc:identifier</code></td><td></td></tr>
              <tr><td><var>Ca2.2</var></td><td><var>Ta</var></td><td><var>Ca2</var></td><td><var>Ra2</var></td><td><code>"Department for Business, Innovation and Skills"</code></td><td><code>"Department for Business, Innovation and Skills"</code></td><td><code>&lt;http://example.org/organization/bis.gov.uk&gt;</code></td><td><code>foaf:name</code></td><td></td></tr>
              <tr><td><var>Ca2.3</var></td><td><var>Ta</var></td><td><var>Ca3</var></td><td><var>Ra2</var></td><td><code>"xx"</code></td><td><code>null</code></td><td><code>&lt;http://example.org/organization/bis.gov.uk&gt;</code></td><td><code>org:subOrganizationOf</code></td><td></td></tr>

              <tr><td><var>Cb1.1</var></td><td><var>Tb</var></td><td><var>Cb1</var></td><td><var>Rb1</var></td><td><code>"Finance"</code></td><td><code>"Finance"</code></td><td></td><td></td><td></td></tr>

              <tr><td><var>Cb2.1</var></td><td><var>Tb</var></td><td><var>Cb1</var></td><td><var>Rb2</var></td><td><code>"Information Technology"</code></td><td><code>"Information Techology"</code></td><td></td><td></td><td></td></tr>

              <tr><td><var>Cb3.1</var></td><td><var>Tb</var></td><td><var>Cb1</var></td><td><var>Rb3</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td></td><td></td></tr>

              <tr><td><var>Cb4.1</var></td><td><var>Tb</var></td><td><var>Cb1</var></td><td><var>Rb4</var></td><td><code>"Policy"</code></td><td><code>"Policy"</code></td><td></td><td></td><td></td></tr>


              <tr><td><var>Cc1.1</var></td><td><var>Tc</var></td><td><var>Cc1</var></td><td><var>Rc1</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td><td><code>dc:identifier</code></td><td></td></tr>
              <tr><td><var>Cc1.2</var></td><td><var>Tc</var></td><td><var>Cc2</var></td><td><var>Rc1</var></td><td><code>"Steve Egan"</code></td><td><code>"Steve Egan"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/person/1&gt;</code></td><td><code>foaf:name</code></td><td></td></tr>
              <tr><td><var>Cc1.3</var></td><td><var>Tc</var></td><td><var>Cc3</var></td><td><var>Rc1</var></td><td><code>"SCS1A"</code></td><td><code>"SCS1A"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td><td><code>&lt;http://example.org/gov.uk/def/grade&gt;</code></td><td></td></tr>
              <tr><td><var>Cc1.4</var></td><td><var>Tc</var></td><td><var>Cc4</var></td><td><var>Rc1</var></td><td><code>"Deputy Chief Executive"</code></td><td><code>"Deputy Chief Executive"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td><td><code>&lt;http://example.org/gov.uk/def/job&gt;</code></td><td></td></tr>
              <tr><td><var>Cc1.5</var></td><td><var>Tc</var></td><td><var>Cc5</var></td><td><var>Rc1</var></td><td><code>"90334"</code></td><td><code>"90334"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td><td><code>org:reportsTo</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90334&gt;</code></td></tr>
              <tr><td><var>Cc1.6</var></td><td><var>Tc</var></td><td><var>Cc6</var></td><td><var>Rc1</var></td><td><code>"Finance"</code></td><td><code>"Finance"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td><td><code>&lt;http://example.org/gov.uk/def/profession&gt;</code></td><td></td></tr>
              <tr><td><var>Cc1.7</var></td><td><var>Tc</var></td><td><var>Cc7</var></td><td><var>Rc1</var></td><td><code>"hefce.ac.uk"</code></td><td><code>"hefce.ac.uk"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td><td><code>org:postIn</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk&gt;</code></td></tr>
              <tr><td><var>Cc1.8</var></td><td><var>Tc</var></td><td><var>Cc8</var></td><td><var>Rc1</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td><td><code>org:heldBy</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/person/1&gt;</code></td></tr>

              <tr><td><var>Cc2.1</var></td><td><var>Tc</var></td><td><var>Cc1</var></td><td><var>Rc2</var></td><td><code>"90334"</code></td><td><code>"90334"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90334&gt;</code></td><td><code>dc:identifier</code></td><td></td></tr>
              <tr><td><var>Cc2.2</var></td><td><var>Tc</var></td><td><var>Cc2</var></td><td><var>Rc2</var></td><td><code>"Sir Alan Langlands"</code></td><td><code>"Sir Alan Langlands"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/person/2&gt;</code></td><td><code>foaf:name</code></td><td></td></tr>
              <tr><td><var>Cc2.3</var></td><td><var>Tc</var></td><td><var>Cc3</var></td><td><var>Rc2</var></td><td><code>"SCS4"</code></td><td><code>"SCS4"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90334&gt;</code></td><td><code>&lt;http://example.org/gov.uk/def/grade&gt;</code></td><td></td></tr>
              <tr><td><var>Cc2.4</var></td><td><var>Tc</var></td><td><var>Cc4</var></td><td><var>Rc2</var></td><td><code>"Chief Executive"</code></td><td><code>"Chief Executive"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90334&gt;</code></td><td><code>&lt;http://example.org/gov.uk/def/job&gt;</code></td><td></td></tr>
              <tr><td><var>Cc2.5</var></td><td><var>Tc</var></td><td><var>Cc5</var></td><td><var>Rc2</var></td><td><code>"xx"</code></td><td><code>null</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90334&gt;</code></td><td><code>org:reportsTo</code></td><td></td></tr>
              <tr><td><var>Cc2.6</var></td><td><var>Tc</var></td><td><var>Cc6</var></td><td><var>Rc2</var></td><td><code>"Policy"</code></td><td><code>"Policy"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90334&gt;</code></td><td><code>&lt;http://example.org/gov.uk/def/profession&gt;</code></td><td></td></tr>
              <tr><td><var>Cc2.7</var></td><td><var>Tc</var></td><td><var>Cc7</var></td><td><var>Rc2</var></td><td><code>"hefce.ac.uk"</code></td><td><code>"hefce.ac.uk"</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90334&gt;</code></td><td><code>org:postIn</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk&gt;</code></td></tr>
              <tr><td><var>Cc2.8</var></td><td><var>Tc</var></td><td><var>Cc8</var></td><td><var>Rc2</var></td><td><code>""</code></td><td><code>null</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90334&gt;</code></td><td><code>org:heldBy</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/person/2&gt;</code></td></tr>


              <tr><td><var>Cd1.1</var></td><td><var>Td</var></td><td><var>Cd1</var></td><td><var>Rd1</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td></td><td><code>org:reportsTo</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td></tr>
              <tr><td><var>Cd1.2</var></td><td><var>Td</var></td><td><var>Cd2</var></td><td><var>Rd1</var></td><td><code>"4"</code></td><td><code>"4"</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/grade&gt;</code></td><td></td></tr>
              <tr><td><var>Cd1.3</var></td><td><var>Td</var></td><td><var>Cd3</var></td><td><var>Rd1</var></td><td><code>"17426"</code></td><td><code>17426</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/min_pay&gt;</code></td><td></td></tr>
              <tr><td><var>Cd1.4</var></td><td><var>Td</var></td><td><var>Cd4</var></td><td><var>Rd1</var></td><td><code>"20002"</code></td><td><code>20002</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/max_pay&gt;</code></td><td></td></tr>
              <tr><td><var>Cd1.5</var></td><td><var>Td</var></td><td><var>Cd5</var></td><td><var>Rd1</var></td><td><code>"Administrator"</code></td><td><code>"Administrator"</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/job&gt;</code></td><td></td></tr>
              <tr><td><var>Cd1.6</var></td><td><var>Td</var></td><td><var>Cd6</var></td><td><var>Rd1</var></td><td><code>"8.67"</code></td><td><code>8.67</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/number_of_posts&gt;</code></td><td></td></tr>
              <tr><td><var>Cd1.7</var></td><td><var>Td</var></td><td><var>Cd7</var></td><td><var>Rd1</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/profession&gt;</code></td><td></td></tr>
              <tr><td><var>Cd1.8</var></td><td><var>Td</var></td><td><var>Cd8</var></td><td><var>Rd1</var></td><td><code>"hefce.ac.uk"</code></td><td><code>"hefce.ac.uk"</code></td><td></td><td><code>org:postIn</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk&gt;</code></td></tr>

              <tr><td><var>Cd2.1</var></td><td><var>Td</var></td><td><var>Cd1</var></td><td><var>Rd2</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td></td><td><code>org:reportsTo</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk/post/90115&gt;</code></td></tr>
              <tr><td><var>Cd2.2</var></td><td><var>Td</var></td><td><var>Cd2</var></td><td><var>Rd2</var></td><td><code>"5"</code></td><td><code>"5"</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/grade&gt;</code></td><td></td></tr>
              <tr><td><var>Cd2.3</var></td><td><var>Td</var></td><td><var>Cd3</var></td><td><var>Rd2</var></td><td><code>"19546"</code></td><td><code>19546</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/min_pay&gt;</code></td><td></td></tr>
              <tr><td><var>Cd2.4</var></td><td><var>Td</var></td><td><var>Cd4</var></td><td><var>Rd2</var></td><td><code>"22478"</code></td><td><code>22478</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/max_pay&gt;</code></td><td></td></tr>
              <tr><td><var>Cd2.5</var></td><td><var>Td</var></td><td><var>Cd5</var></td><td><var>Rd2</var></td><td><code>"Administrator"</code></td><td><code>"Administrator"</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/job&gt;</code></td><td></td></tr>
              <tr><td><var>Cd2.6</var></td><td><var>Td</var></td><td><var>Cd6</var></td><td><var>Rd2</var></td><td><code>"0.5"</code></td><td><code>0.5</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/number_of_posts&gt;</code></td><td></td></tr>
              <tr><td><var>Cd2.7</var></td><td><var>Td</var></td><td><var>Cd7</var></td><td><var>Rd2</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td><code>&lt;http://example.org/gov.uk/def/profession&gt;</code></td><td></td></tr>
              <tr><td><var>Cd2.8</var></td><td><var>Td</var></td><td><var>Cd8</var></td><td><var>Rd2</var></td><td><code>"hefce.ac.uk"</code></td><td><code>"hefce.ac.uk"</code></td><td></td><td><code>org:postIn</code></td><td><code>&lt;http://example.org/organization/hefce.ac.uk&gt;</code></td></tr>
            </tbody>
          </table>

          <p class="note">Notice that <a>value URL</a> is not specified for <a>cells</a> <var>Ca2.3</var> and <var>Cc2.5</var> because in each case the <a>cell value</a> is <code>null</code> and the <a href="http://w3c.github.io/csvw/syntax/#dfn-column-virtual" class="externalDFN">virtual</a> annotation of <a>column</a> <var>Cb5</var> is <em>not</em> defined.</p>

        </div>
        <p><strong><a>Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-minimal-json"
             title="http://example.org/public-sector-roles-and-salaries-minimal.json"
             data-include="../examples/public-sector-roles-and-salaries-minimal.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>Prefixes defined within the <a href="http://www.w3.org/2011/rdfa-context/rdfa-1.1">RDFa 1.1 Initial Context</a> ([[rdfa-core]]) are not expanded; e.g. <code>dc:</code> for &lt;http://purl.org/dc/terms/&gt;.</p>
          <p>Output for <a>tables</a> <var>Ta</var> and <var>Tb</var> (<code>{ "url": "http://example.org/gov.uk/data/organizations.csv" }</code> and <code>{ "url": "http://example.org/gov.uk/data/professions.csv" }</code>) are not included as the <a href="http://w3c.github.io/csvw/syntax/#dfn-table-suppress-output" class="externalDFN">suppress output</a> annotation has the value <code>true</code> for each of the <a>tables</a>.</p>
          <p>The <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> is specified for all <a>cells</a> in <a>tables</a> <var>Tc</var> and <var>Td</var>.</p>
          <p><a>Columns</a> <var>Cc5</var> and <var>Cd1</var> (<code>{ "name": "reportsTo" }</code> and <code>{ "name": "reportsToSenior" }</code>) use the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> and <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-url" class="externalDFN">value URL</a> annotations to assert the relationship between the post described by a given <a>row</a> and the senior post to which it reports. However, since senior posts and junior posts are described in different tables it is not possible to create nested <a>objects</a> for this particular case.</p>
          <p>Similarly, <a>columns</a> <var>Cc7</var> and <var>Cd8</var> (both with <code>{ "name": "organizationRef" }</code>) use the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> and <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-url" class="externalDFN">value URL</a> annotations to assert the relationship between the post described by a given <a>row</a> and the organization to which it belongs.</p>
          <p>Finally, note that two resources are created for each <a>row</a> within <a>table</a> <var>Tc</var> (<code>{ "url": "http://example.org/senior-roles.csv" }</code>): the <em>person</em> and the <em>post</em> they occupy. The relationship between these resources is specified via <em>virtual</em> <a>column</a> <var>Cc8</var> (<code>{ "name": "post_holder" }</code>) using the <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-about-url" class="externalDFN">about URL</a>, <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-property-url" class="externalDFN">property URL</a> and <a href="http://w3c.github.io/csvw/syntax/#dfn-cell-value-url" class="externalDFN">value URL</a> annotations. The <em>person</em> <a>object</a> provides the value of the name-value pair with corresponding <a>name</a> <code>org:heldBy</code>, thus nesting the <em>person</em> <a>object</a> within the <em>post</em> <a>object</a>.</p>
        </div>

        <p><strong><a>Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-standard-json"
             title="http://example.org/public-sector-roles-and-salaries-standard.json"
             data-include="../examples/public-sector-roles-and-salaries-standard.json"
             data-oninclude="updateExample">
        </pre>
      </section>

    </section>
    <section class="appendix">
      <h2>Acknowledgements</h2>
      <div data-include="../acknowledgements.html"></div>
    </section>
    <section class="appendix" id="changes">
      <h2>Changes since previous versions</h2>
      <section>
        <h2>Changes since candidate recommendation of 16 July 2015</h2>
        <ul>
          <li>Editorial changes arising from <a href="https://github.com/w3c/csvw/issues/679">issue 679</a>.</li>
          <li>Clarification of behaviour when creating JSON output from a row where multiple cells that share the same <a>property URL</a> annotation and contain lists of values. The JSON output will contain a name-value pair whose name is derived from the <a>property URL</a> annotation and whose value is a single array containing the values from all contributing cells. (See <a href="https://github.com/w3c/csvw/issues/755">issue 755</a>)</li>
        </ul>
      </section>
      
      <section>
        <h2>Changes since the working draft of 16 April 2015</h2>
        <ul>
          <li>The <a href="http://w3c.github.io/csvw/syntax/#dfn-column-name" class="externalDFN">name</a> annotation is URI decoded before used as a property.</li>
          <li>A note has been added to the <a href="#datatypes">section on datatype</a> making it clear that the new <code>@id</code> annotation in the model is ignored for JSON.</li>
          <li>The <a href="#standard-mode">section on generating JSON in standard mode</a> has been amended to include the provision of <a href="http://w3c.github.io/csvw/syntax/#dfn-row-titles" class="externalDFN">row title</a> annotation values.</li>
          <li>The <a href="#generating-json">section on generating JSON</a> has been amended to include a note on the fact that no Unicode normalization is applied on string values.</li>
          <li>The <code>table</code> and <code>title</code> properties have been changed to <code>tables</code> and <code>titles</code>, respectively, to be consistent in the usage of plural forms.</li>
        </ul>
      </section>

      <section>
        <h2>Changes since the first public working draft of 08 January 2015</h2>

        <p>The document has undergone substantial changes since the <a href="http://www.w3.org/TR/2015/WD-csv2json-20150108/">first public working draft</a>. Below are some of the changes made:</p>

        <ul>
          <li>Introduced the concept of a <a href="#h-standard-mode">"standard"</a> and a <a href="#h-minimal-mode">"minimal"</a> mode.</li>
          <li>Removed the separate section on "Mapping Core Tabular Data" (to be in line with the latest version of the <a href="http://w3c.github.io/csvw/syntax/">tabular model</a> specification).</li>
          <li>Reformulated the mappings in terms of table "annotations" (i.e., based on the <a href="http://w3c.github.io/csvw/syntax/">tabular model</a>) rather than table "properties" (i.e., not based on the specificities of the <a href="http://w3c.github.io/csvw/syntax/">metadata vocabulary</a>).</li>
          <li>Provided a set of <a href="#h-datatypes">standard mappings</a> from the general datatypes and the corresponding JSON types.</li>
          <li>Defined a <a href="#h-json-ld-to-json">JSON-LD dialect to JSON mapping</a> for non-core annotations.</li>
          <li>Added an <a href="#h-nesting-objects">algorithm for nested objects</a> to process the output and make it more in line with general JSON usage patterns.</li>
          <li>Added more detailed <a href="#h-examples">examples</a>.</li>
        </ul>
      </section>
    </section>
    <script type="text/javascript">
      (function(){
        hide_init();
      })();
    </script>
  </body>
</html>
