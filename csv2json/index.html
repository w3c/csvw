<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <title>Generating JSON from Tabular Data on the Web</title>
    <script src="../local-biblio.js" class="remove"></script>
    <script class="remove" src="https://www.w3.org/Tools/respec/respec-w3c-common">
	  </script>
    <script class="remove">
var respecConfig = {
    localBiblio: localBibliography,
    specStatus: "ED",
    shortName: "csv2json",
    // publishDate:  "2014-04-01",
    previousPublishDate: "2015-01-08",
    previousMaturity: "FPWD",
    previousURI: "http://www.w3.org/TR/2015/WD-csv2json-20150108/",
    edDraftURI: "http://w3c.github.io/csvw/csv2json/",
    // lcEnd: "3000-01-01",
    // crEnd: "3000-01-01",
    editors:
     [{
            name: "Jeremy Tandy",
            company: "Met Office",
            companyURL: "http://www.metoffice.gov.uk/",
            w3cid: "65512"
      },{
       name: "Ivan Herman",
       url: "http://www.w3.org/People/Ivan",
       company: "W3C",
       companyURL: "http://www.w3.org",
       w3cid: "7382"
     }],
    wg: "CSV on the Web Working Group",
    wgURI: "http://www.w3.org/2013/csvw/",
    wgPublicList: "public-csv-wg",
    wgPatentURI: "http://www.w3.org/2004/01/pp-impl/68238/status",
    otherLinks: [{
      key: "Repository",
      data: [{
          value: "We are on Github",
          href: "https://github.com/w3c/csvw/"
        }, {
          value: "File a bug",
          href: "https://github.com/w3c/csvw/issues"
        }]
      } , 
      {
        key: "Changes",
        data: [{
        //     value: "Diff to previous version",
        //     href: "diff-20140327.html"
        //   }, {}
           value: "Commit history",
           href: "https://github.com/w3c/csvw/commits/gh-pages"
         }]
       }] ,
    inlineCSS: true,
    noIDLIn: true,
    issueBase: "https://github.com/w3c/csvw/issues/",
    noLegacyStyle: false
    };
    </script>
    <style type="text/css">
      .grammar td { font-family: monospace; vertical-align: top; }
      .grammar-literal { color: gray;}
      .TBD { font-style: italic; background: yellow;}
      .steps li { margin-bottom: 0.5em;}
      dl.nvp {
        padding: 0 0 0 1em;
        margin-left: -1em;
        text-indent: 0em;
      }
      dl.nvp dt, dl.nvp dd { margin: 0; display: inline }
      dl.nvp dt:after { content: ':'; }
      dl.nvp dd:after { content: '\A'; white-space: pre; }
      ol.algorithm {
        counter-reset: numsection;
        list-style-type: none;
      }
      ol.algorithm > li {
        margin: 1em -1em;
        text-indent: -1em;
      }
      ol.algorithm > li:before {
        font-weight: bold;
        counter-increment: numsection;
        content: counters(numsection, ".") " ";
      }
      ol.algorithm>li>p {text-indent: 0em}
      ol.algorithm>li>p:first-child {position: relative; display: inline;}
    </style>
  </head>
  <body>
    <section id="abstract">
      <p>This document defines the procedures and rules to be applied when converting tabular data into JSON. Tabular data may be complemented with metadata annotations that describe its structure, the meaning of its content and how it may form part of a collection of interrelated tabular data. This document specifies the effect of this metadata on the resulting JSON.</p>
    </section>
    
    <section id="sotd">
      <p>The CSV on the Web Working Group was chartered to produce Recommendations for "Access methods for CSV Metadata", "Metadata vocabulary for CSV data" and "Mapping mechanism to transforming CSV into various Formats (e.g., RDF, JSON, or XML)". This document aims to satisfy the JSON variant of the mapping Recommendation.</p>
    </section>

    <section id="intro">
      <h2>Introduction</h2>
      <p>This document describes the processing of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data">tabular data</a> to create a set of nested objects that MUST be serialized as JSON [[!RFC7159]].</p>

      <p class="note">The conversion of CSV content to JSON is intended for web developers who need not care about the complexities of RDF [[!rdf11-concepts]]. Where the formality of RDF is required, [[!csv2rdf]] provides the procedures for mapping from CSV content to RDF which may be serialized to [[json-ld]].</p>

      <p> The [[!tabular-data-model]] defines an <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotated-tabular-data-model" class="externalDFN">annotated tabular data model</a> consisting of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table" class="externalDFN">tables</a>, <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column" class="externalDFN">columns</a>, <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row" class="externalDFN">rows</a> and <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a>, enriched with <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotation" class="externalDFN">annotations</a> that describe the structure of the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> and the meaning of its content. A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables" class="externalDFN">table group</a> is a collection of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table" class="externalDFN">tables</a> published as a single atomic unit.</p>

      <p>The conversion procedure described in this specification operates on the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a>. This specification does not specify the processes needed to convert CSV-encoded data into tabular data form. Please refer to [[!tabular-data-model]] for details of <a href="http://www.w3.org/TR/tabular-data-model/#parsing">parsing tabular data</a>.</p>

      <p>Conversion applications MUST provide at least two modes of operation: <a title="standard mode">standard</a> and <a title="minimal mode">minimal</a>.</p>

      <p><dfn title="standard mode">Standard mode</dfn> conversion frames the information gleaned from the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a> of the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> with details of the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row" class="externalDFN">rows</a>, <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table" class="externalDFN">tables</a> and a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables" class="externalDFN">table group</a> within which that information is provided.</p>

      <p><dfn title="minimal mode">Minimal mode</dfn> conversion includes <em>only</em> the information gleaned from the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a> of the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> within the output.</p>

      <p><a title="standard mode">Standard</a> and <a title="minimal mode">minimal</a> conversion are described normatively <a href="#generating-json">below</a>.</p>

      <p>Conversion applications MAY offer additional implementation specific conversion modes.</p>

      <p><a href="http://www.w3.org/TR/tabular-metadata/#dfn-conversion-specification" class="externalDFN">Conversion specifications</a>, as defined in [[!tabular-metadata]] MAY be used to specify how <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> can be transformed into another format using a script or template. Such a <a href="http://www.w3.org/TR/tabular-metadata/#dfn-conversion-specification" class="externalDFN">conversion specification</a> MAY use the JSON output described in this specification as input.</p>

      <p>The conversion procedure described in this specification is considered to be <em>entirely textual</em>. There is no requirement on conversion applications to check the semantic consistency of the data during the conversion, nor validate the output against JSON syntax rules. Downstream applications SHOULD be aware of the potential for syntax errors and take appropriate action.</p>
    </section>

    <section id="conformance">
      <p><a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">Tabular data</a> MUST conform to the description from [[!tabular-data-model]]. In particular note that each <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row" class="externalDFN">row</a> MUST contain the same number of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a> (although some of these <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a> may be empty). Given this constraint, not all CSV-encoded data can be considered to be tabular data. As such, the conversion procedure described in this specification cannot be applied to all CSV files.</p>
    </section>

    <section id="conversion">
      <h2>Converting Tabular Data to JSON</h2>

      <p>The procedures for converting <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> into JSON are described below for both <a title="standard mode">standard</a> and <a title="minimal mode">minimal</a> modes.</p>

      <section id="algorithm-terms">
        <h3>Algorithm terms</h3>
        <dl>
          <dt><dfn>aboutUrl</dfn></dt>
          <dd>The <a>aboutUrl</a> is the evaluation of the <code>aboutUrl</code> property of the current <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cell</a> as defined in <cite><a href="http://www.w3.org/TR/tabular-metadata/#dfn-uri-template-property">URI template properties</a></cite> in [[!tabular-metadata]].</dd>

          <dt><dfn>annotated table</dfn></dt>
          <dd>The <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotated-table" class="externalDFN">annotated table</a> is defined in [[!tabular-data-model]] as describing a particular <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table" class="externalDFN">table</a> and its metadata.</dd>

          <dt><dfn>array</dfn></dt>
          <dd>An <a>array</a> is defined in JSON ([[!RFC7159]]) as an ordered sequence of zero or more values, where a value is a string, number, boolean, null, <a>object</a>, or <a>array</a>.</dd>

          <dt><dfn>cell</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cell</a> is defined in [[!tabular-data-model]] as the intersection of a <a>row</a> and a <a>column</a> within a <a title="annotated table">table</a>.</dd>

          <dt><dfn>cell errors</dfn></dt>
          <dd><a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell-errors" class="externalDFN">Cell errors</a> are defined in [[!tabular-data-model]] as a (possibly empty) list of validation errors generated while parsing the literal content of a <a>cell</a> to generate the <a title="cell value">semantic value</a>.</dd>

          <dt><dfn>cell value</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell-value" class="externalDFN">cell value</a> is defined in [[!tabular-data-model]] as the semantic value of the <a>cell</a>; this MAY be <code>null</code> or, in the case that the <a>cell</a> specifies a <a href="http://www.w3.org/TR/tabular-metadata/#cell-separator"><code>separator</code></a> property, a sequence of values.</dd>

          <dt><dfn>column</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column" class="externalDFN">column</a> is defined in [[!tabular-data-model]] as a vertical arrangement of <a title="cell">cells</a> within a <a title="annotated table">table</a>.</dd>

          <dt><dfn>common properties</dfn></dt>
          <dd>The <a>common properties</a>, defined in <a href="http://www.w3.org/TR/tabular-metadata/#common-properties">Section 3.3 Common Properties</a> of [[!tabular-metadata]]), may be specified for <a title="annotated table">tables</a> and <a title="table group">table groups</a>.</dd>

          <dt><dfn>identifier</dfn></dt>
          <dd>The identifier is the evaluation of the <code>@id</code> property for the current resource. As defined in [[!tabular-data-model]], the <a>identifier</a> is <code>null</code> if the <code>@id</code> property is undefined. The <a>identifier</a> MAY be applied to either a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables" class="externalDFN">table group</a> or a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotated-table" class="externalDFN">table</a>.</dd>

          <dt><dfn>name</dfn></dt>
          <dd>In the context of this specification, <a>name</a> is used as defined in JSON ([[!RFC7159]]); that is, that <a>name</a> is a string that provides a unique key within a set of name-value pairs within a JSON <a>object</a>.</dd>

          <dt><dfn>notes</dfn></dt>
          <dd>A list of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table-notes" class="externalDFN">notes</a>, as defined in [[!tabular-data-model]], attached to an <a title="annotated table">annotated table</a> using the <code>notes</code> property. This may be an empty list.</dd>

          <dt><dfn>object</dfn></dt>
          <dd>An <a>object</a> is defined in JSON ([[!RFC7159]]) as unordered collection of zero or more name-value pairs, where a where a name is a string and a value is a string, number, boolean, null, <a>object</a>, or <a>array</a>.</dd>

          <dt><dfn>propertyUrl</dfn></dt>
          <dd>The <a>propertyUrl</a> is the evaluation of the <code>propertyUrl</code> property of the current <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cell</a> as defined in <cite><a href="http://www.w3.org/TR/tabular-metadata/#dfn-uri-template-property">URI template properties</a></cite> in [[!tabular-metadata]].</dd>

          <dt><dfn>row</dfn></dt>
          <dd>The <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row" class="externalDFN">row</a> is defined in [[!tabular-data-model]] as a horizontal arrangement of <a title="cell">cells</a> within a <a title="annotated table">table</a>.</dd>

          <dt><dfn>row number</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row-number" class="externalDFN">row number</a> is defined in [[!tabular-data-model]] as the position of the <a>row</a> within the <a title="annotated table">table</a>, starting from 1.</dd>

          <dt><dfn>row source number</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row-source-number" class="externalDFN">row source number</a> is defined in [[!tabular-data-model]] as the position of the <a>row</a> within the source CSV+ file. Provision of the <a>row source number</a> is dependent on parsing applications and may be reported as <code>null</code>.</dd>

          <dt><dfn>subject</dfn></dt>
          <dd>Within this algorithm, a <a>subject</a> is the resource that the value of a given <a>cell</a> refers to. This may be specified using the <a>aboutUrl</a> property.</dd>

          <dt><dfn>table group</dfn></dt>
          <dd>The <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables" class="externalDFN">table group</a> is defined in [[!tabular-data-model]] as comprising a set of <a title="annotated table">annotated tables</a> and a set of annotations that relate to those tables.</dd>
          
          <dt><dfn>table group description</dfn></dt>
          <dd>The <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-group-description" class="externalDFN">table group</a> <a href="http://www.w3.org/TR/tabular-metadata/#dfn-description-object" class="externalDFN">description object</a> as defined in [[!tabular-data-model]].</dd>

          <dt><dfn>valueUrl</dfn></dt>
          <dd>The <a>valueUrl</a> is the evaluation of the <code>valueUrl</code> property of the current <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cell</a> as defined in <cite><a href="http://www.w3.org/TR/tabular-metadata/#dfn-uri-template-property">URI template properties</a></cite> in [[!tabular-metadata]].</dd>
        </dl>
      </section>

      <section id="generating-json">
        <h3>Generating JSON</h3>

        <p>A conformant JSON conversion application MUST produce output conforming to this algorithm according to the chosen mode of conversion: <a title="standard mode">standard</a> or <a title="minimal mode">minimal</a>.</p>

        <p class="note">Where an <a>annotated table</a> is defined in isolation (e.g. in the absence of a <a>table group description</a>), a default <a>table group description</a> is provided with a single <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table-group-resources" class="externalDFN"><code>resources</code></a> annotation that refers to that <a title="annotated table">table</a>.</p>

        <section>
          <h3>Minimal mode</h3>
          <p>The steps in the algorithm defined here apply to <a title="minimal mode">minimal</a> mode.</p>
          <ol class="algorithm">
            <li>
              <p>Insert an empty <a>array</a> <var>A</var> into the JSON output. The <a title="object">objects</a> containing the name-value pairs associated with the <a title="cell value">cell values</a> will be subsequently inserted into this <a>array</a>.</p>
            </li>
            <li>
              <p>Each <a title="annotated table">table</a> is processed sequentially in the order they are referenced in the <a>table group description</a>. For each <a title="annotated table">table</a> where the value of property <a href="http://www.w3.org/TR/tabular-metadata/#table-suppressOutput"><code>suppressOutput</code></a> is <var>false</var>:</p>
              <ol class="algorithm">
                <li>
                  <p>Each <a>row</a> within the <a title="annotated table">table</a> is processed sequentially in order. For each <a>row</a> in the current <a title="annotated table">table</a>:</p>
                  <ol class="algorithm">
                    <li>
                      <p>The <a title="subject">subject(s)</a> described by each <a>row</a> are determined according to the <a>aboutUrl</a> property for each <a>cell</a> in the current <a>row</a>. Where <a>aboutUrl</a> is undefined, a default <a>subject</a> for the <a>row</a> is used.</p>

                      <p class="note">A <a>row</a> MAY describe multiple interrelated <a title="subject">subjects</a>; where the <a>valueUrl</a> property for one cell matches the <a>aboutUrl</a> property for another <a>cell</a> in the same <a>row</a>.</p>
                      
                      <p>Determine the unique <a title="subject">subjects</a> for the current <a>row</a>—including a default <a>subject</a> if <a>aboutUrl</a> is unspecified for any <a title="cell">cells</a> in the <a>row</a>.</p>
                    </li>
                    <li>
                      <p>Generate a sequence of <var>S<sub>i</sub></var> <a title="object">objects</a>, each corresponding to <a>subject</a> <var>i</var> of the current row, as
                        described in <a href="#gen-subj-cells"></a>.</p>
                    </li>
                    <li>
                      <p>Transform the sequence <var>S<sub>i</sub></var> into the final sequence of possibly nested <a title="object">objects</a> for the current row, as described in <a href="#nesting-objects"></a>.</p>
                    </li>
                    <li>
                      <p>Insert each <a>object</a> <var>S<sub>i</sub></var> into <a>array</a> <var>A</var>.</p>
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
          </ol>
        </section>

        <section>
          <h3>Standard mode</h3>
          <p>The steps in the algorithm defined here apply to <a title="standard mode">standard</a> mode.</p>
          <ol class="algorithm">
            <li>
              <p>Insert an empty <a>object</a> <var>G</var> into the JSON output which is associated with the <a>table group</a>.</p>
            </li>
            <li>
              <p>If the <a>table group</a> has an <a>identifier</a> <var>I<sub>G</sub></var>; insert the following name-value pair into <a>object</a> <var>G</var>:</p>
              <dl class="nvp">
                <dt>name</dt>
                <dd><code>@id</code></dd>
                <dt>value</dt>
                <dd><var>I<sub>G</sub></var></dd>
              </dl>
            </li>
            <li>
              <p>Insert any <a>common properties</a> specified for the <a>table group</a> into <a>object</a> <var>G</var>. Name-value pairs relating to <a>common properties</a> are copied verbatim from the metadata description—noting that prefixes defined within the <a href="http://www.w3.org/2011/rdfa-context/rdfa-1.1">RDFa 1.1 Initial Context</a> ([[rdfa-core]]) are not expanded.</p>
            </li>
            <li>
              <p>Insert the following name-value pair into <a>object</a> <var>G</var>:</p>
              <dl class="nvp">
                <dt>name</dt>
                <dd><code>table</code></dd>
                <dt>value</dt>
                <dd><var>A<sub>T</sub></var></dd>
              </dl>
              <p>where <var>A<sub>T</sub></var> is an <a>array</a> into which the <a title="object">objects</a> describing the <a title="annotated table">annotated tables</a> will be subsequently inserted.</p>
            </li>
            <li>
              <p>Each <a title="annotated table">table</a> is processed sequentially in the order they are referenced in the <a>table group description</a>. For each <a title="annotated table">table</a> where the value of property <a href="http://www.w3.org/TR/tabular-metadata/#table-suppressOutput"><code>suppressOutput</code></a> is <var>false</var>:</p>
              <ol class="algorithm">
                <li>
                  <p>Insert an empty <a>object</a> <var>T</var> into the <a>array</a> <var>A<sub>T</sub></var> to represent the <a title="annotated table">table</a>.</p>
                </li>
                <li>
                  <p>If the <a title="annotated table">table</a> has an <a>identifier</a> <var>I<sub>T</sub></var>; insert the following name-value pair into <a>object</a> <var>T</var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><code>@id</code></dd>
                    <dt>value</dt>
                    <dd><var>I<sub>T</sub></var></dd>
                  </dl>
                </li>
                <li>
                  <p>Specify the source CSV+ file <var>URL</var> for the current table based on the value of property <a href="http://www.w3.org/TR/tabular-metadata/#table-url"><code>url</code></a>; insert the following name-value pair into <a>object</a> <var>T</var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><code>url</code></dd>
                    <dt>value</dt>
                    <dd><var>URL</var></dd>
                  </dl>
                </li>
                <li>
                  <p>Insert any <a>notes</a> and <a>common properties</a> specified for the <a title="annotated table">table</a> into <a>object</a> <var>T</var>. Name-value pairs relating to <a>notes</a> and <a>common properties</a> are copied verbatim from the metadata description—noting that prefixes defined within the <a href="http://www.w3.org/2011/rdfa-context/rdfa-1.1">RDFa 1.1 Initial Context</a> ([[rdfa-core]]) are not expanded.</p>
                  <p class="note">All other annotations for the <a title="annotated table">table</a> are ignored during the conversion; including information about <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableschema" class="externalDFN">table schemas</a> and <a href="http://www.w3.org/TR/tabular-metadata/#dfn-column-description" class="externalDFN">column descriptions</a> specified therein, <a href="http://www.w3.org/TR/tabular-metadata/#dfn-dialect-description" class="externalDFN">dialect descriptions</a>, <a href="http://www.w3.org/TR/tabular-metadata/#dfn-foreign-key-definition" class="externalDFN">foreign-key-definitions</a> etc.</p>
                </li>
                <li>
                  <p>Insert the following name-value pair into <a>object</a> <var>T</var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><code>row</code></dd>
                    <dt>value</dt>
                    <dd><var>A<sub>R</sub></var></dd>
                  </dl>
                  <p>where <var>A<sub>R</sub></var> is an <a>array</a> into which the <a title="object">objects</a> describing the <a title="row">rows</a> will be subsequently inserted.</p>
                </li>
                <li>
                  <p>Each <a>row</a> within the <a title="annotated table">table</a> is processed sequentially in order. For each <a>row</a> in the current <a title="annotated table">table</a>:</p>
                  <ol class="algorithm">
                    <li>
                      <p>Insert an empty <a>object</a> <var>R</var> into the <a>array</a> <var>A<sub>R</sub></var> to represent the <a>row</a>.</p>
                    </li>
                    <li>
                      <p>Specify the <a>row number</a> <var>n</var> for the <a>row</a>; insert the following name-value pair into <a>object</a> <var>R</var>:</p>
                      <dl class="nvp">
                        <dt>name</dt>
                        <dd><code>rownum</code></dd>
                        <dt>value</dt>
                        <dd><var>n</var></dd>
                      </dl>
                    </li>
                    <li>
                      <p>Specify the <a>row source number</a> <var>n<sub>source</sub></var> for the <a>row</a> within the source CSV+ file <var>URL</var> using a fragment-identifier as specified in [[RFC7111]]; if <a>row source number</a> is not <code>null</code>, insert the following name-value pair into <a>object</a> <var>R</var>:</p>
                      <dl class="nvp">
                        <dt>name</dt>
                        <dd><code>url</code></dd>
                        <dt>value</dt>
                        <dd><var>URL</var><code>#row=</code><var>n<sub>source</sub></var></dd>
                      </dl>
                    </li>
                    <li>
                      <p>Insert the following name-value pair into <a>object</a> <var>R</var>:</p>
                      <dl class="nvp">
                        <dt>name</dt>
                        <dd><code>describes</code></dd>
                        <dt>value</dt>
                        <dd><var>A</var></dd>
                      </dl>
                      <p>where <var>A</var> is an <a>array</a>. The <a title="object">objects</a> containing the name-value pairs associated with the <a title="cell value">cell values</a> will be subsequently inserted into this <a>array</a>.</p>
                    </li>
                    <li>
                      <p>The <a title="subject">subject(s)</a> described by each <a>row</a> are determined according to the <a>aboutUrl</a> property for each <a>cell</a> in the current <a>row</a>. Where <a>aboutUrl</a> is undefined, a default <a>subject</a> for the <a>row</a> is used.</p>

                      <p class="note">A <a>row</a> MAY describe multiple interrelated <a title="subject">subjects</a>; where the <a>valueUrl</a> property for one cell matches the <a>aboutUrl</a> property for another <a>cell</a> in the same <a>row</a>.</p>
                      
                      <p>Determine the unique <a title="subject">subjects</a> for the current <a>row</a>—including a default <a>subject</a> if <a>aboutUrl</a> is unspecified for any <a title="cell">cells</a> in the <a>row</a>.</p>
                    </li>
                    <li>
                      <p>Generate a sequence of <var>S<sub>i</sub></var> <a title="object">objects</a>, each corresponding to <a>subject</a> <var>i</var> of the current row, as
                        described in <a href="#gen-subj-cells"></a>.</p>
                    </li>
                    <li>
                      <p>Transform the sequence <var>S<sub>i</sub></var> into the final sequence of possibly nested <a title="object">objects</a> for the current row, as described in <a href="#nesting-objects"></a>.</p>
                    </li>
                    <li>
                      <p>Insert each <a>object</a> <var>S<sub>i</sub></var> into <a>array</a> <var>A</var>.</p>
                    </li>
                  </ol>
                </li>
              </ol>
            </li>
          </ol>
        </section>
      </section>

      <section id="gen-subj-cells">
          <h2>Generating Objects</h2>

          <p>The steps in the algorithm defined herein apply to both <a title="standard mode">standard</a> <em>and</em> <a title="minimal mode">minimal</a> modes.</p>

          <p>This algorithm generates a sequence of <var>S<sub>i</sub></var> <a title="object">objects</a>, each corresponding to <a>subject</a> <var>i</var> of the current row. The algorithm inserts name-value pairs into <var>S<sub>i</sub></var> depending on the cell values as outlined in the following steps.</p>
          <p>For each <a>subject</a> that the current <a>row</a> describes where at least one of the <a title="cell">cells</a> that refers to that <a>subject</a> has a <a title="cell value">value</a> that is not <code>null</code>, and is associated with a <a>column</a> where the value of property <a href="http://www.w3.org/TR/tabular-metadata/#column-suppressOutput"><code>suppressOutput</code></a> has value <var>false</var>:</p>
          <ol class="algorithm">
            <li>
              <p>Create an empty <a>object</a> <var>S<sub>i</sub></var> to represent the <a>subject</a> <var>i</var>.</p>
              <p>(<var>i</var> is the index number with values from <var>1</var> to <var>n</var>, where <var>n</var> is the number of <a title="subject">subjects</a> for the <a>row</a>)</p>
              <p><a title="subject">Subject</a> <var>i</var> is identified according to the <a>aboutUrl</a> property of its associated <a title="cell">cells</a>: <var>I<sub>s</sub></var>. For a <em>default</em> <a>subject</a> where <a>aboutUrl</a> is not specified by its <a title="cell">cells</a>, <var>I<sub>s</sub></var> is <code>null</code>.</p>
            </li>
            <li>
              <p>If the identifier for <a>subject</a> <var>i</var>, <var>@id<sub>s</sub></var>, is not <code>null</code>, then insert the following name-value pair into <a>object</a> <var>S<sub>i</sub></var>:</p>
              <dl class="nvp">
                <dt>name</dt>
                <dd><code>@id</code></dd>
                <dt>value</dt>
                <dd><var>I<sub>s</sub></var></dd>
              </dl>
            </li>
            <li>
              <p>Each <a>cell</a> referring to <a>subject</a> <var>i</var> is then processed sequentially according to the order of the <a title="column">columns</a> (e.g. <var>1</var> to <var>n</var>).</p>
              <p>For each <a>cell</a> referring to <a>subject</a> <var>i</var>, where the value of property <a href="http://www.w3.org/TR/tabular-metadata/#column-suppressOutput"><code>suppressOutput</code></a> for the <a>column</a> associated with that <a>cell</a> is <var>false</var>, insert a name-value pair into <a>object</a> <var>S<sub>i</sub></var> as described below:</p>
              <ol class="algorithm">
                <li>
                  <p>If the value of <a>propertyUrl</a> for the <a>cell</a> is not <code>null</code>, then <a>name</a> <var>N</var> takes the value of <a>propertyUrl</a>.</p>
                  <p>Else, <a>name</a> <var>N</var> takes the value of the <a href="http://www.w3.org/TR/tabular-metadata/#column-name"><code>name</code></a> property for the column associated with the <a>cell</a>.</p>
                </li>
                <li>
                  <p>If the <a>valueUrl</a> for the current <a>cell</a> is not <code>null</code>, then insert the following name-value pair into <a>object</a> <var>S<sub>i</sub></var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><var>N</var></dd>
                    <dt>value</dt>
                    <dd><var>V<sub>url</sub></var></dd>
                  </dl>
                  <p>where <var>V<sub>url</sub></var> is the value of <a>valueUrl</a> property for the current <a>cell</a>, is expressed as a string in the JSON output.</p>
                </li>
                <li>
                  <p>Else, if the <a>cell</a> specifies a <a href="http://www.w3.org/TR/tabular-metadata/#cell-separator"><code>separator</code></a> property and the <a>cell value</a> is not an empty sequence, then the <a>cell value</a> provides a sequence of values for inclusion within the JSON output; insert an <a>array</a> <var>A<sub>v</sub></var> containing each value <var>V</var> of the sequence into <a>object</a> <var>S<sub>i</sub></var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><var>N</var></dd>
                    <dt>value</dt>
                    <dd><var>A<sub>v</sub></var></dd>
                  </dl>
                  <p class="note">In the case where a sequence of values is provided, the <code>datatype</code> applies to all members of the sequence.</p>
                  <p class="note">Since <a title="array">arrays</a> are implicitly <em>ordered</em> in JSON, the <a href="http://www.w3.org/TR/tabular-metadata/#cell-ordered"><code>ordered</code></a> property, if specified, has no effect on the JSON output.</p>
                </li>
                <li>
                  <p>Else, if the <a>cell value</a> is not <code>null</code>, then the <a>cell value</a> provides a single value <var>V</var> for inclusion within the JSON output; insert the following name-value pair into <a>object</a> <var>S<sub>i</sub></var>:</p>
                  <dl class="nvp">
                    <dt>name</dt>
                    <dd><var>N</var></dd>
                    <dt>value</dt>
                    <dd><var>V</var></dd>
                  </dl>

                  <p>Value <var>V</var> derived from the <a title="cell value">cell values</a> MUST be expressed in the JSON output according to the <a href="http://www.w3.org/TR/tabular-metadata/#cell-datatype"><code>datatype</code></a> property of the cell as defined below: <a href="#datatypes">Interpreting datatypes</a>.</p> 
                </li>
              </ol>
            </li>
            <li>
              <p>If <a>name</a> <var>N</var> occurs more than once within <a>object</a> <var>S<sub>i</sub></var>, the name-value pairs from each occurrence of <a>name</a> <var>N</var> MUST be compacted to form a single name-value pair with <a>name</a> <var>N</var> and whose value is an array containing all values from each of those name-value pairs.</p>
            </li>
          </ol>
      </section>

      <section id="nesting-objects">
        <h2>Generating Nested Objects</h2>

        <p>The steps in the algorithm defined here apply to both <a title="standard mode">standard</a> <em>and</em> <a title="minimal mode">minimal</a> modes.</p>

        <p>This algorithm considers a sequence of <var>S<sub>i</sub></var> <a title="object">objects</a>, each corresponding to <a>subject</a> <var>i</var> of the current row, and as generated by <a href="#gen-subj-cells"></a>. It generates a new <var>S<sub>i</sub></var> sequence, where, if possible, an <var>S<sub>j</sub></var> with an explicit <code>@id<sub>i</sub></code>, referred to <em>once and only once</em> by another object <var>S<sub>k</sub></var> through a reference originating from an <code>valueUrl</code> value, is directly added into <var>S<sub>k</sub></var>.</p>

        <div class="issue" data-number="299">
          <p>Do we want to create nested objects in the JSON output where a row describes multiple resources?</p>
          <p>Nesting relies on recursion through the <a title="object">objects</a> defined for each <a>subject</a> within a <a>row</a> in order to "plug" related <a title="object">objects</a> together in a hierarchy. This adds a little complexity - but is worth doing (I think) to create graph-like output familiar to most JSON users. Without this recursion, the JSON output would just be a flat set of <a title="object">objects</a>.</p>
          <p>The text below is outdated and is only a placeholder for now; the issue comments contain some proposals for a possible replacement of this text.</p>
        </div>



        <p>For each <a>subject</a> <var>i</var> associated with the current <a>row</a>, recurse through the name-value pairs in the <a title="object">objects</a> associated with that <a>row</a> to determine if <a>subject</a> <var>i</var> is referenced—excluding the <a>object</a> describing <a>subject</a> <var>i</var> itself (<a>object</a> <var>S<sub>i</sub></var>).</p>
        <p>If <a>subject</a> <var>i</var> is referenced once <em>and only once</em>, then <a>object</a> <var>S<sub>i</sub></var> becomes the value of the referring name-value pair in place of the reference in order to create a nested <a>object</a>.</p>


      </section>


      <section id="datatypes">
        <h3>Interpreting datatypes</h3>
        <p><a title="cell value">Cell values</a> are expressed in the JSON output according to the cell's <a href="http://www.w3.org/TR/tabular-metadata/#cell-datatype"><code>datatype</code></a> property. The relationship between the value of the <a href="http://www.w3.org/TR/tabular-metadata/#cell-datatype"><code>datatype</code></a> property and the primitive types supported by JSON (as specified in [[!RFC7159]]) is provided in the table below.</p>

        <div class="note">
          <p>Instances of JSON reserved characters within string values MUST be escaped as defined in [[!RFC7159]].</p>
          <p>JSON has no native support for expressing language information; therefore the <a href="http://www.w3.org/TR/tabular-metadata/#cell-language"><code>lang</code></a> property has no effect on the JSON outut.</p>
        </div>
        
        <div class="note">
          <p>A cell's <a href="http://www.w3.org/TR/tabular-metadata/#datatype-format"><code>format</code></a> property is irrelevant to the conversion procedure defined in this specification; the <a>cell value</a> has already been parsed from the contents the <a>cell</a> according to the <a href="http://www.w3.org/TR/tabular-metadata/#datatype-format"><code>format</code></a> property.</p>
          <p>Where the contents of the <a>cell</a> cannot be parsed, or other validation errors occur, <a>cell errors</a> will be provided. It is an implementation decision to determine how conversion applications should proceed in the event that <a>cell errors</a> are encountered.</p>
        </div>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th><code>datatype</code></th><th>JSON primitive type</th><th>Remarks</th></tr>
          </thead>
          <tbody>
            <tr><td><code>number</code></td><td>number</td><td></td></tr>
            <tr><td><code>binary</code></td><td>string</td><td><code>binary</code> is considered to be equivalent to <code>xsd:base64Binary</code></td></tr>
            <tr><td><code>datetime</code></td><td>string</td><td></td></tr>
            <tr><td><code>any</code></td><td>string</td><td></td></tr>
            <tr><td><code>xml</code></td><td>string</td><td></td></tr>
            <tr><td><code>html</code></td><td>string</td><td></td></tr>
            <tr><td><code>json</code></td><td>string</td><td></td></tr>
            <tr><td><code>anyAtomicType</code></td><td>string</td><td></td></tr>
            <tr><td><code>anyURI</code></td><td>string</td><td></td></tr>
            <tr><td><code>base64Binary</code></td><td>string</td><td></td></tr>
            <tr><td><code>boolean</code></td><td>boolean</td><td></td></tr>
            <tr><td><code>date</code></td><td>string</td><td></td></tr>
            <tr><td><code>dateTime</code></td><td>string</td><td></td></tr>
            <tr><td><code>dateTimeStamp</code></td><td>string</td><td></td></tr>
            <tr><td><code>decimal</code></td><td>number</td><td></td></tr>
            <tr><td><code>integer</code></td><td>number</td><td></td></tr>
            <tr><td><code>long</code></td><td>number</td><td></td></tr>
            <tr><td><code>int</code></td><td>number</td><td></td></tr>
            <tr><td><code>short</code></td><td>number</td><td></td></tr>
            <tr><td><code>byte</code></td><td>number</td><td></td></tr>
            <tr><td><code>nonNegativeInteger</code></td><td>number</td><td></td></tr>
            <tr><td><code>positiveInteger</code></td><td>number</td><td></td></tr>
            <tr><td><code>unsignedLong</code></td><td>number</td><td></td></tr>
            <tr><td><code>unsignedInt</code></td><td>number</td><td></td></tr>
            <tr><td><code>unsignedShort</code></td><td>number</td><td></td></tr>
            <tr><td><code>unsignedByte</code></td><td>number</td><td></td></tr>
            <tr><td><code>nonPositiveInteger</code></td><td>number</td><td></td></tr>
            <tr><td><code>negativeInteger</code></td><td>number</td><td></td></tr>
            <tr><td><code>double</code></td><td>number</td><td></td></tr>
            <tr><td><code>duration</code></td><td>string</td><td></td></tr>
            <tr><td><code>dayTimeDuration</code></td><td>string</td><td></td></tr>
            <tr><td><code>yearMonthDuration</code></td><td>string</td><td></td></tr>
            <tr><td><code>float</code></td><td>number</td><td></td></tr>
            <tr><td><code>gDay</code></td><td>string</td><td></td></tr>
            <tr><td><code>gMonth</code></td><td>string</td><td></td></tr>
            <tr><td><code>gMonthDay</code></td><td>string</td><td></td></tr>
            <tr><td><code>gYear</code></td><td>string</td><td></td></tr>
            <tr><td><code>gYearMonth</code></td><td>string</td><td></td></tr>
            <tr><td><code>hexBinary</code></td><td>string</td><td></td></tr>
            <tr><td><code>QName</code></td><td>string</td><td></td></tr>
            <tr><td><code>string</code></td><td>string</td><td></td></tr>
            <tr><td><code>normalizedString</code></td><td>string</td><td></td></tr>
            <tr><td><code>token</code></td><td>string</td><td></td></tr>
            <tr><td><code>language</code></td><td>string</td><td></td></tr>
            <tr><td><code>Name</code></td><td>string</td><td></td></tr>
            <tr><td><code>NCName</code></td><td>string</td><td></td></tr>
            <tr><td><code>time</code></td><td>string</td><td></td></tr>
          </tbody>
        </table>
      </section>

    </section>

    <section id="examples" class="informative">
      <h2>Examples</h2>

      <p class="note">Each of the examples expresses more complex conversions - it is recommended that readers of this specification work through the examples in sequential order.</p>

      <section id="example-countries">
        <h3>Simple example</h3>
        <p>
          This example comprises a single <a>annotated table</a> containing information attributes about countries; country code, position (latitude, longitude) and name. Whilst the input CSV+ file, published at <code>http://example.org/countries.csv</code>, includes a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-header-line" class="externalDFN">header line</a>, no further metadata annotations are given. The CSV+ file is provided below:
        </p>
        <pre class="example"
             id="example-countries-csv+"
             title="http://example.org/countries.csv"
             data-include="../examples/countries.csv"
             data-oninclude="updateExample">
        </pre>

        <p>The <a>annotated table</a> generated from parsing the CSV+ file is shown below and provides the basis for the conversion to JSON.</p>

        <p>Annotations for the resulting <a title="annotated table">table</a> <var>T</var>, with 4 columns and 3 rows, are shown below:</p>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="3">core annotations</th><th rowspan="2" colspan="2">annotations</th></tr>
            <tr><th><code>url</code></th><th>columns</th><th>rows</th></tr>
          </thead>
          <tbody>
            <tr><td><var>T</var></td><td><code>http://example.org/countries.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var></td><td><var>R1</var>, <var>R2</var>, <var>R3</var></td><td></td><td></td></tr>
          </tbody>
        </table>

        <p>Annotations for the <a title="column">columns</a>, <a title="row">rows</a> and <a title="cell">cells</a> in <a title="annotated table">table</a> <var>T</var> are shown in the tables below.</p>

        <p><a title="column">Column</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th><th colspan="2">annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th><code>name</code></th><th><code>title</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var>, <var>C3.1</var></td><td><code>countryCode</code></td><td><code>countryCode</code></td></tr>
            <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var>, <var>C3.2</var></td><td><code>latitude</code></td><td><code>latitude</code></td></tr>
            <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var>, <var>C3.3</var></td><td><code>longitude</code></td><td><code>longitude</code></td></tr>
            <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var>, <var>C3.4</var></td><td><code>name</code></td><td><code>name</code></td></tr>
          </tbody>
        </table>

        <p><a title="row">Row</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
          </thead>
          <tbody>
            <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var></td></tr>
            <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var></td></tr>
            <tr><td><var>R3</var></td><td><var>T</var></td><td>3</td><td>4</td><td><var>C3.1</var>, <var>C3.2</var>, <var>C3.3</var>, <var>C3.4</var></td></tr>
          </tbody>
        </table>

        <p><a title="cell">Cell</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="6">core annotations</th><th>annotations</th></tr>
            <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>errors</th><th><code>propertyUrl</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"AD"</code></td><td><code>"AD"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#countryCode&gt;</code></td></tr>
            <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"42.546245"</code></td><td><code>"42.546245"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#latitude&gt;</code></td></tr>
            <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"1.601554"</code></td><td><code>"1.601554"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#longitude&gt;</code></td></tr>
            <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"Andorra"</code></td><td><code>"Andorra"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#name&gt;</code></td></tr>

            <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"AE"</code></td><td><code>"AE"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#countryCode&gt;</code></td></tr>
            <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"23.424076"</code></td><td><code>"23.424076"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#latitude&gt;</code></td></tr>
            <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"53.847818"</code></td><td><code>"53.847818"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#longitude&gt;</code></td></tr>
            <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"United Arab Emirates"</code></td><td><code>"United Arab Emirates"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#name&gt;</code></td></tr>

            <tr><td><var>C3.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R3</var></td><td><code>"AF"</code></td><td><code>"AF"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#countryCode&gt;</code></td></tr>
            <tr><td><var>C3.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R3</var></td><td><code>"33.93911"</code></td><td><code>"33.93911"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#latitude&gt;</code></td></tr>
            <tr><td><var>C3.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R3</var></td><td><code>"67.709953"</code></td><td><code>"67.709953"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#longitude&gt;</code></td></tr>
            <tr><td><var>C3.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R3</var></td><td><code>"Afghanistan"</code></td><td><code>"Afghanistan"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#name&gt;</code></td></tr>
          </tbody>
        </table>

        <p class="note">As the value of <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> has not been set within the metadata description it defaults to the URI Template (see [[RFC6570]]) <code>#{<em>[column-name]</em>}</code>, where <code><em>[column-name]</em></code> is the value of the <a href="http://www.w3.org/TR/tabular-metadata/#column-name"><code>name</code></a> property for the column associated with the cell. For example, the value of <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> for all <a title="cell">cells</a> in <a>column</a> <var>C1</var> (<code>"name": "countryCode"</code>) is <code>http://example.org/countries.csv#countryCode</code>.</p>

        <p><strong><a title="minimal mode">Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-countries-minimal-json"
             title="http://example.org/countries-minimal.json"
             data-include="../examples/countries-minimal.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>The <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> property has not been set for cells in table <var>T</var> (<code>{ "url": "http://example.org/countries.csv"}</code>) - <a title="cell">cells</a> in a given <a>row</a> where <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> has not been specified are assumed to refer to the same <a>subject</a> and so the name-value pairs associated with the <a title="cell value">cell values</a> of that <a>row</a> occur within the same <a>object</a>.</p>
          <p>Given that the <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> has not been explicitly set for cells in table <var>T</var> (<code>{ "url": "http://example.org/countries.csv"}</code>), the simplified <a>name</a> is used in the name-value pairs; e.g. <code>countryCode</code> rather than <code>http://example.org/countries.csv#countryCode</code></p>
        </div>

        <p><strong><a title="standard mode">Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-countries-standard-json"
             title="http://example.org/countries-standard.json"
             data-include="../examples/countries-standard.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>Even though the <a title="annotated table">table</a> was defined in isolation, the <a title="annotated table">table</a> is wrapped in a <a>table group</a>.</p>
          <p>The name-value pair with <a>name</a> <code>url</code> provides reference to the original CSV+ file and to specific <a title="row">rows</a> therein.</p>
          <p>The <a>row number</a> is provided for each <a>row</a> using name-value pair with <a>name</a> <code>rownum</code>.</p>
          <p>The <a>object</a> containing the name-values pairs associated with the <a title="cell value">cell values</a> of a <a>row</a> are related to the <a>object</a> for that <a>row</a> using the name-value pair with <a>name</a> <code>describes</code>.</p>
        </div>

      </section>
      <section id="example-tree-ops-ext">
        <h3>Example with single table and rich annotations</h3>
        <p>
          This example is based on <a href="http://www.w3.org/TR/csvw-ucr/#UC-PaloAltoTreeData">Use Case #11 - City of Palo Alto Tree Data</a> and comprises a single <a>annotated table</a> describing an inventory of tree maintenance operations. The input CSV+ file, published at <code>http://example.org/tree-ops-ext.csv</code>, and the associated metadata description <code>http://example.org/tree-ops-ext.csv-metadata.json</code> are provided below:
        </p>
        <pre class="example"
             id="example-tree-ops-ext-csv+"
             title="http://example.org/tree-ops-ext.csv"
             data-include="../examples/tree-ops-ext.csv"
             data-oninclude="updateExample">
        </pre>
        <pre class="example highlight"
             id="example-tree-ops-ext-metadata"
             title="http://example.org/tree-ops-ext.csv-metadata.json"
             data-include="../examples/tree-ops-ext.csv-metadata.json"
             data-oninclude="updateExample">
        </pre>

        <p class="note">The <code>notes</code> annotation in the metadata description uses the <a href="http://www.openannotation.org/spec/core/">Open Annotation data model</a> currently under development within the <a href="http://www.w3.org/annotation/">Web Annotations Working Group</a>. This is purely illustrative; no constraints are placed on the value of the <code>notes</code> annotation.</p>

        <p>The <a>annotated table</a> generated from parsing the CSV+ file and associated metadata is shown below and provides the basis for the conversion to JSON.</p>

        <p>Annotations for the resulting <a title="annotated table">table</a> <var>T</var>, with 9 <a title="column">columns</a> and 3 <a title="row">rows</a>, are shown below:</p>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="3">core annotations</th><th rowspan="2" colspan="2">annotations</th></tr>
            <tr><th><code>url</code></th><th>columns</th><th>rows</th></tr>
          </thead>
          <tbody>
            <tr><td><var>T</var></td><td><code>http://example.org/tree-ops-ext.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var>, <var>C5</var>, <var>C6</var>, <var>C7</var>, <var>C8</var>, <var>C9</var></td><td><var>R1</var>, <var>R2</var>, <var>R3</var></td><td><strong><code>@id</code></strong></td><td><code>&lt;http://example.org/tree-ops-ext&gt;</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:title</code></strong></td><td><code>"Tree Operations"</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:keywords</code></strong></td><td><code>["tree", "street", "maintenance"]</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:publisher</code></strong></td><td><code>[{ "schema:name": "Example Municipality", "schema:url": { "@id": "http://example.org" } }]</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:license</code></strong></td><td><code>&lt;http://opendefinition.org/licenses/cc-by/&gt;</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:modified</code></strong></td><td><code>"2010-12-31"</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>notes</code></strong></td><td><code>[{ "@type": "oa:Annotation", ... }]</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>primaryKey</code></strong></td><td><var>C1</var></td></tr>
          </tbody>
        </table>

        <div class="note">
          <p>The value of the <code>notes</code> annotation has been shortened for clarity in the table above.
        </div>

        <p>Annotations for the <a title="column">columns</a>, <a title="row">rows</a> and <a title="cell">cells</a> in <a title="annotated table">table</a> <var>T</var> are shown in the tables below.</p>

        <p><a title="column">Column</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th><th colspan="5">annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th><code>name</code></th><th><code>title</code></th><th><code>required</code></th><th><code>suppressOutput</code></th><th><code>dc:description</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var>, <var>C3.1</var></td><td><code>GID</code></td><td><code>GID</code>, <code>Generic Identifier</code></td><td><code>true</code></td><td><code>true</code></td><td><code>An identifier for the operation on a tree.</code></td></tr>
            <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var>, <var>C3.2</var></td><td><code>on_street</code></td><td><code>On Street</code></td><td></td><td></td><td><code>The street that the tree is on.</code></td></tr>
            <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var>, <var>C3.3</var></td><td><code>species</code></td><td><code>Species</code></td><td></td><td></td><td><code>The species of the tree.</code></td></tr>
            <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var>, <var>C3.4</var></td><td><code>trim_cycle</code></td><td><code>Trim Cycle</code></td><td></td><td></td><td><code>The operation performed on the tree.</code></td></tr>
            <tr><td><var>C5</var></td><td><var>T</var></td><td>5</td><td>5</td><td><var>C1.5</var>, <var>C2.5</var>, <var>C3.5</var></td><td><code>dbh</code></td><td><code>Diameter at Breast Ht</code></td><td></td><td></td><td><code>Diameter at Breast Height (DBH) of the tree (in feet), measured 4.5ft above ground.</code></td></tr>
            <tr><td><var>C6</var></td><td><var>T</var></td><td>6</td><td>6</td><td><var>C1.6</var>, <var>C2.6</var>, <var>C3.6</var></td><td><code>inventory_date</code></td><td><code>Inventory Date</code></td><td></td><td></td><td><code>The date of the operation that was performed.</code></td></tr>
            <tr><td><var>C7</var></td><td><var>T</var></td><td>7</td><td>7</td><td><var>C1.7</var>, <var>C2.7</var>, <var>C3.7</var></td><td><code>comments</code></td><td><code>Comments</code></td><td></td><td></td><td><code>Supplementary comments relating to the operation or tree.</code></td></tr>
            <tr><td><var>C8</var></td><td><var>T</var></td><td>8</td><td>8</td><td><var>C1.8</var>, <var>C2.8</var>, <var>C3.8</var></td><td><code>protected</code></td><td><code>Protected</code></td><td></td><td></td><td><code>Indication (YES / NO) whether the tree is subject to a protection order.</code></td></tr>
            <tr><td><var>C9</var></td><td><var>T</var></td><td>9</td><td>9</td><td><var>C1.9</var>, <var>C2.9</var>, <var>C3.9</var></td><td><code>kml</code></td><td><code>KML</code></td><td></td><td></td><td><code>KML-encoded description of tree location.</code></td></tr>
          </tbody>
        </table>

        <p class="note">In this example, output for <a>column</a> <var>C1</var> (<code>GID</code>) is not required; note the <a href="http://www.w3.org/TR/tabular-metadata/#column-suppressOutput"><code>suppressOutput</code></a> annotation on this <a>column</a>.</p>

        <p><a title="row">Row</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
          </thead>
          <tbody>
            <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var>, <var>C1.5</var>, <var>C1.6</var>, <var>C1.7</var>, <var>C1.8</var>, <var>C1.9</var></td></tr>
            <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var>, <var>C2.5</var>, <var>C2.6</var>, <var>C2.7</var>, <var>C2.8</var>, <var>C2.9</var></td></tr>
            <tr><td><var>R3</var></td><td><var>T</var></td><td>3</td><td>4</td><td><var>C3.1</var>, <var>C3.2</var>, <var>C3.3</var>, <var>C3.4</var>, <var>C3.5</var>, <var>C3.6</var>, <var>C3.7</var>, <var>C3.8</var>, <var>C3.9</var></td></tr>
          </tbody>
        </table>

        <p><a title="cell">Cell</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="6">core annotations</th><th colspan="5">annotations</th></tr>
            <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>errors</th><th><code>lang</code></th><th><code>datatype</code></th><th><code>format</code></th><th><code>default</code></th><th><code>aboutUrl</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"1"</code></td><td><code>"1"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>http://example.org/tree-ops-ext#gid-1</code></td></tr>
            <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"ADDISON AV"</code></td><td><code>"ADDISON AV"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"Celtis australis"</code></td><td><code>"Celtis australis"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code></td><td></td><td><code>en</code></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R1</var></td><td><code>"11"</code></td><td><code>11</code></td><td></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R1</var></td><td><code>"10/18/2010"</code></td><td><code>2010-10-18</code></td><td></td><td></td><td><code>date</code></td><td><code>M/d/yyyy</code></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>false</code></td><td></td><td></td><td><code>boolean</code></td><td><code>YES|NO</code></td><td><code>"NO"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R1</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td></td><td></td><td><code>xml</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>

            <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"2"</code></td><td><code>"2"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"EMERSON ST"</code></td><td><code>"EMERSON ST"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"Liquidambar styraciflua"</code></td><td><code>"Liquidambar styraciflua"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code></td><td></td><td><code>en</code></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R2</var></td><td><code>"11"</code></td><td><code>11</code></td><td></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R2</var></td><td><code>"6/2/2010"</code></td><td><code>2010-06-02</code></td><td></td><td></td><td><code>date</code></td><td><code>M/d/yyyy</code></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>false</code></td><td></td><td></td><td><code>boolean</code></td><td><code>YES|NO</code></td><td><code>"NO"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R2</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td></td><td></td><td><code>xml</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>

            <tr><td><var>C3.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R3</var></td><td><code>"6"</code></td><td><code>"6"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R3</var></td><td><code>"ADDISON AV"</code></td><td><code>"ADDISON AV"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R3</var></td><td><code>"Robinia pseudoacacia"</code></td><td><code>"Robinia pseudoacacia"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R3</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code></td><td></td><td><code>en</code></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R3</var></td><td><code>"29"</code></td><td><code>29</code></td><td></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R3</var></td><td><code>"6/1/2010"</code></td><td><code>2010-06-01</code></td><td></td><td></td><td><code>date</code></td><td><code>M/d/yyyy</code></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R3</var></td><td><code>"cavity or decay; trunk decay; codominant leaders; included bark; large leader or limb decay; previous failure root damage; root decay;  beware of BEES"</code></td><td><code>"cavity or decay"</code>, <code>"trunk decay"</code>, <code>"codominant leaders"</code>, <code>"included bark"</code>, <code>"large leader or limb decay"</code>, <code>"previous failure root damage"</code>, <code>"root decay"</code>, <code>"beware of BEES"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R3</var></td><td><code>"YES"</code></td><td><code>true</code></td><td></td><td></td><td><code>boolean</code></td><td><code>YES|NO</code></td><td><code>"NO"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R3</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td></td><td></td><td><code>xml</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
          </tbody>
        </table>

        <p class="note">For brevity, the <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> is not shown in the table of <a>cell</a> annotations. Where not explicitly set, the value of <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> defaults to the URI Template (see [[RFC6570]]) <code>#{<em>[column-name]</em>}</code>, where <code><em>[column-name]</em></code> is the value of the <a href="http://www.w3.org/TR/tabular-metadata/#column-name"><code>name</code></a> property for the <a>column</a> associated with the <a>cell</a>. For example, the value of <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> for all <a title="cell">cells</a> in <a>column</a> <var>C2</var> (<code>"name": "on_street"</code>) is <code>http://example.org/tree-ops-ext.csv#on_street</code>.</p>

        <p><strong><a title="minimal mode">Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-tree-ops-ext-minimal-json"
             title="http://example.org/tree-ops-ext-minimal.json"
             data-include="../examples/tree-ops-ext-minimal.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>The <a>subject</a> described by each <a>row</a> is explcitly defined using the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> property; e.g. the <a>subject</a> of <a>row</a> <var>R1</var> is <code>http://example.org/tree-ops-ext#gid-1</code>.</p>
          <p>Output for <a>column</a> <var>C1</var> (<code>{ "name": "GID" }</code>) is not included as <a>column</a> property <a href="http://www.w3.org/TR/tabular-metadata/#column-suppressOutput"><code>suppressOutput</code></a> has value <var>true</var>.</p>
          <p><a Title="cell">Cells</a> <var>C1.7</var> and <var>C2.7</var> (<a title="row">rows</a> <var>R1</var> and <var>R2</var>; <a>column</a>, <code>{ "name": "comments" }</code>) have <code>null</code> <a title="cell value">values</a> - no output is included for these <a title="cell">cells</a>.</p>
          <p><a Title="cell">Cell</a> <var>C3.7</var> (<a>row</a> <var>R3</var>; <a>column</a>, <code>{ "name": "comments" }</code>) contains a sequence of values; the set of values are included in an <a>array</a>.</p>
        </div>

        <p><strong><a title="standard mode">Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-tree-ops-ext-standard-json"
             title="http://example.org/tree-ops-ext-standard.json"
             data-include="../examples/tree-ops-ext-standard.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p><a title="annotated table">Table</a> <var>T</var> (<code>{ "url": "http://example.org/tree-ops-ext.csv"}</code>) has been explicitly identified: <code>{ "@id": "&lt;http://exmple.org/tree-ops-ext&gt;"}</code>.</p>
          <p><a title="common properties">Common properties</a> and <a>notes</a> specified for <a title="annotated table">table</a> <var>T</var> (<code>{ "url": "http://example.org/tree-ops-ext.csv"}</code>) are included in the output.</p>
        </div>

      </section>

      <section id="example-events-listing">
        <h3>Example with single table and using <em>virtual columns</em> to produce multiple subjects per row</h3>
        <p>
          This example uses a single <a>annotated table</a> describing a listing of music events. Each <a>row</a> from the CSV+ file corresponds to three resources; the music event itself, the location where that event occurs and the offer to sell tickets for that event. The goal is to convert the CSV content into <a href="http://schema.org">schema.org</a> markup that a search engine such as <a href="http://www.google.com">Google</a>can use to index music events. Details of how Google expects this information to be structured can be found <a href="https://support.google.com/webmasters/answer/4620133?hl=en">here</a>.
        </p>
        <p> 
          The input CSV+ file, published at <code>http://example.org/events-listing.csv</code>, and the associated metadata description <code>http://example.org/events-listing.csv-metadata.json</code> are provided below:
        </p>
        <pre class="example"
             id="example-events-listing-csv+"
             title="http://example.org/events-listing.csv"
             data-include="../examples/events-listing.csv"
             data-oninclude="updateExample">
        </pre>
        <pre class="example highlight"
             id="example-events-listing-metadata"
             title="http://example.org/events-listing.csv-metadata.json"
             data-include="../examples/events-listing.csv-metadata.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>
            The CSV to JSON translation is limited to providing one statement, or triple, per <a>column</a> in the <a title="annotated table">table</a>. The target <code>schema.org</code> markup requires 10 statements to describe each event. As the base CSV+ file contains 5 columns, an additional 5 <em>virtual <a title="column">columns</a></em> have been added in order to provide for the full complement of statements - including the relationships between the 3 resources (event, location and offer) described by each <a>row</a> of the <a title="annotated table">table</a>. Note that the <a href="http://www.w3.org/TR/tabular-metadata/#column-virtual"><code>virtual</code></a> property is set to <var>true</var> for these <em>virtual <a title="column">columns</a></em>.
          </p>
          <p>
            Furthermore, note that no attempt is made to reconcile between locations or offers that may be associated with more than one event; every <a>row</a> in the <a title="annotated table">table</a> will create both a new location resource and offer resource in addition to the event resource. If considered necessary, applications such as <a href="http://openrefine.org">OpenRefine</a> may be used to identify and reconcile duplicate location resources once the JSON output has been generated.
          </p>
        </div>

        <p>The <a>annotated table</a> generated from parsing the CSV+ file and associated metadata is shown below and provides the basis for the conversion to JSON.</p>

        <p>Annotations for the resulting <a title="annotated table">table</a> <var>T</var>, with 10 <a title="column">columns</a> and 2 <a title="row">rows</a>, are shown below:</p>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="3">core annotations</th><th rowspan="2" colspan="2">annotations</th></tr>
            <tr><th><code>url</code></th><th>columns</th><th>rows</th></tr>
          </thead>
          <tbody>
            <tr><td><var>T</var></td><td><code>http://example.org/events-listing.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var>, <var>C5</var>, <var>C6</var>, <var>C7</var>, <var>C8</var>, <var>C9</var>, <var>C10</var></td><td><var>R1</var>, <var>R2</var></td><td></td><td></td></tr>
          </tbody>
        </table>

        <p>Annotations for the <a title="column">columns</a>, <a title="row">rows</a> and <a title="cell">cells</a> in <a title="annotated table">table</a> <var>T</var> are shown in the tables below.</p>

        <p><a title="column">Column</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th><th colspan="3">annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th><code>name</code></th><th><code>title</code></th><th><code>virtual</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var></td><td><code>name</code></td><td><code>Name</code></td><td></td></tr>
            <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var></td><td><code>start-date</code></td><td><code>Start Date</code></td><td></td></tr>
            <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var></td><td><code>location-name</code></td><td><code>Location Name</code></td><td></td></tr>
            <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var></td><td><code>location-address</code></td><td><code>Location Address</code></td><td></td></tr>
            <tr><td><var>C5</var></td><td><var>T</var></td><td>5</td><td>5</td><td><var>C1.5</var>, <var>C2.5</var></td><td><code>ticket-url</code></td><td><code>Ticket Url</code></td><td></td></tr>
            <tr><td><var>C6</var></td><td><var>T</var></td><td>6</td><td>6</td><td><var>C1.6</var>, <var>C2.6</var></td><td><code>type-event</code></td><td></td><td><code>true</code></td></tr>
            <tr><td><var>C7</var></td><td><var>T</var></td><td>7</td><td>7</td><td><var>C1.7</var>, <var>C2.7</var></td><td><code>type-place</code></td><td></td><td><code>true</code></td></tr>
            <tr><td><var>C8</var></td><td><var>T</var></td><td>8</td><td>8</td><td><var>C1.8</var>, <var>C2.8</var></td><td><code>type-offer</code></td><td></td><td><code>true</code></td></tr>
            <tr><td><var>C9</var></td><td><var>T</var></td><td>9</td><td>9</td><td><var>C1.9</var>, <var>C2.9</var></td><td><code>location</code></td><td></td><td><code>true</code></td></tr>
            <tr><td><var>C10</var></td><td><var>T</var></td><td>10</td><td>10</td><td><var>C1.10</var>, <var>C2.10</var></td><td><code>offers</code></td><td></td><td><code>true</code></td></tr>
          </tbody>
        </table>

        <p><a title="row">Row</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
          </thead>
          <tbody>
            <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var>, <var>C1.5</var>, <var>C1.6</var>, <var>C1.7</var>, <var>C1.8</var>, <var>C1.9</var>, <var>C1.10</var></td></tr>
            <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var>, <var>C2.5</var>, <var>C2.6</var>, <var>C2.7</var>, <var>C2.8</var>, <var>C2.9</var>, <var>C2.10</var></td></tr>
          </tbody>
        </table>

        <p><a title="cell">Cell</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="6">core annotations</th><th colspan="5">annotations</th></tr>
            <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>errors</th><th><code>datatype</code></th><th><code>format</code></th><th><code>aboutUrl</code></th><th><code>propertyUrl</code></th><th><code>valueUrl</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"B.B. King"</code></td><td><code>"B.B. King"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
            <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"2014-04-12T19:30"</code></td><td><code>2014-04-12T19:30:00</code></td><td></td><td><code>datetime</code></td><td><code>yyyy-MM-ddTHH:mm:ss</code></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:startDate</code></td><td></td></tr>
            <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"Lupo’s Heartbreak Hotel"</code></td><td><code>"Lupo’s Heartbreak Hotel"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
            <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"79 Washington St., Providence, RI"</code></td><td><code>"79 Washington St., Providence, RI"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>schema:address</code></td><td></td></tr>
            <tr><td><var>C1.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R1</var></td><td><code>"https://www.etix.com/ticket/1771656"</code></td><td><code>&lt;https://www.etix.com/ticket/1771656&gt;</code></td><td></td><td><code>anyURI</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td><td><code>schema:url</code></td><td></td></tr>
            <tr><td><var>C1.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:MusicEvent</code></td></tr>
            <tr><td><var>C1.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Place</code></td></tr>
            <tr><td><var>C1.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Offer</code></td></tr>
            <tr><td><var>C1.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:location</code></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td></tr>
            <tr><td><var>C1.10</var></td><td><var>T</var></td><td><var>C10</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:offers</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td></tr>

            <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"B.B. King"</code></td><td><code>"B.B. King"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
            <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"2014-04-13T20:00"</code></td><td><code>2014-04-13T20:00:00</code></td><td></td><td><code>datetime</code></td><td><code>yyyy-MM-ddTHH:mm:ss</code></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:startDate</code></td><td></td></tr>
            <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"Lynn Auditorium"</code></td><td><code>"Lynn Auditorium"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
            <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"Lynn, MA, 01901"</code></td><td><code>"Lynn, MA, 01901"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>schema:address</code></td><td></td></tr>
            <tr><td><var>C2.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R2</var></td><td><code>"http://frontgatetickets.com/venue.php?id=11766"</code></td><td><code>&lt;http://frontgatetickets.com/venue.php?id=11766&gt;</code></td><td></td><td><code>anyURI</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td><td><code>schema:url</code></td><td></td></tr>
            <tr><td><var>C2.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:MusicEvent</code></td></tr>
            <tr><td><var>C2.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Place</code></td></tr>
            <tr><td><var>C2.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Offer</code></td></tr>
            <tr><td><var>C2.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:location</code></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td></tr>
            <tr><td><var>C2.10</var></td><td><var>T</var></td><td><var>C10</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:offers</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td></tr>
          </tbody>
        </table>

        <p><strong><a title="minimal mode">Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-events-listing-minimal-json"
             title="http://example.org/events-listing-minimal.json"
             data-include="../examples/events-listing-minimal.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>Three resources are defined for each row within the table; event, location and offer - therefore three <a title="object">objects</a> are created for each <a>row</a>.</p>
          <p>Each <a>column</a> explicitly defines both <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> and <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> properties which are inherited by the column's <a title="cell">cells</a>.</p>
          <p><a title="column">Columns</a> <var>C6</var>, <var>C7</var> and <var>C8</var> (<code>{ "name": "type-event"}</code>, <code>{ "name": "type-place"}</code> and <code>{ "name": "type-offer"}</code>) define the semantic types of the resources described by each <a>row</a>: <code>schema:MusicEvent</code>, <code>schema:Place</code> and <code>schema:Offer</code> respectively—noting that the use of <code>rdf:type</code> is not converted to the <a>name</a> <code>@type</code> (as used in [[json-ld]]) by this conversion application as it is not, and does not need to be, JSON-LD-aware.</p>
          <p><a title="column">Column</a> <var>C9</var> (<code>{ "name": "location"}</code>) uses the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> and <a href="http://www.w3.org/TR/tabular-metadata/#cell-valueUrl"><code>valueUrl</code></a> to assert the relationship between the event and location resources.</p>
          <p><a title="column">Column</a> <var>C10</var> (<code>{ "name": "offer"}</code>) uses the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> and <a href="http://www.w3.org/TR/tabular-metadata/#cell-valueUrl"><code>valueUrl</code></a> to assert the relationship between the event and offer resources.</p>
        </div>

        <p><strong><a title="standard mode">Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-events-listing-standard-json"
             title="http://example.org/events-listing-standard.json"
             data-include="../examples/events-listing-standard.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>The resources described by each <a>row</a> are explcitly defined using the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> property - in this case three resources per <a>row</a> (event, location and offer); the <a title="object">objects</a> containing the name-values pairs associated with the <a title="cell value">cell values</a> of a <a>row</a> are related to the <a>object</a> for each <a>subject</a> in that <a>row</a> using the name-value pair with <a>name</a> <code>describes</code>.</p>
        </div>
        
      </section>

      <section id="example-public-sector-roles-and-salaries">
        <h3>Example with table group comprising three interrelated tables</h3>
        <p>
          This example is based on <a href="http://www.w3.org/TR/csvw-ucr/#UC-OrganogramData">Use Case #4 - Publication of public sector roles and salaries</a> and uses three <a title="annotated table">annotated tables</a> published within a <a>table group</a>. Information about senior roles and junior roles within a government department are published in CSV format by each department. These are validated against a centrally published <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableschema" class="externalDFN">schema</a> to ensure that all the data published by departments is consistent. Additionally, a list of professions is also published centrally, providing a <em>controlled vocabulary</em> against which departmental submissions are validated.
        </p>

        <p> 
          The input CSV+ files and the associated metadata description are provided below:
        </p>
        <pre class="example"
             id="example-public-sector-roles-and-salaries-csv+-professions"
             data-include="../examples/gov.uk/professions.csv"
             data-oninclude="updateExample"
             title="http://example.org/gov.uk/professions.csv">
        </pre>
        <pre class="example"
             id="example-public-sector-roles-and-salaries-csv+-senior-roles"
             data-include="../examples/senior-roles.csv"
             data-oninclude="updateExample"
             title="http://example.org/senior-roles.csv">
        </pre>
        <pre class="example"
             id="example-public-sector-roles-and-salaries-csv+-junior-roles"
             data-include="../examples/junior-roles.csv"
             data-oninclude="updateExample"
             title="http://example.org/junior-roles.csv">
        </pre>
        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-metadata"
             data-include="../examples/metadata.json"
             data-oninclude="updateExample"
             title="http://example.org/metadata.json">
        </pre>

        <p class="note">In this example, the resource <code>gov.uk/professions.csv</code> is identified using a relative URL to host <code>http://example.org</code>. In reality this resource would be published centrally by government and served from some remote host. Similarly, the metadata description resource <code>metadata.json</code> would be also be centrally published. Government departments seeking to validate their role and salary data would download a copy of this metadata description and place it, without modification, in the same directory as their CSV+ files whose names MUST match those specified in the metadata description; <code>senior-roles.csv</code> and <code>junior-roles.csv</code>.</p>

        <p>The <a>table group</a> generated from parsing the CSV+ files and associated metadata is shown below and provides the basis for the conversion to JSON.</p>

        <p>Annotations for the <a>table group</a> <var>G</var> and the three <a title="annotated table">tables</a> <var>Ta</var>, <var>Tb</var>, and <var>Tc</var> are shown below.</p>

        <p><a title="table group">Table Group</a> annotations:</p>
        <table>
          <thead>
            <tr><th rowspan="2">id</th><th>core annotations</th><th rowspan="2" colspan="2">annotations</th></tr>
            <tr><th><code>resources</code></th>
          </thead>
          <tbody>
            <tr><td><var>G</var></td><td><var>Ta</var>, <var>Tb</var>, <var>Tc</var></td><td><strong><code>@type</code></strong></td><td><code>TableGroup</code></td></tr>
          </tbody>
        </table>

        <p><a title="annotated table">Table</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="3">id</th><th colspan="3">core annotations</th><th colspan="4">annotations</th></tr>
            <tr><th rowspan="2"><code>url</code></th><th rowspan="2">columns</th><th rowspan="2">rows</th><th rowspan="2"><code>primaryKey</code></th><th rowspan="2"><code>suppressOutput</code></th><th colspan="2"><code>foreignKeys</code></th></tr>
            <tr><th><code>columns</code></th><th><code>reference</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>Ta</var></td><td><code>http://example.org/gov.uk/professions.csv</code></td><td><var>Ca1</var></td><td><var>Ra1</var>, <var>Ra2</var>, <var>Ra3</var>, <var>Ra4</var></td><td><var>Ca1</var></td><td><code>true</code></td><td></td><td></td></tr>

            <tr><td><var>Tb</var></td><td><code>http://example.org/senior-roles.csv</code></td><td><var>Cb1</var>, <var>Cb2</var>, <var>Cb3</var>, <var>Cb4</var>, <var>Cb5</var>, <var>Cb6</var></td><td><var>Rb1</var>, <var>Rb2</var></td><td><var>Cb1</var></td><td></td><td><var>Cb5</var></td><td><var>Cb1</var></td></tr>
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td><var>Cb6</var></td><td><var>Ca1</var></td></tr>
            
            <tr><td><var>Tc</var></td><td><code>http://example.org/junior-roles.csv</code></td><td><var>Cc1</var>, <var>Cc2</var>, <var>Cc3</var>, <var>Cc4</var>, <var>Cc5</var>, <var>Cc6</var>, <var>Cc7</var></td><td><var>Rc1</var>, <var>Rc2</var></td><td></td><td></td><td><var>Cc1</var></td><td><var>Cb1</var></td></tr>
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td><var>Cc7</var></td><td><var>Ca1</var></td></tr>
          </tbody>
        </table>

        <p class="note">In this example, output for the centrally published list of professions, table <var>Ta</var> (<code>http://example.org/gov.uk/professions.csv</code>), is not required; only information from the departmental submissions is to be translated to JSON. Note the <a href="http://www.w3.org/TR/tabular-metadata/#table-suppressOutput"><code>suppressOutput</code></a> annotation on this <a title="annotated table">table</a>.</p>

        <p>Annotations for the <a title="column">columns</a>, <a title="row">rows</a> and <a title="cell">cells</a> in <a title="annotated table">table</a> <var>T</var> are shown in the tables below.</p>

        <p><a title="column">Column</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th><th colspan="3">annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th><code>name</code></th><th><code>title</code></th><th><code>required</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>Ca1</var></td><td><var>Ta</var></td><td>1</td><td>1</td><td><var>Ca1.1</var>, <var>Ca2.1</var>, <var>Ca3.1</var>, <var>Ca4.1</var></td><td><code>name</code></td><td><code>Profession</code></td><td><code>true</code></td></tr>

            <tr><td><var>Cb1</var></td><td><var>Tb</var></td><td>1</td><td>1</td><td><var>Cb1.1</var>, <var>Cb2.1</var></td><td><code>ref</code></td><td><code>Post Unique Reference</code></td><td><code>true</code></td></tr>
            <tr><td><var>Cb2</var></td><td><var>Tb</var></td><td>2</td><td>2</td><td><var>Cb1.2</var>, <var>Cb2.2</var></td><td><code>name</code></td><td><code>Name</code></td><td></td></tr>
            <tr><td><var>Cb3</var></td><td><var>Tb</var></td><td>3</td><td>3</td><td><var>Cb1.3</var>, <var>Cb2.3</var></td><td><code>grade</code></td><td><code>Grade</code></td><td></td></tr>
            <tr><td><var>Cb4</var></td><td><var>Tb</var></td><td>4</td><td>4</td><td><var>Cb1.4</var>, <var>Cb2.4</var></td><td><code>job</code></td><td><code>Job Title</code></td><td></td></tr>
            <tr><td><var>Cb5</var></td><td><var>Tb</var></td><td>5</td><td>5</td><td><var>Cb1.5</var>, <var>Cb2.5</var></td><td><code>reportsTo</code></td><td><code>Reports to Senior Post</code></td><td></td></tr>
            <tr><td><var>Cb6</var></td><td><var>Tb</var></td><td>6</td><td>6</td><td><var>Cb1.6</var>, <var>Cb2.6</var></td><td><code>profession</code></td><td><code>Profession</code></td><td></td></tr>

            <tr><td><var>Cc1</var></td><td><var>Tc</var></td><td>1</td><td>1</td><td><var>Cc1.1</var>, <var>Cc2.1</var></td><td><code>reportsToSenior</code></td><td><code>Reporting Senior Post</code></td><td></td></tr>
            <tr><td><var>Cc2</var></td><td><var>Tc</var></td><td>2</td><td>2</td><td><var>Cc1.2</var>, <var>Cc2.2</var></td><td><code>grade</code></td><td><code>Grade</code></td><td></td></tr>
            <tr><td><var>Cc3</var></td><td><var>Tc</var></td><td>3</td><td>3</td><td><var>Cc1.3</var>, <var>Cc2.3</var></td><td><code>min_pay</code></td><td><code>Payscale Minimum (£)</code></td><td></td></tr>
            <tr><td><var>Cc4</var></td><td><var>Tc</var></td><td>4</td><td>4</td><td><var>Cc1.4</var>, <var>Cc2.4</var></td><td><code>max_pay</code></td><td><code>Payscale Maximum (£)</code></td><td></td></tr>
            <tr><td><var>Cc5</var></td><td><var>Tc</var></td><td>5</td><td>5</td><td><var>Cc1.5</var>, <var>Cc2.5</var></td><td><code>job</code></td><td><code>Generic Job Title</code></td><td></td></tr>
            <tr><td><var>Cc6</var></td><td><var>Tc</var></td><td>6</td><td>6</td><td><var>Cc1.6</var>, <var>Cc2.6</var></td><td><code>number</code></td><td><code>Number of Posts (FTE)</code></td><td></td></tr>
            <tr><td><var>Cc7</var></td><td><var>Tc</var></td><td>7</td><td>7</td><td><var>Cc1.7</var>, <var>Cc2.7</var></td><td><code>profession</code></td><td><code>Profession</code></td><td></td></tr>
          </tbody>
        </table>

        <p><a title="row">Row</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
          </thead>
          <tbody>
            <tr><td><var>Ra1</var></td><td><var>Ta</var></td><td>1</td><td>2</td><td><var>Ca1.1</var></td></tr>
            <tr><td><var>Ra2</var></td><td><var>Ta</var></td><td>2</td><td>3</td><td><var>Ca2.1</var></td></tr>
            <tr><td><var>Ra3</var></td><td><var>Ta</var></td><td>3</td><td>4</td><td><var>Ca3.1</var></td></tr>
            <tr><td><var>Ra4</var></td><td><var>Ta</var></td><td>4</td><td>5</td><td><var>Ca4.1</var></td></tr>

            <tr><td><var>Rb1</var></td><td><var>Tb</var></td><td>1</td><td>2</td><td><var>Cb1.1</var>, <var>Cb1.2</var>, <var>Cb1.3</var>, <var>Cb1.4</var>, <var>Cb1.5</var>, <var>Cb1.6</var></td></tr>
            <tr><td><var>Rb2</var></td><td><var>Tb</var></td><td>2</td><td>3</td><td><var>Cb2.1</var>, <var>Cb2.2</var>, <var>Cb2.3</var>, <var>Cb2.4</var>, <var>Cb2.5</var>, <var>Cb2.6</var></td></tr>

            <tr><td><var>Rc1</var></td><td><var>Tc</var></td><td>1</td><td>2</td><td><var>Cc1.1</var>, <var>Cc1.2</var>, <var>Cc1.3</var>, <var>Cc1.4</var>, <var>Cc1.5</var>, <var>Cc1.6</var>, <var>Cc1.7</var></td></tr>
            <tr><td><var>Rc2</var></td><td><var>Tc</var></td><td>2</td><td>3</td><td><var>Cc2.1</var>, <var>Cc2.2</var>, <var>Cc2.3</var>, <var>Cc2.4</var>, <var>Cc2.5</var>, <var>Cc2.6</var>, <var>Cc2.7</var></td></tr>
          </tbody>
        </table>

        <p><a title="cell">Cell</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="6">core annotations</th><th colspan="5">annotations</th></tr>
            <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>errors</th><th><code>datatype</code></th><th><code>aboutUrl</code></th><th><code>propertyUrl</code></th><th><code>valueUrl</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>Ca1.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra1</var></td><td><code>"Finance"</code></td><td><code>"Finance"</code></td><td></td><td><code>string</code></td><td></td><td></td><td></td></tr>

            <tr><td><var>Ca2.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra2</var></td><td><code>"Information Technology"</code></td><td><code>"Information Techology"</code></td><td></td><td><code>string</code></td><td></td><td></td><td></td></tr>

            <tr><td><var>Ca3.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra3</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td><code>string</code></td><td></td><td></td><td></td></tr>

            <tr><td><var>Ca4.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra4</var></td><td><code>"Policy"</code></td><td><code>"Policy"</code></td><td></td><td><code>string</code></td><td></td><td></td><td></td></tr>


            <tr><td><var>Cb1.1</var></td><td><var>Tb</var></td><td><var>Cb1</var></td><td><var>Rb1</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>dc:identifier</code></td><td></td></tr>
            <tr><td><var>Cb1.2</var></td><td><var>Tb</var></td><td><var>Cb2</var></td><td><var>Rb1</var></td><td><code>"Steve Egan"</code></td><td><code>"Steve Egan"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>foaf:name</code></td><td></td></tr>
            <tr><td><var>Cb1.3</var></td><td><var>Tb</var></td><td><var>Cb3</var></td><td><var>Rb1</var></td><td><code>"SCS1A"</code></td><td><code>"SCS1A"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>&lt;http://example.org/def/grade&gt;</code></td><td></td></tr>
            <tr><td><var>Cb1.4</var></td><td><var>Tb</var></td><td><var>Cb4</var></td><td><var>Rb1</var></td><td><code>"Deputy Chief Executive"</code></td><td><code>"Deputy Chief Executive"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>&lt;http://example.org/def/job&gt;</code></td><td></td></tr>
            <tr><td><var>Cb1.5</var></td><td><var>Tb</var></td><td><var>Cb5</var></td><td><var>Rb1</var></td><td><code>"90334"</code></td><td><code>"90334"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>&lt;http://example.org/def/reportsTo&gt;</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td></tr>
            <tr><td><var>Cb1.6</var></td><td><var>Tb</var></td><td><var>Cb6</var></td><td><var>Rb1</var></td><td><code>"Finance"</code></td><td><code>"Finance"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>&lt;http://example.org/def/profession&gt;</code></td><td></td></tr>  

            <tr><td><var>Cb2.1</var></td><td><var>Tb</var></td><td><var>Cb1</var></td><td><var>Rb2</var></td><td><code>"90334"</code></td><td><code>"90334"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>dc:identifier</code></td><td></td></tr>
            <tr><td><var>Cb2.2</var></td><td><var>Tb</var></td><td><var>Cb2</var></td><td><var>Rb2</var></td><td><code>"Sir Alan Langlands"</code></td><td><code>"Sir Alan Langlands"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>foaf:name</code></td><td></td></tr>
            <tr><td><var>Cb2.3</var></td><td><var>Tb</var></td><td><var>Cb3</var></td><td><var>Rb2</var></td><td><code>"SCS4"</code></td><td><code>"SCS4"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>&lt;http://example.org/def/grade&gt;</code></td><td></td></tr>
            <tr><td><var>Cb2.4</var></td><td><var>Tb</var></td><td><var>Cb4</var></td><td><var>Rb2</var></td><td><code>"Chief Executive"</code></td><td><code>"Chief Executive"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>&lt;http://example.org/def/job&gt;</code></td><td></td></tr>
            <tr><td><var>Cb2.5</var></td><td><var>Tb</var></td><td><var>Cb5</var></td><td><var>Rb2</var></td><td><code>"xx"</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>&lt;http://example.org/def/reportsTo&gt;</code></td><td></td></tr>
            <tr><td><var>Cb2.6</var></td><td><var>Tb</var></td><td><var>Cb6</var></td><td><var>Rb2</var></td><td><code>"Policy"</code></td><td><code>"Policy"</code></td><td></td><td><code>string</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>&lt;http://example.org/def/profession&gt;</code></td><td></td></tr>


            <tr><td><var>Cc1.1</var></td><td><var>Tc</var></td><td><var>Cc1</var></td><td><var>Rc1</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/def/reportsTo&gt;</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td></tr>
            <tr><td><var>Cc1.2</var></td><td><var>Tc</var></td><td><var>Cc2</var></td><td><var>Rc1</var></td><td><code>"4"</code></td><td><code>"4"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/def/grade&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.3</var></td><td><var>Tc</var></td><td><var>Cc3</var></td><td><var>Rc1</var></td><td><code>"17426"</code></td><td><code>17426</code></td><td></td><td><code>integer</code></td><td></td><td><code>&lt;http://example.org/def/min_pay&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.4</var></td><td><var>Tc</var></td><td><var>Cc4</var></td><td><var>Rc1</var></td><td><code>"20002"</code></td><td><code>20002</code></td><td></td><td><code>integer</code></td><td></td><td><code>&lt;http://example.org/def/max_pay&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.5</var></td><td><var>Tc</var></td><td><var>Cc5</var></td><td><var>Rc1</var></td><td><code>"Administrator"</code></td><td><code>"Administrator"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/def/job&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.6</var></td><td><var>Tc</var></td><td><var>Cc6</var></td><td><var>Rc1</var></td><td><code>"8.67"</code></td><td><code>8.67</code></td><td></td><td><code>number</code></td><td></td><td><code>&lt;http://example.org/def/number-of-posts&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.7</var></td><td><var>Tc</var></td><td><var>Cc7</var></td><td><var>Rc1</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/def/profession&gt;</code></td><td></td></tr>

            <tr><td><var>Cc2.1</var></td><td><var>Tc</var></td><td><var>Cc1</var></td><td><var>Rc2</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/def/reportsTo&gt;</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td></tr>
            <tr><td><var>Cc2.2</var></td><td><var>Tc</var></td><td><var>Cc2</var></td><td><var>Rc2</var></td><td><code>"5"</code></td><td><code>"5"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/def/grade&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.3</var></td><td><var>Tc</var></td><td><var>Cc3</var></td><td><var>Rc2</var></td><td><code>"19546"</code></td><td><code>19546</code></td><td></td><td><code>integer</code></td><td></td><td><code>&lt;http://example.org/def/min_pay&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.4</var></td><td><var>Tc</var></td><td><var>Cc4</var></td><td><var>Rc2</var></td><td><code>"22478"</code></td><td><code>22478</code></td><td></td><td><code>integer</code></td><td></td><td><code>&lt;http://example.org/def/max_pay&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.5</var></td><td><var>Tc</var></td><td><var>Cc5</var></td><td><var>Rc2</var></td><td><code>"Administrator"</code></td><td><code>"Administrator"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/def/job&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.6</var></td><td><var>Tc</var></td><td><var>Cc6</var></td><td><var>Rc2</var></td><td><code>"0.5"</code></td><td><code>0.5</code></td><td></td><td><code>number</code></td><td></td><td><code>&lt;http://example.org/def/number-of-posts&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.7</var></td><td><var>Tc</var></td><td><var>Cc7</var></td><td><var>Rc2</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/def/profession&gt;</code></td><td></td></tr>
          </tbody>
        </table>

        <p><strong><a title="minimal mode">Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-minimal-json"
             title="http://example.org/public-sector-roles-and-salaries-minimal.json"
             data-include="../examples/public-sector-roles-and-salaries-minimal.json"
             data-oninclude="updateExample">
        </pre>

        <div class="note">
          <p>Prefixes defined within the <a href="http://www.w3.org/2011/rdfa-context/rdfa-1.1">RDFa 1.1 Initial Context</a> ([[rdfa-core]]) are not expanded; e.g. <code>dc:</code> for &lt;http://purl.org/dc/terms/&gt;.</p>
          <p>Output for <a title="annotated table">table</a> <var>Ta</var> (<code>{ "url": "http://example.org/gov.uk/professions.csv" }</code>) is not included as property <a href="http://www.w3.org/TR/tabular-metadata/#table-suppressOutput"><code>suppressOutput</code></a> has value <var>true</var>.</p>
          <p>The <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> is specified for all <a title="cell">cells</a> in <a title="annotated table">tables</a> <var>Tb</var> and <var>Tc</var>.</p>
          <p><a title="column">Columns</a> <var>Cb5</var> and <var>Cc1</var> (<code>{ "name": "reportsTo" }</code> and <code>{ "name": "reportsToSenior" }</code>) use the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a>, <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> and <a href="http://www.w3.org/TR/tabular-metadata/#cell-valueUrl"><code>valueUrl</code></a> properties to assert the relationship between the given post and the senior post it reports to for the <a title="cell">cells</a> therein. However, since senior posts and junior posts are described in different tables so it is not possible to create nested <a title="object">objects</a> for this particular case.</p>
        </div>

        <p><strong><a title="standard mode">Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight"
             id="example-public-sector-roles-and-salaries-standard-json"
             title="http://example.org/public-sector-roles-and-salaries-standard.json"
             data-include="../examples/public-sector-roles-and-salaries-standard.json"
             data-oninclude="updateExample">
        </pre>
      </section>

    </section>
  </body>
</html>
