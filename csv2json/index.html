<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <title>Generating JSON from Tabular Data on the Web</title>
    <script class="remove" src="https://www.w3.org/Tools/respec/respec-w3c-common">
	  </script>
    <script class="remove">
var respecConfig = {
    localBiblio: {
      "tabular-data-model": {
          "authors": [
            "Jeni Tennison",
            "Gregg Kellogg"
          ],
          "title": "Model for Tabular Data and Metadata on the Web",
          "href" : "http://www.w3.org/TR/tabular-data-model/",
          "rawDate": "2015-01-08",
          "status" : "WD",
          "publisher": "W3C"
      },
      "tabular-metadata": {
          "authors": [
            "Rufus Pollock",
            "Jeni Tennison",
            "Gregg Kellogg"
          ],
          "title": "Metadata Vocabulary for Tabular Data",
          "href" : "http://www.w3.org/TR/tabular-metadata/",
          "rawDate": "2015-01-08",
          "status" : "WD",
          "publisher": "W3C"
      },
      "UNICODE-BIDI" : {
        "authors" : [
          "Mark Davis",
          "Aharon Lanin",
          "Andrew Glass"
        ],
        "title": "TR9, Unicode Bidirectional Algorithm",
        "href": "http://unicode.org/reports/tr9/",
        "rawDate" : "2013-09-24",
        "publisher" : "Unicode Consortium",
        "status" : "Report"
      },
      "RFC6570" : {
          "authors" : [
            "J. Gregorio",
            "R. Fielding",
            "M. Hadley",
            "M. Nottingham",
            "D. Orchard"
          ],
          "title" : "URI Template",
          "rawDate" : "2002-01",
          "status": "Proposed Internet RFC",
          "publisher" : "IETF",
          "href" : "http://www.ietf.org/rfc/rfc6570.txt"
      },
      "RFC7159" : {
          "authors" : [
            "T. Bray",
          ],
          "title" : "The JavaScript Object Notation (JSON) Data Interchange Format",
          "rawDate" : "2014-03",
          "status": "Informational RFC",
          "publisher" : "IETF",
          "href" : "http://www.ietf.org/rfc/rfc7159.txt"
      }, 
      "iso8601" : {
          "title" : "ISO 8601:2004 Representation of dates and times",
          "rawDate" : "2004",
          "status": "International Standard (IS)",
          "publisher" : "ISO (International Organization for Standardization)"
      }
    },
    specStatus: "ED",
    shortName: "csv2json",
    // publishDate:  "2014-04-01",
    previousPublishDate: "2015-01-08",
    previousMaturity: "FPWD",
    previousURI: "http://www.w3.org/TR/2015/WD-csv2json-20150108/",
    edDraftURI: "http://w3c.github.io/csvw/csv2json/",
    // lcEnd: "3000-01-01",
    // crEnd: "3000-01-01",
    editors:
     [{
            name: "Jeremy Tandy",
            company: "Met Office",
            companyURL: "http://www.metoffice.gov.uk/",
            w3cid: "65512"
      },{
       name: "Ivan Herman",
       url: "http://www.w3.org/People/Ivan",
       company: "W3C",
       companyURL: "http://www.w3.org",
       w3cid: "7382"
     }],
    wg: "CSV on the Web Working Group",
    wgURI: "http://www.w3.org/2013/csvw/",
    wgPublicList: "public-csv-wg",
    wgPatentURI: "http://www.w3.org/2004/01/pp-impl/68238/status",
    otherLinks: [{
      key: "Repository",
      data: [{
          value: "We are on Github",
          href: "https://github.com/w3c/csvw/"
        }, {
          value: "File a bug",
          href: "https://github.com/w3c/csvw/issues"
        }]
      } , 
      {
        key: "Changes",
        data: [{
        //     value: "Diff to previous version",
        //     href: "diff-20140327.html"
        //   }, {}
           value: "Commit history",
           href: "https://github.com/w3c/csvw/commits/gh-pages"
         }]
       }] ,
    inlineCSS: true,
    noIDLIn: true,
    issueBase: "https://github.com/w3c/csvw/issues/",
    noLegacyStyle: false
    };
    </script>
    <style type="text/css">
      .grammar td { font-family: monospace; vertical-align: top; }
      .grammar-literal { color: gray;}
      .TBD { font-style: italic; background: yellow;}
      .steps li { margin-bottom: 0.5em;}
      dl.nvp { padding: 0 0 0 1em; }
      dl.nvp dt, dl.nvp dd { margin: 0; display: inline }
      dl.nvp dt:after { content: ':'; }
      dl.nvp dd:after { content: '\A'; white-space: pre; }
    </style>
  </head>
  <body>
    <section id="abstract">
      <p>This document defines the procedures and rules to be applied when converting tabular data into JSON. Tabular data may be complemented with metadata annotations that describe its structure, the meaning of its content and how it may form part of a collection of interrelated tabular data. This document specifies the effect of this metadata on the resulting JSON.</p>
    </section>
    
    <section id="sotd">
      <p>The CSV on the Web Working Group was chartered to produce Recommendations for "Access methods for CSV Metadata", "Metadata vocabulary for CSV data" and "Mapping mechanism to transforming CSV into various Formats (e.g., RDF, JSON, or XML)". This document aims to satisfy the JSON variant of the mapping Recommendation.</p>
    </section>

    <section id="intro">
      <h2>Introduction</h2>
      <p>This document describes the processing of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data">tabular data</a> to create a set of nested objects referred to as the <dfn title="output graph"> output graph</dfn>. The <a title="output graph">output graph</a> SHALL be serialized as JSON [[!RFC7159]].</p>

      <p class="note">The JSON encoding is intended for web developers who need not care about the complexities of RDF [[!rdf11-concepts]].</p>

      <p> The [[!tabular-data-model]] defines an <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotated-tabular-data-model" class="externalDFN">annotated tabular data model</a> consisting of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table" class="externalDFN">tables</a>, <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column" class="externalDFN">columns</a>, <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row" class="externalDFN">rows</a> and <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a>, enriched with <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotation" class="externalDFN">annotations</a> that describe the structure of the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> and the meaning of its content.</p>

      <p>The <a href="http://www.w3.org/TR/tabular-data-model/#dfn-grouped-tabular-data-model" class="externalDFN">grouped tabular data model</a> describes a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables" class="externalDFN">table group</a> that is a collection of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table" class="externalDFN">tables</a> published as a single atomic unit.</p>

      <p>The conversion procedure described in this specification operates on the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a>. No discussion is given to the processes needed to convert CSV-encoded data into tabular data form. Please refer to [[!tabular-data-model]] for details of <a href="http://www.w3.org/TR/tabular-data-model/#parsing">parsing tabular data</a>.</p>

      <p>Conversion applications MUST provide at least two modes of operation: <a title="standard mode">standard</a> and <a title="minimal mode">minimal</a>.</p>

      <p><dfn title="standard mode">Standard mode</dfn> conversion frames the information gleaned from the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a> of the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> with details of the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row" class="externalDFN">rows</a>, <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table" class="externalDFN">tables</a> and, optionally, <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table-group" class="externalDFN">table group</a> within which that information is provided.</p>

      <p><dfn title="minimal mode">Minimal mode</dfn> conversion includes <em>only</em> the information gleaned from the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a> of the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> within the <a>output graph</a>.</p>

      <p><a title="standard mode">Standard</a> and <a title="minimal mode">minimal</a> conversion are described normatively <a href="#conversion-algorithm">below</a>.</p>

      <p>Conversion applications MAY offer additional implementation specific conversion modes.</p>

      <p><a href="http://www.w3.org/TR/tabular-metadata/#dfn-conversion-specification" class="externalDFN">Conversion specifications</a>, as defined in [[!tabular-metadata]] MAY be used to specify how <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> can be transformed into another format using a script or template. Such a <a href="http://www.w3.org/TR/tabular-metadata/#dfn-conversion-specification" class="externalDFN">conversion specification</a> MAY use the JSON output described in this specification as input.</p>

      <p>The conversion procedure described in this specification is considered to be <em>entirely textual</em>. There is no requirement on conversion applications to check the semantic consistency of the data during the conversion, nor validate the <a>output graph</a> against JSON syntax rules. Downstream applications SHOULD be aware of the potential for syntax errors and take appropriate action.</p>
    </section>

    <section id="conformance">
      <p><a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">Tabular data</a> MUST conform to the description from [[!tabular-data-model]]. In particular note that each <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row" class="externalDFN">row</a> MUST contain the same number of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a> (although some of these <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cells</a> may be empty). Given this constraint, not all CSV-encoded data can be considered to be tabular data. As such, the conversion proceduredescribed in this specification cannot be applied to all CSV files.</p>
    </section>

    <section id="conversion">
      <h2>Converting Tabular Data to JSON</h2>

      <p>The procedures for converting <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data" class="externalDFN">tabular data</a> into JSON are described below for both <a title="standard mode">standard</a> and <a title="minimal mode">minimal</a> modes.</p>

      <section id="algorithm-terms">
        <h3>Algorithm terms</h3>
        <dl>
          <dt><dfn>aboutUrl</dfn></dt>
          <dd>The <a>aboutUrl</a> is the evaluation of the <code>aboutUrl</code> property of the current <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cell</a> as defined in <cite><a href="http://www.w3.org/TR/tabular-metadata/#dfn-uri-template-property">URI template properties</a></cite> in [[!tabular-metadata]].</dd>

          <dt><dfn>annotated table</dfn></dt>
          <dd>The <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotated-table" class="externalDFN">annotated table</a> is defined in [[!tabular-data-model]] as describing a particular <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table-description" class="externalDFN">table</a> and its metadata.</dd>

          <dt><dfn>array</dfn></dt>
          <dd>An <a>array</a> is defined in [[!RFC7159]] as an ordered sequence of zero or more values, where a value is a string, number, boolean, null, <a>object</a>, or <a>array</a>.</dd>

          <dt><dfn>cell</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cell</a> is defined in [[!tabular-data-model]] as the intersection of a <a>row</a> and a <a>column</a> within a <a title="annotated table">table</a>.</dd>

          <dt><dfn>cell errors</dfn></dt>
          <dd><a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell-errors" class="externalDFN">Cell errors</a> are defined in [[!tabular-data-model]] as a (possibly empty) list of validation errors generated while parsing the literal content of a <a>cell</a> to generate the <a title="cell value">semantic value</a>.</dd>

          <dt><dfn>cell value</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell-value" class="externalDFN">cell value</a> is defined in [[!tabular-data-model]] as the semantic value of the <a>cell</a>; this MAY be <code>null</code> or, the event that the <a>cell</a> specifies a <a href="http://www.w3.org/TR/tabular-metadata/#cell-separator"><code>separator</code></a> property, a sequence of values.</dd>

          <dt><dfn>column</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column" class="externalDFN">column</a> is defined in [[!tabular-data-model]] as a vertical arrangement of <a title="cell">cells</a> within a <a title="annotated table">table</a>.</dd>

          <dt><dfn>common properties</dfn></dt>
          <dd>The <a>common properties</a> of a metadata resource are defined in <a href="http://www.w3.org/TR/tabular-metadata/#common-properties">Section 3.3 Common Properties</a> of [[!tabular-metadata]]). The RDF values of these properties are the result of running the [[!json-ld-api]] <cite><a href="http://www.w3.org/TR/json-ld-api/#deserialize-json-ld-to-rdf-algorithm">toRdf</a></cite> algorithm over the <a>common properties</a> defined within the metadata description.</dd>

          <dt><dfn>identifier</dfn></dt>
          <dd>The identifier is the evaluation of the <code>@id</code> property for the current resource. As defined in [[!tabular-data-model]], the <a>identifier</a> is <code>null</code> if the <code>@id</code> property is undefined. The <a>identifier</a> MAY be applied to either a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables" class="externalDFN">table group</a> or a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotated-table" class="externalDFN">table</a>.</dd>

          <dt><dfn>name</dfn></dt>
          <dd>In the context of this specification, <a>name</a> is used as defined in JSON ([[!RFC7159]]); that is that <a>name</a> is a string that provides a unique key within a set of name-value pairs within a JSON <a>object</a>.</dd>

          <dt><dfn>notes</dfn></dt>
          <dd>A list of <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table-notes" class="externalDFN">notes</a>, as defined in [[!tabular-data-model]], attached to an <a title="annotated table">annotated table</a> using the <code>notes</code> property. This may be an empty list.</dd>

          <dt><dfn>object</dfn></dt>
          <dd>An <a>object</a> is defined in [[!RFC7159]] as unordered collection of zero or more name/value pairs, where a where a name is a string and a value is a string, number, boolean, null, <a>object</a>, or <a>array</a>.</dd>

          <dt><dfn>propertyUrl</dfn></dt>
          <dd>The <a>propertyUrl</a> is the evaluation of the <code>propertyUrl</code> property of the current <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cell</a> as defined in <cite><a href="http://www.w3.org/TR/tabular-metadata/#dfn-uri-template-property">URI template properties</a></cite> in [[!tabular-metadata]].</dd>

          <dt><dfn>row</dfn></dt>
          <dd>The <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row" class="externalDFN">row</a> is defined in [[!tabular-data-model]] as a horizontal arrangement of <a title="cell">cells</a> within a <a title="annotated table">table</a>.</dd>

          <dt><dfn>row number</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row-number" class="externalDFN">row number</a> is defined in [[!tabular-data-model]] as the position of the <a>row</a> within the <a title="annotated table">table</a>, starting from 1.</dd>

          <dt><dfn>row source number</dfn></dt>
          <dd>A <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row-source-number" class="externalDFN">row source number</a> is defined in [[!tabular-data-model]] as the position of the <a>row</a> within the source CSV+ file.</dd>

          <dt><dfn>subject</dfn></dt>
          <dd>Within this algorithm, a <a>subject</a> is the resource that the value of a given <a>cell</a> refers to. This may be specified using the <a>aboutUrl</a> property.</dd>

          <dt><dfn>table group</dfn></dt>
          <dd>The <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables" class="externalDFN">table group</a> is defined in [[!tabular-data-model]] as comprising a set of <a title="annotated table">annotated tables</a> and a set of annotations that relate to those tables.</dd>
          
          <dt><dfn>table group description</dfn></dt>
          <dd>The <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-group-description" class="externalDFN">table group</a> <a href="http://www.w3.org/TR/tabular-metadata/#dfn-description-object" class="externalDFN">description object</a> as defined in [[!tabular-data-model]].</dd>

          <dt><dfn>valueUrl</dfn></dt>
          <dd>The <a>valueUrl</a> is the evaluation of the <code>valueUrl</code> property of the current <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell" class="externalDFN">cell</a> as defined in <cite><a href="http://www.w3.org/TR/tabular-metadata/#dfn-uri-template-property">URI template properties</a></cite> in [[!tabular-metadata]].</dd>
        </dl>
      </section>

      <section id="generating-rdf">
        <h3>Generating RDF</h3>
      </section>

      <section id="datatypes">
        <h3>Interpretting datatypes</h3>
        <p><a title="cell value">Cell values</a> are expressed in the <a>output graph</a> according to the cell's <a href="http://www.w3.org/TR/tabular-metadata/#cell-datatype"><code>datatype</code></a> property. The relationship between the value of the <a href="http://www.w3.org/TR/tabular-metadata/#cell-datatype"><code>datatype</code></a> property and the primitive types supported by JSON (as specified in [[!RFC7159]]) is provided in the table below.</p>

        <div class="note">
          <p>Instances of JSON reserved characters within string values MUST be escaped as defined in [[!RFC7159]].</p>
          <p>JSON has no native support for expressing language information; therefore the <a href="http://www.w3.org/TR/tabular-metadata/#cell-language"><code>lang</code></a> property has no effect on the JSON outut.</p>
        </div>
        
        <div class="note">
          <p>A cell's <a href="http://www.w3.org/TR/tabular-metadata/#datatype-format"><code>format</code></a> property is irrelevant to the conversion procedure defined in this specification; the <a>cell value</a> has already been parsed from the contents the <a>cell</a> according to the <a href="http://www.w3.org/TR/tabular-metadata/#datatype-format"><code>format</code></a> property.</p>
          <p>Where the contents of the <a>cell</a> cannot be parsed, or other validation errors occur, <a>cell errors</a> will be provided. It is an implementation decision to determine how conversion applications should proceed in the event that <a>cell errors</a> are encountered.</p>
        </div>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th><code>datetype</code></th><th>JSON primitive type</th><th>Remarks</th></tr>
          </thead>
          <tbody>
            <tr><td><code>number</code></td><td>number</td><td></td></tr>
            <tr><td><code>binary</code></td><td>string</td><td><code>binary</code> is considered to be equivalent to <code>xsd:base64Binary</code></td></tr>
            <tr><td><code>datetime</code></td><td>string</td><td></td></tr>
            <tr><td><code>any</code></td><td>string</td><td></td></tr>
            <tr><td><code>xml</code></td><td>string</td><td></td></tr>
            <tr><td><code>html</code></td><td>string</td><td></td></tr>
            <tr><td><code>json</code></td><td>string</td><td></td></tr>
            <tr><td><code>anyAtomicType</code></td><td>string</td><td></td></tr>
            <tr><td><code>anyURI</code></td><td>string</td><td></td></tr>
            <tr><td><code>base64Binary</code></td><td>string</td><td></td></tr>
            <tr><td><code>boolean</code></td><td>boolean</td><td></td></tr>
            <tr><td><code>date</code></td><td>string</td><td></td></tr>
            <tr><td><code>dateTime</code></td><td>string</td><td></td></tr>
            <tr><td><code>dateTimeStamp</code></td><td>string</td><td></td></tr>
            <tr><td><code>decimal</code></td><td>number</td><td></td></tr>
            <tr><td><code>integer</code></td><td>number</td><td></td></tr>
            <tr><td><code>long</code></td><td>number</td><td></td></tr>
            <tr><td><code>int</code></td><td>number</td><td></td></tr>
            <tr><td><code>short</code></td><td>number</td><td></td></tr>
            <tr><td><code>byte</code></td><td>number</td><td></td></tr>
            <tr><td><code>nonNegativeInteger</code></td><td>number</td><td></td></tr>
            <tr><td><code>positiveInteger</code></td><td>number</td><td></td></tr>
            <tr><td><code>unsignedLong</code></td><td>number</td><td></td></tr>
            <tr><td><code>unsignedInt</code></td><td>number</td><td></td></tr>
            <tr><td><code>unsignedShort</code></td><td>number</td><td></td></tr>
            <tr><td><code>unsignedByte</code></td><td>number</td><td></td></tr>
            <tr><td><code>nonPositiveInteger</code></td><td>number</td><td></td></tr>
            <tr><td><code>negativeInteger</code></td><td>number</td><td></td></tr>
            <tr><td><code>double</code></td><td>number</td><td></td></tr>
            <tr><td><code>duration</code></td><td>string</td><td></td></tr>
            <tr><td><code>dayTimeDuration</code></td><td>string</td><td></td></tr>
            <tr><td><code>yearMonthDuration</code></td><td>string</td><td></td></tr>
            <tr><td><code>float</code></td><td>number</td><td></td></tr>
            <tr><td><code>gDay</code></td><td>string</td><td></td></tr>
            <tr><td><code>gMonth</code></td><td>string</td><td></td></tr>
            <tr><td><code>gMonthDay</code></td><td>string</td><td></td></tr>
            <tr><td><code>gYear</code></td><td>string</td><td></td></tr>
            <tr><td><code>gYearMonth</code></td><td>string</td><td></td></tr>
            <tr><td><code>hexBinary</code></td><td>string</td><td></td></tr>
            <tr><td><code>QName</code></td><td>string</td><td></td></tr>
            <tr><td><code>string</code></td><td>string</td><td></td></tr>
            <tr><td><code>normalizedString</code></td><td>string</td><td></td></tr>
            <tr><td><code>token</code></td><td>string</td><td></td></tr>
            <tr><td><code>langauge</code></td><td>string</td><td></td></tr>
            <tr><td><code>Name</code></td><td>string</td><td></td></tr>
            <tr><td><code>NCName</code></td><td>string</td></td></tr>
            <tr><td><code>time</code></td><td>string</td><td></td></tr>
          </tbody>
        </table>
      </section>

    </section>

    <section id="examples" class="informative">
      <h2>Examples</h2>

      <p class="note">Each of the examples expresses more complex conversions - it is recommended that readers of this specification work through the examples in sequential order.</p>

      <section id="example-countries">
        <h3>Simple example</h3>
        <p>
          This example comprises a single <a>annotated table</a> containing information attributes about countries; country code, position (latitude, longitude) and name. Whilst the input CSV+ file, published at <code>http://example.org/countries.csv</code>, includes a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-header-line" class="externalDFN">header line</a>, no further metadata annotations are given. The CSV+ file is provided below:
        </p>
        <pre class="example" id="example-countries-csv+">
countryCode,latitude,longitude,name
AD,42.546245,1.601554,Andorra
AE,23.424076,53.847818,"United Arab Emirates"
AF,33.93911,67.709953,Afghanistan
        </pre>

        <p>The <a>annotated table</a> generated from parsing the CSV+ file is shown below and provides the basis for the conversion to RDF.</p>

        <p>Annotations for the resulting <a title="annotated table">table</a> <var>T</var>, with 4 columns and 3 rows, are shown below:</p>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="3">core annotations</th><th rowspan="2" colspan="2">annotations</th></tr>
            <tr><th><code>url</code></th><th>columns</th><th>rows</th></tr>
          </thead>
          <tbody>
            <tr><td><var>T</var></td><td><code>http://example.org/countries.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var></td><td><var>R1</var>, <var>R2</var>, <var>R3</var></td><td></td><td></td></tr>
          </tbody>
        </table>

        <p>Annotations for the <a title="column">columns</a>, <a title="row">rows</a> and <a title="cell">cells</a> in <a title="annotated table">table</a> <var>T</var> are shown in the tables below.</p>

        <p><a title="column">Column</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th><th colspan="2">annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th><code>name</code></th><th><code>title</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var>, <var>C3.1</var></td><td><code>countryCode</code></td><td><code>countryCode</code></td></tr>
            <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var>, <var>C3.2</var></td><td><code>latitude</code></td><td><code>latitude</code></td></tr>
            <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var>, <var>C3.3</var></td><td><code>longitude</code></td><td><code>longitude</code></td></tr>
            <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var>, <var>C3.4</var></td><td><code>name</code></td><td><code>name</code></td></tr>
          </tbody>
        </table>

        <p><a title="row">Row</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
          </thead>
          <tbody>
            <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var></td></tr>
            <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var></td></tr>
            <tr><td><var>R3</var></td><td><var>T</var></td><td>3</td><td>4</td><td><var>C3.1</var>, <var>C3.2</var>, <var>C3.3</var>, <var>C3.4</var></td></tr>
          </tbody>
        </table>

        <p><a title="cell">Cell</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="6">core annotations</th><th>annotations</th></tr>
            <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>errors</th><th><code>propertyUrl</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"AD"</code></td><td><code>"AD"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#countryCode&gt;</code></td></tr>
            <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"42.546245"</code></td><td><code>"42.546245"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#latitude&gt;</code></td></tr>
            <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"1.601554"</code></td><td><code>"1.601554"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#longitude&gt;</code></td></tr>
            <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"Andorra"</code></td><td><code>"Andorra"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#name&gt;</code></td></tr>

            <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"AE"</code></td><td><code>"AE"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#countryCode&gt;</code></td></tr>
            <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"23.424076"</code></td><td><code>"23.424076"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#latitude&gt;</code></td></tr>
            <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"53.847818"</code></td><td><code>"53.847818"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#longitude&gt;</code></td></tr>
            <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"United Arab Emirates"</code></td><td><code>"United Arab Emirates"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#name&gt;</code></td></tr>

            <tr><td><var>C3.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R3</var></td><td><code>"AF"</code></td><td><code>"AF"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#countryCode&gt;</code></td></tr>
            <tr><td><var>C3.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R3</var></td><td><code>"33.93911"</code></td><td><code>"33.93911"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#latitude&gt;</code></td></tr>
            <tr><td><var>C3.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R3</var></td><td><code>"67.709953"</code></td><td><code>"67.709953"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#longitude&gt;</code></td></tr>
            <tr><td><var>C3.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R3</var></td><td><code>"Afghanistan"</code></td><td><code>"Afghanistan"</code></td><td></td><td><code>&lt;http://example.org/countries.csv#name&gt;</code></td></tr>
          </tbody>
        </table>

        <p class="note">As the value of <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> has not been set within the metadata description it defaults to the URI Template (see [[RFC6570]]) <code>#{<em>[column-name]</em>}</code>, where <code><em>[column-name]</em></code> is the value of the <a href="http://www.w3.org/TR/tabular-metadata/#column-name"><code>name</code></a> property for the column associated with the cell. For example, the value of <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> for all <a title="cell">cells</a> in <a>column</a> <var>C1</var> (<code>"name": "countryCode"</code>) is <code>http://example.org/countries.csv#countryCode</code>.</p>

        <p><strong><a title="minimal mode">Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight" id="example-countries-minimal-json">
[{ 
  "countryCode": "AD", 
  "latitude": "42.546245", 
  "longitude": "1.601554", 
  "name": "Andorra" 
}, { 
  "countryCode": "AE", 
  "latitude": "23.424076", 
  "longitude": "53.847818", 
  "name": "United Arab Emirates" 
}, { 
  "countryCode": "AF", 
  "latitude": "33.93911", 
  "longitude": "67.709953", 
  "name": "Afghanistan" 
}]
        </pre>

        <div class="note">
          <p>The <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> property has not been set for cells in table <var>T</var> (<code>{ "url": "http://example.org/countries.csv"}</code>) - <a title="cell">cells</a> in a given <a>row</a> where <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> has not been specified are assumed to refer to the same <a>subject</a> and so the name-value pairs associated with the <a title="cell value">cell values</a> of that <a>row</a> occur within the same <a>object</a>.</p>
          <p>Given that the <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> has not been explicitly set for cells in table <var>T</var> (<code>{ "url": "http://example.org/countries.csv"}</code>), the simplified <a>name</a> is used in the name-value pairs; e.g. <code>countryCode</code> rather than <code>http://example.org/countries.csv#countryCode</code></p>
        </div>

        <p><strong><a title="standard mode">Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight" id="example-countries-standard-json">
{
  "table": [{
    "url": "http://example.org/countries.csv",
    "row": [{
      "rownum": 1,
      "url": "http://example.org/countries.csv#row=2",
      "describes": [{ 
        "countryCode": "AD", 
        "latitude": "42.546245", 
        "longitude": "1.601554", 
        "name": "Andorra" 
      }]
    }, {
      "rownum": 2,
      "url": "http://example.org/countries.csv#row=3",
      "describes": [{ 
        "countryCode": "AE", 
        "latitude": "23.424076", 
        "longitude": "53.847818", 
        "name": "United Arab Emirates"
      }]
    }, {
      "rownum": 3,
      "url": "http://example.org/countries.csv#row=4",
      "describes": [{  
        "countryCode": "AF", 
        "latitude": "33.93911", 
        "longitude": "67.709953", 
        "name": "Afghanistan" 
      }]
    }]
  }]
}
        </pre>

        <div class="note">
          <p>Even though the <a title="annotated table">table</a> was defined in isolation, the <a title="annotated table">table</a> is wrapped in a <a>table group</a>.</p>
          <p>The name-value pair with <a>name</a> <code>url</code> provides reference to the original CSV+ file and to specific <a title="row">rows</a> therein.</p>
          <p>The <a>row number</a> is provided for each <a>row</a> using name-value pair with <a>name</a> <code>rownum</code>.</p>
          <p>The <a>object</a> containing the name-values pairs associated with the <a title="cell value">cell values</a> of a <a>row</a> are related to the <a>object</a> for that <a>row</a> using the name-value pair with <a>name</a> <code>describes</code>.</p>
        </div>

      </section>
      <section id="example-tree-ops-ext">
        <h3>Example with single table and rich annotations</h3>
        <p>
          This example is based on <a href="http://www.w3.org/TR/csvw-ucr/#UC-PaloAltoTreeData">Use Case #11 - City of Palo Alto Tree Data</a> and comprises a single <a>annotated table</a> describing an inventory of tree maintenance operations. The input CSV+ file, published at <code>http://example.org/tree-ops-ext.csv</code>, and the associated metadata description <code>http://example.org/tree-ops-ext.csv-metadata.json</code> are provided below:
        </p>
        <pre class="example" id="example-tree-ops-ext-csv+">
GID,On Street,Species,Trim Cycle,Diameter at Breast Ht,Inventory Date,Comments,Protected,KML
1,ADDISON AV,Celtis australis,Large Tree Routine Prune,11,10/18/2010,,,"&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"
2,EMERSON ST,Liquidambar styraciflua,Large Tree Routine Prune,11,6/2/2010,,,"&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"
6,ADDISON AV,Robinia pseudoacacia,Large Tree Routine Prune,29,6/1/2010,cavity or decay; trunk decay; codominant leaders; included bark; large leader or limb decay; previous failure root damage; root decay;  beware of BEES,YES,"&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"
        </pre>
        <pre class="example highlight" id="example-tree-ops-ext-metadata">
{
  "url": "tree-ops-ext.csv",
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "@id": "http://example.org/tree-ops-ext",
  "dc:title": "Tree Operations",
  "dc:keywords": ["tree", "street", "maintenance"],
  "dc:publisher": [{
    "schema:name": "Example Municipality",
    "schema:url": "http://example.org"
  }],
  "dc:license": {"@id": "http://opendefinition.org/licenses/cc-by/"},
  "dc:modified": {"@value": "2010-12-31", "@type": "xsd:date"},
  "tableSchema": {
    "columns": [{
      "name": "GID",
      "title": [
        "GID",
        "Generic Identifier"
      ],
      "dc:description": "An identifier for the operation on a tree.",
      "datatype": "string",
      "required": true, 
      "suppressOutput": true
    }, {
      "name": "on_street",
      "title": "On Street",
      "dc:description": "The street that the tree is on.",
      "datatype": "string"
    }, {
      "name": "species",
      "title": "Species",
      "dc:description": "The species of the tree.",
      "datatype": "string"
    }, {
      "name": "trim_cycle",
      "title": "Trim Cycle",
      "dc:description": "The operation performed on the tree.",
      "datatype": "string",
      "lang": "en"
    }, {
      "name": "dbh",
      "title": "Diameter at Breast Ht",
      "dc:description": "Diameter at Breast Height (DBH) of the tree (in feet), measured 4.5ft above ground.",
      "datatype": "integer"
    }, {
      "name": "inventory_date",
      "title": "Inventory Date",
      "dc:description": "The date of the operation that was performed.",
      "datatype": {"base": "date", "format": "M/d/yyyy"}
    }, {
      "name": "comments",
      "title": "Comments",
      "dc:description": "Supplementary comments relating to the operation or tree.",
      "datatype": "string",
      "separator": ";"
    }, {
      "name": "protected",
      "title": "Protected",
      "dc:description": "Indication (YES / NO) whether the tree is subject to a protection order.",
      "datatype": {"base": "boolean", "format": "YES|NO"},
      "default": "NO"
    }, {
      "name": "kml",
      "title": "KML",
      "dc:description": "KML-encoded description of tree location.",
      "datatype": "xml"
    }],
    "primaryKey": "GID",
    "aboutUrl": "http://example.org/tree-ops-ext#gid-{GID}"
  }
}
        </pre>

        <p>The <a>annotated table</a> generated from parsing the CSV+ file and associated metadata is shown below and provides the basis for the conversion to RDF.</p>

        <p>Annotations for the resulting <a title="annotated table">table</a> <var>T</var>, with 9 <a title="column">columns</a> and 3 <a title="row">rows</a>, are shown below:</p>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="3">core annotations</th><th rowspan="2" colspan="2">annotations</th></tr>
            <tr><th><code>url</code></th><th>columns</th><th>rows</th></tr>
          </thead>
          <tbody>
            <tr><td><var>T</var></td><td><code>http://example.org/tree-ops-ext.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var>, <var>C5</var>, <var>C6</var>, <var>C7</var>, <var>C8</var>, <var>C9</var></td><td><var>R1</var>, <var>R2</var>, <var>R3</var></td><td><strong><code>@id</code></strong></td><td><code>&lt;http://example.org/tree-ops-ext&gt;</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:title</code></strong></td><td><code>"Tree Operations"</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:keywords</code></strong></td><td><code>["tree", "street", "maintenance"]</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:publisher</code></strong></td><td><code>[{ "schema:name": "Example Municipality", "schema:url": "http://example.org" }]</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:license</code></strong></td><td><code>&lt;http://opendefinition.org/licenses/cc-by/&gt;</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>dc:modified</code></strong></td><td><code>"2010-12-31"</code></td></tr>
            <tr><td></td><td></td><td></td><td></td><td><strong><code>primaryKey</code></strong></td><td><var>C1</var></td></tr>
          </tbody>
        </table>

        <p>Annotations for the <a title="column">columns</a>, <a title="row">rows</a> and <a title="cell">cells</a> in <a title="annotated table">table</a> <var>T</var> are shown in the tables below.</p>

        <p><a href="column">Column</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th><th colspan="5">annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th><code>name</code></th><th><code>title</code></th><th><code>required</code></th><th><code>suppressOutput</code></th><th><code>dc:description</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var>, <var>C3.1</var></td><td><code>GID</code></td><td><code>GID</code>, <code>Generic Identifier</code></td><td><code>true</code></td><td><code>true</code></td><td><code>An identifier for the operation on a tree.</code></td></tr>
            <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var>, <var>C3.2</var></td><td><code>on_street</code></td><td><code>On Street</code></td><td></td><td></td><td><code>The street that the tree is on.</code></td></tr>
            <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var>, <var>C3.3</var></td><td><code>species</code></td><td><code>Species</code></td><td></td><td></td><td><code>The species of the tree.</code></td></tr>
            <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var>, <var>C3.4</var></td><td><code>trim_cycle</code></td><td><code>Trim Cycle</code></td><td></td><td></td><td><code>The operation performed on the tree.</code></td></tr>
            <tr><td><var>C5</var></td><td><var>T</var></td><td>5</td><td>5</td><td><var>C1.5</var>, <var>C2.5</var>, <var>C3.5</var></td><td><code>dbh</code></td><td><code>Diameter at Breast Ht</code></td><td></td><td></td><td><code>Diameter at Breast Height (DBH) of the tree (in feet), measured 4.5ft above ground.</code></td></tr>
            <tr><td><var>C6</var></td><td><var>T</var></td><td>6</td><td>6</td><td><var>C1.6</var>, <var>C2.6</var>, <var>C3.6</var></td><td><code>inventory_date</code></td><td><code>Inventory Date</code></td><td></td><td></td><td><code>The date of the operation that was performed.</code></td></tr>
            <tr><td><var>C7</var></td><td><var>T</var></td><td>7</td><td>7</td><td><var>C1.7</var>, <var>C2.7</var>, <var>C3.7</var></td><td><code>comments</code></td><td><code>Comments</code></td><td></td><td></td><td><code>Supplementary comments relating to the operation or tree.</code></td></tr>
            <tr><td><var>C8</var></td><td><var>T</var></td><td>8</td><td>8</td><td><var>C1.8</var>, <var>C2.8</var>, <var>C3.8</var></td><td><code>protected</code></td><td><code>Protected</code></td><td></td><td></td><td><code>Indication (YES / NO) whether the tree is subject to a protection order.</code></td></tr>
            <tr><td><var>C9</var></td><td><var>T</var></td><td>9</td><td>9</td><td><var>C1.9</var>, <var>C2.9</var>, <var>C3.9</var></td><td><code>kml</code></td><td><code>KML</code></td><td></td><td></td><td><code>KML-encoded description of tree location.</code></td></tr>
          </tbody>
        </table>

        <p class="note">In this example, output for <a>column</a> <var>C1</var> (<code>GID</code>) is not required; note the <a href="http://www.w3.org/TR/tabular-metadata/#column-suppressOutput"><code>suppressOutput</code></a> annotation on this <a>column</a>.</p>

        <p><a title="row">Row</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
          </thead>
          <tbody>
            <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var>, <var>C1.5</var>, <var>C1.6</var>, <var>C1.7</var>, <var>C1.8</var>, <var>C1.9</var></td></tr>
            <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var>, <var>C2.5</var>, <var>C2.6</var>, <var>C2.7</var>, <var>C2.8</var>, <var>C2.9</var></td></tr>
            <tr><td><var>R3</var></td><td><var>T</var></td><td>3</td><td>4</td><td><var>C3.1</var>, <var>C3.2</var>, <var>C3.3</var>, <var>C3.4</var>, <var>C3.5</var>, <var>C3.6</var>, <var>C3.7</var>, <var>C3.8</var>, <var>C3.9</var></td></tr>
          </tbody>
        </table>

        <p><a title="cell">Cell</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="6">core annotations</th><th colspan="5">annotations</th></tr>
            <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>errors</th><th><code>lang</code></th><th><code>datatype</code></th><th><code>format</code></th><th><code>default</code></th><th><code>aboutUrl</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"1"</code></td><td><code>"1"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>http://example.org/tree-ops-ext#gid-1</code></td></tr>
            <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"ADDISON AV"</code></td><td><code>"ADDISON AV"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"Celtis australis"</code></td><td><code>"Celtis australis"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code></td><td></td><td><code>en</code></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R1</var></td><td><code>"11"</code></td><td><code>11</code></td><td></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R1</var></td><td><code>"10/18/2010"</code></td><td><code>2010-10-18</code></td><td></td><td></td><td><code>date</code></td><td><code>M/d/yyyy</code></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>false</code></td><td></td><td></td><td><code>boolean</code></td><td><code>YES|NO</code></td><td><code>"NO"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>
            <tr><td><var>C1.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R1</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td></td><td></td><td><code>xml</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-1&gt;</code></td></tr>

            <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"2"</code></td><td><code>"2"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"EMERSON ST"</code></td><td><code>"EMERSON ST"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"Liquidambar styraciflua"</code></td><td><code>"Liquidambar styraciflua"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code></td><td></td><td><code>en</code></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R2</var></td><td><code>"11"</code></td><td><code>11</code></td><td></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R2</var></td><td><code>"6/2/2010"</code></td><td><code>2010-06-02</code></td><td></td><td></td><td><code>date</code></td><td><code>M/d/yyyy</code></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>false</code></td><td></td><td></td><td><code>boolean</code></td><td><code>YES|NO</code></td><td><code>"NO"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>
            <tr><td><var>C2.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R2</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td></td><td></td><td><code>xml</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-2&gt;</code></td></tr>

            <tr><td><var>C3.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R3</var></td><td><code>"6"</code></td><td><code>"6"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R3</var></td><td><code>"ADDISON AV"</code></td><td><code>"ADDISON AV"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R3</var></td><td><code>"Robinia pseudoacacia"</code></td><td><code>"Robinia pseudoacacia"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R3</var></td><td><code>"Large Tree Routine Prune"</code></td><td><code>"Large Tree Routine Prune"</code></td><td></td><td><code>en</code></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R3</var></td><td><code>"29"</code></td><td><code>29</code></td><td></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R3</var></td><td><code>"6/1/2010"</code></td><td><code>2010-06-01</code></td><td></td><td></td><td><code>date</code></td><td><code>M/d/yyyy</code></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R3</var></td><td><code>"cavity or decay; trunk decay; codominant leaders; included bark; large leader or limb decay; previous failure root damage; root decay;  beware of BEES"</code></td><td><code>"cavity or decay"</code>, <code>"trunk decay"</code>, <code>"codominant leaders"</code>, <code>"included bark"</code>, <code>"large leader or limb decay"</code>, <code>"previous failure root damage"</code>, <code>"root decay"</code>, <code>"beware of BEES"</code></td><td></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R3</var></td><td><code>"YES"</code></td><td><code>true</code></td><td></td><td></td><td><code>boolean</code></td><td><code>YES|NO</code></td><td><code>"NO"</code></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
            <tr><td><var>C3.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R3</var></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td><code>"&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"</code></td><td></td><td></td><td><code>xml</code></td><td></td><td></td><td><code>&lt;http://example.org/tree-ops-ext#gid-6&gt;</code></td></tr>
          </tbody>
        </table>

        <p class="note">For brevity, the <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> is not shown in the table of <a>cell</a> annotations. Where not explicitly set, the value of <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> defaults to the URI Template (see [[RFC6570]]) <code>#{<em>[column-name]</em>}</code>, where <code><em>[column-name]</em></code> is the value of the <a href="http://www.w3.org/TR/tabular-metadata/#column-name"><code>name</code></a> property for the <a>column</a> associated with the <a>cell</a>. For example, the value of <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> for all <a title="cell">cells</a> in <a>column</a> <var>C2</var> (<code>"name": "on_street"</code>) is <code>http://example.org/tree-ops-ext.csv#on_street</code>.</p>

        <p><strong><a title="minimal mode">Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight" id="example-tree-ops-ext-minimal-json">
[{
  "@id": "http://example.org/tree-ops-ext#gid-1",
  "on_street": "ADDISON AV",
  "species": "Celtis australis",
  "trim_cycle": "Large Tree Routine Prune",
  "dbh": 11,
  "inventory_date": "2010-10-18",
  "protected": false,
  "kml": "&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"
}, {
  "@id": "http://example.org/tree-ops-ext#gid-2",
  "on_street": "EMERSON ST",
  "species": "Liquidambar styraciflua",
  "trim_cycle": "Large Tree Routine Prune",
  "dbh": 11,
  "inventory_date": "2010-06-02",
  "protected": false,
  "kml": "&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"
}, {
  "@id": "http://example.org/tree-ops-ext#gid-6",
  "on_street": "ADDISON AV",
  "species": "Robinia pseudoacacia",
  "trim_cycle": "Large Tree Routine Prune",
  "dbh": 29,
  "inventory_date": "2010-06-01",
  "comments": [ "cavity or decay", 
    "trunk decay", 
    "codominant leaders", 
    "included bark",
    "large leader or limb decay", 
    "previous failure root damage", 
    "root decay", 
    "beware of BEES" ],
  "protected": true,
  "kml": "&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"
}]
        </pre>

        <div class="note">
          <p>The <a>subject</a> described by each <a>row</a> is explcitly defined using the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> property; e.g. the <a>subject</a> of <a>row</a> <var>R1</var> is <code>http://example.org/tree-ops-ext#gid-1</code>.</p>
          <p>Output for <a>column</a> <var>C1</var> (<code>{ "name": "GID" }</code>) is not included as <a>column</a> property <a href="http://www.w3.org/TR/tabular-metadata/#column-suppressOutput"><code>suppressOutput</code></a> has value <var>true</var>.</p>
          <p><a Title="cell">Cells</a> <var>C1.7</var> and <var>C2.7</var> (<a title="row">rows</a> <var>R1</var> and <var>R2</var>; <a>column</a>, <code>{ "name": "comments" }</code>) have <code>null</code> <a title="cell value">values</a> - no output is included for these <a title="cell">cells</a>.</p>
          <p><a Title="cell">Cell</a> <var>C3.7</var> (<a>row</a> <var>R3</var>; <a>column</a>, <code>{ "name": "comments" }</code>) contains an unordered sequence of values; the set of values are included in an <a>array</a> - noting that as <a title="array">arrays</a> are implicitly <em>ordered</em> in JSON, the <a href="http://www.w3.org/TR/tabular-metadata/#cell-ordered"><code>ordered</code></a> property has no effect on the JSON output.</p>
        </div>

        <p><strong><a title="standard mode">Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight" id="example-tree-ops-ext-standard-json">
{
  "table": [{
    "@id": "http://example.org/tree-ops-ext",
    "url": "http://example.org/tree-ops-ext.csv",
    "dc:title": "Tree Operations",
    "dc:keywords": [ "tree", "street", "maintenance" ],
    "dc:publisher": [{
      "schema:name": "Example Municipality",
      "schema:url": "http://example.org"
    }],
    "dc:license": "http://opendefinition.org/licenses/cc-by/",
    "dc:modified": "2010-12-31",
    "row": [{
      "rownum": 1,
      "url": "http://example.org/tree-ops-ext.csv#row=2",
      "describes": [{ 
        "@id": "http://example.org/tree-ops-ext#gid-1",
        "on_street": "ADDISON AV",
        "species": "Celtis australis",
        "trim_cycle": "Large Tree Routine Prune",
        "dbh": 11,
        "inventory_date": "2010-10-18",
        "protected": false,
        "kml": "&lt;Point&gt;&lt;coordinates&gt;-122.156485,37.440963&lt;/coordinates&gt;&lt;/Point&gt;"
      }]
    }, {
      "rownum": 2,
      "url": "http://example.org/tree-ops-ext.csv#row=3",
      "describes": [{ 
        "@id": "http://example.org/tree-ops-ext#gid-2",
        "on_street": "EMERSON ST",
        "species": "Liquidambar styraciflua",
        "trim_cycle": "Large Tree Routine Prune",
        "dbh": 11,
        "inventory_date": "2010-06-02",
        "protected": false,
        "kml": "&lt;Point&gt;&lt;coordinates&gt;-122.156749,37.440958&lt;/coordinates&gt;&lt;/Point&gt;"
      }]
    }, {
      "rownum": 3,
      "url": "http://example.org/tree-ops-ext.csv#row=4",
      "describes": [{  
        "@id": "http://example.org/tree-ops-ext#gid-6",
        "on_street": "ADDISON AV",
        "species": "Robinia pseudoacacia",
        "trim_cycle": "Large Tree Routine Prune",
        "dbh": 29,
        "inventory_date": "2010-06-01",
        "comments": [ "cavity or decay", 
          "trunk decay", 
          "codominant leaders", 
          "included bark",
          "large leader or limb decay", 
          "previous failure root damage", 
          "root decay", 
          "beware of BEES" ],
        "protected": true,
        "kml": "&lt;Point&gt;&lt;coordinates&gt;-122.156299,37.441151&lt;/coordinates&gt;&lt;/Point&gt;"
      }]
    }]
  }]
}
        </pre>

        <div class="note">
          <p><a title="annotated table">Table</a> <var>T</var> (<code>{ "url": "http://example.org/tree-ops-ext.csv"}</code>) has been explicitly identified: <code>{ "@id": "&lt;http://exmple.org/tree-ops-ext&gt;"}</code>.</p>
        </div>

      </section>

      <section id="example-events-listing">
        <h3>Example with single table and using <em>virtual columns</em> to produce multiple subjects per row</h3>
        <p>
          This example uses a single <a>annotated table</a> describing a listing of music events. Each <a>row</a> from the CSV+ file corresponds to three resources; the music event itself, the location where that event occurs and the offer to sell tickets for that event. The goal is to convert the CSV content into <a href="http://schema.org">schema.org</a> markup that a search engine such as <a href="http://www.google.com">Google</a>can use to index music events. Details of how Google expects this information to be structured can be found <a href="https://support.google.com/webmasters/answer/4620133?hl=en">here</a>.
        </p>
        <p> 
          The input CSV+ file, published at <code>http://example.org/events-listing.csv</code>, and the associated metadata description <code>http://example.org/events-listing.csv-metadata.json</code> are provided below:
        </p>
        <pre class="example" id="example-events-listing-csv+">
Name, Start Date, Location Name, Location Address, Ticket Url
B.B. King,2014-04-12T19:30,"Lupos Heartbreak Hotel","79 Washington St., Providence, RI",https://www.etix.com/ticket/1771656
B.B. King,2014-04-13T20:00,"Lynn Auditorium","Lynn, MA, 01901",http://frontgatetickets.com/venue.php?id=11766
        </pre>
        <pre class="example highlight" id="example-events-listing-metadata">
{
  "url": "events-listing.csv",
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "tableSchema": {
    "columns": [{
      "name": "name",
      "title": "Name",
      "aboutUrl": "#event-{_row}",
      "propertyUrl": "schema:name"
    }, {
      "name": "start-date",
      "title": "Start Date",
      "datatype": {
        "base": "datetime",
        "format": "yyyy-MM-ddTHH:mm"
      },
      "aboutUrl": "#event-{_row}",
      "propertyUrl": "schema:startDate"
    }, {
      "name": "location-name",
      "title": "Location Name",
      "aboutUrl": "#place-{_row}",
      "propertyUrl": "schema:name"
    }, {
      "name": "location-address",
      "title": "Location Address",
      "aboutUrl": "#place-{_row}",
      "propertyUrl": "schema:address"
    }, {
      "name": "ticket-url",
      "title": "Ticket Url",
      "datatype": "anyURI",
      "aboutUrl": "#offer-{_row}",
      "propertyUrl": "schema:url"
    }, {
      "name": "type-event",
      "virtual": true,
      "aboutUrl": "#event-{_row}",
      "propertyUrl": "rdf:type",
      "valueUrl": "schema:MusicEvent"
    }, {
      "name": "type-place",
      "virtual": true,
      "aboutUrl": "#place-{_row}",
      "propertyUrl": "rdf:type",
      "valueUrl": "schema:Place"
    }, {
      "name": "type-offer",
      "virtual": true,
      "aboutUrl": "#offer-{_row}",
      "propertyUrl": "rdf:type",
      "valueUrl": "schema:Offer"
    }, {
      "name": "location",
      "virtual": true,
      "aboutUrl": "#event-{_row}",
      "propertyUrl": "schema:location",
      "valueUrl": "#place-{_row}"
    }, {
      "name": "offers",
      "virtual": true,
      "aboutUrl": "#event-{_row}",
      "propertyUrl": "schema:offers",
      "valueUrl": "#offer-{_row}"
    }]
  }
}
        </pre>

        <div class="note">
          <p>
            The CSV to RDF translation is limited to providing one statement, or triple, per <a>column</a> in the <a title="annotated table">table</a>. The target <code>schema.org</code> markup requires 10 statements to describe each event. As the base CSV+ file contains 5 columns, an additional 5 <em>virtual <a title="column">columns</a></em> have been added in order to provide for the full complement of statements - including the relationships between the 3 resources (event, location and offer) described by each <a>row</a> of the <a title="annotated table">table</a>. Note that the <a href="http://www.w3.org/TR/tabular-metadata/#column-virtual"><code>virtual</code></a> property is set to <var>true</var> for these <em>virtual <a title="column">columns</a></em>.
          </p>
          <p>
            Furthermore, note that no attempt is made to reconcile between locations or offers that may be associated with more than one event; every <a>row</a> in the <a title="annotated table">table</a> will create both a new location resource and offer resource in addition to the event resource. If considered necessary, applications such as <a href="http://openrefine.org">OpenRefine</a> may be used to identify and reconcile duplicate location resources once the RDF output has been generated.
          </p>
        </div>

        <p>The <a>annotated table</a> generated from parsing the CSV+ file and associated metadata is shown below and provides the basis for the conversion to RDF.</p>

        <p>Annotations for the resulting <a title="annotated table">table</a> <var>T</var>, with 10 <a title="column">columns</a> and 2 <a title="row">rows</a>, are shown below:</p>

        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="3">core annotations</th><th rowspan="2" colspan="2">annotations</th></tr>
            <tr><th><code>url</code></th><th>columns</th><th>rows</th></tr>
          </thead>
          <tbody>
            <tr><td><var>T</var></td><td><code>http://example.org/events-listing.csv</code></td><td><var>C1</var>, <var>C2</var>, <var>C3</var>, <var>C4</var>, <var>C5</var>, <var>C6</var>, <var>C7</var>, <var>C8</var>, <var>C9</var>, <var>C10</var></td><td><var>R1</var>, <var>R2</var></td><td></td><td></td></tr>
          </tbody>
        </table>

        <p>Annotations for the <a title="column">columns</a>, <a title="row">rows</a> and <a title="cell">cells</a> in <a title="annotated table">table</a> <var>T</var> are shown in the tables below.</p>

        <p><a title="column">Column</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th><th colspan="3">annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th><code>name</code></th><th><code>title</code></th><th><code>virtual</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1</var></td><td><var>T</var></td><td>1</td><td>1</td><td><var>C1.1</var>, <var>C2.1</var></td><td><code>name</code></td><td><code>Name</code></td><td></td></tr>
            <tr><td><var>C2</var></td><td><var>T</var></td><td>2</td><td>2</td><td><var>C1.2</var>, <var>C2.2</var></td><td><code>start-date</code></td><td><code>Start Date</code></td></td><td></td></tr>
            <tr><td><var>C3</var></td><td><var>T</var></td><td>3</td><td>3</td><td><var>C1.3</var>, <var>C2.3</var></td><td><code>location-name</code></td><td><code>Location Name</code></td></td><td></td></tr>
            <tr><td><var>C4</var></td><td><var>T</var></td><td>4</td><td>4</td><td><var>C1.4</var>, <var>C2.4</var></td><td><code>location-address</code></td><td><code>Location Address</code></td></td><td></td></tr>
            <tr><td><var>C5</var></td><td><var>T</var></td><td>5</td><td>5</td><td><var>C1.5</var>, <var>C2.5</var></td><td><code>ticket-url</code></td><td><code>Ticket Url</code></td></td><td></td></tr>
            <tr><td><var>C6</var></td><td><var>T</var></td><td>6</td><td>6</td><td><var>C1.6</var>, <var>C2.6</var></td><td><code>type-event</code></td><td></td></td><td><code>true</code></td></tr>
            <tr><td><var>C7</var></td><td><var>T</var></td><td>7</td><td>7</td><td><var>C1.7</var>, <var>C2.7</var></td><td><code>type-place</code></td><td></td><td><code>true</code></td></tr>
            <tr><td><var>C8</var></td><td><var>T</var></td><td>8</td><td>8</td><td><var>C1.8</var>, <var>C2.8</var></td><td><code>type-offer</code></td><td></td><td><code>true</code></td></tr>
            <tr><td><var>C9</var></td><td><var>T</var></td><td>9</td><td>9</td><td><var>C1.9</var>, <var>C2.9</var></td><td><code>location</code></td><td></td><td><code>true</code></td></tr>
            <tr><td><var>C10</var></td><td><var>T</var></td><td>10</td><td>10</td><td><var>C1.10</var>, <var>C2.10</var></td><td><code>offers</code></td><td></td><td><code>true</code></td></tr>
          </tbody>
        </table>

        <p><a title="row">Row</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
          </thead>
          <tbody>
            <tr><td><var>R1</var></td><td><var>T</var></td><td>1</td><td>2</td><td><var>C1.1</var>, <var>C1.2</var>, <var>C1.3</var>, <var>C1.4</var>, <var>C1.5</var>, <var>C1.6</var>, <var>C1.7</var>, <var>C1.8</var>, <var>C1.9</var>, <var>C1.10</var></td></tr>
            <tr><td><var>R2</var></td><td><var>T</var></td><td>2</td><td>3</td><td><var>C2.1</var>, <var>C2.2</var>, <var>C2.3</var>, <var>C2.4</var>, <var>C2.5</var>, <var>C2.6</var>, <var>C2.7</var>, <var>C2.8</var>, <var>C2.9</var>, <var>C2.10</var></td></tr>
          </tbody>
        </table>

        <p><a title="cell">Cell</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="6">core annotations</th><th colspan="5">annotations</th></tr>
            <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>errors</th><th><code>datatype</code></th><th><code>format</code></th><th><code>aboutUrl</code></th><th><code>propertyUrl</code></th><th><code>valueUrl</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>C1.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R1</var></td><td><code>"B.B. King"</code></td><td><code>"B.B. King"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
            <tr><td><var>C1.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R1</var></td><td><code>"2014-04-12T19:30"</code></td><td><code>2014-04-12T19:30:00</code></td><td></td><td><code>datetime</code></td><td><code>yyyy-MM-ddTHH:mm:ss</code></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:startDate</code></td><td></td></tr>
            <tr><td><var>C1.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R1</var></td><td><code>"Lupos Heartbreak Hotel"</code></td><td><code>"Lupos Heartbreak Hotel"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
            <tr><td><var>C1.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R1</var></td><td><code>"79 Washington St., Providence, RI"</code></td><td><code>"79 Washington St., Providence, RI"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>schema:address</code></td><td></td></tr>
            <tr><td><var>C1.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R1</var></td><td><code>"https://www.etix.com/ticket/1771656"</code></td><td><code>&lt;https://www.etix.com/ticket/1771656&gt;</code></td><td></td><td><code>anyURI</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td><td><code>schema:url</code></td><td></td></tr>
            <tr><td><var>C1.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:MusicEvent</code></td></tr>
            <tr><td><var>C1.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Place</code></td></tr>
            <tr><td><var>C1.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Offer</code></td></tr>
            <tr><td><var>C1.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:location</code></td><td><code>&lt;http://example.org/events-listing.csv#place-1&gt;</code></td></tr>
            <tr><td><var>C1.10</var></td><td><var>T</var></td><td><var>C10</var></td><td><var>R1</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-1&gt;</code></td><td><code>schema:offers</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-1&gt;</code></td></tr>

            <tr><td><var>C2.1</var></td><td><var>T</var></td><td><var>C1</var></td><td><var>R2</var></td><td><code>"B.B. King"</code></td><td><code>"B.B. King"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
            <tr><td><var>C2.2</var></td><td><var>T</var></td><td><var>C2</var></td><td><var>R2</var></td><td><code>"2014-04-13T20:00"</code></td><td><code>2014-04-13T20:00:00</code></td><td></td><td><code>datetime</code></td><td><code>yyyy-MM-ddTHH:mm:ss</code></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:startDate</code></td><td></td></tr>
            <tr><td><var>C2.3</var></td><td><var>T</var></td><td><var>C3</var></td><td><var>R2</var></td><td><code>"Lynn Auditorium"</code></td><td><code>"Lynn Auditorium"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>schema:name</code></td><td></td></tr>
            <tr><td><var>C2.4</var></td><td><var>T</var></td><td><var>C4</var></td><td><var>R2</var></td><td><code>"Lynn, MA, 01901"</code></td><td><code>"Lynn, MA, 01901"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>schema:address</code></td><td></td></tr>
            <tr><td><var>C2.5</var></td><td><var>T</var></td><td><var>C5</var></td><td><var>R2</var></td><td><code>"http://frontgatetickets.com/venue.php?id=11766"</code></td><td><code>&lt;http://frontgatetickets.com/venue.php?id=11766&gt;</code></td><td></td><td><code>anyURI</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td><td><code>schema:url</code></td><td></td></tr>
            <tr><td><var>C2.6</var></td><td><var>T</var></td><td><var>C6</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:MusicEvent</code></td></tr>
            <tr><td><var>C2.7</var></td><td><var>T</var></td><td><var>C7</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Place</code></td></tr>
            <tr><td><var>C2.8</var></td><td><var>T</var></td><td><var>C8</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td><td><code>rdf:type</code></td><td><code>schema:Offer</code></td></tr>
            <tr><td><var>C2.9</var></td><td><var>T</var></td><td><var>C9</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:location</code></td><td><code>&lt;http://example.org/events-listing.csv#place-2&gt;</code></td></tr>
            <tr><td><var>C2.10</var></td><td><var>T</var></td><td><var>C10</var></td><td><var>R2</var></td><td><code>""</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/events-listing.csv#event-2&gt;</code></td><td><code>schema:offers</code></td><td><code>&lt;http://example.org/events-listing.csv#offer-2&gt;</code></td></tr>
          </tbody>
        </table>

        <p><strong><a title="minimal mode">Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight" id="example-events-listing-minimal-json">
[{
  "@id": "http://example.org/events-listing.csv#event-1",
  "rdf:type": "schema:MusicEvent",
  "schema:name": "B.B. King",
  "schema:startDate": "2014-04-12T19:30:00",
  "schema:location": {
    "@id": "http://example.org/events-listing.csv#place-1",
    "rdf:type": "schema:Place",
    "schema:name": "Lupos Heartbreak Hotel",
    "schema:address": "79 Washington St., Providence, RI"
  },
  "schema:offer": {
    "@id": "http://example.org/events-listing.csv#offer-1",
    "rdf:type": "schema:Offer",
    "schema:offer": "https://www.etix.com/ticket/1771656"
  }
}, {
  "@id": "http://example.org/events-listing.csv#event-2",
  "rdf:type": "schema:MusicEvent",
  "schema:name": "B.B. King",
  "schema:startDate": "2014-04-13T20:00:00",
  "schema:location": {
    "@id": "http://example.org/events-listing.csv#place-2",
    "rdf:type": "schema:Place",
    "schema:name": "Lynn Auditorium",
    "schema:address": "Lynn, MA, 01901"
  },
  "schema:offer": {
    "@id": "http://example.org/events-listing.csv#offer-2",
    "rdf:type": "schema:Offer",
    "schema:offer": "http://frontgatetickets.com/venue.php?id=11766"
  }
}]
        </pre>

        <div class="note">
          <p>Three resources are defined for each row within the table; event, location and offer - therefore three <a title="object">objects</a> are created for each <a>row</a>.</p>
          <p>Each <a>column</a> explicitly defines both <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> and <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> properties which are inherited by the column's <a title="cell"></a>cells</a>.</p>
          <p><a title="column">Columns</a> <var>C6</var>, <var>C7</var> and <var>C8</var> (<code>{ "name": "type-event"}</code>, <code>{ "name": "type-place"}</code> and <code>{ "name": "type-offer"}</code>) define the semantic types of the resources described by each <a>row</a>: <code>schema:MusicEvent</code>, <code>schema:Place</code> and <code>schema:Offer</code> respectively - noting that the use of <code>rdf:type</code> is not converted to the <a>name</a> <code>@type</code> (as used in [[json-ld]]) by this conversion application as it is not, and does not need to be, JSON-LD-aware.</p>
          <p><a title="column">Column</a> <var>C9</var> (<code>{ "name": "location"}</code>) uses the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> and <a href="http://www.w3.org/TR/tabular-metadata/#cell-valueUrl"><code>valueUrl</code></a> to assert the relationship between the event and location resources.</p>
          <p><a title="column">Column</a> <var>C10</var> (<code>{ "name": "offer"}</code>) uses the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> and <a href="http://www.w3.org/TR/tabular-metadata/#cell-valueUrl"><code>valueUrl</code></a> to assert the relationship between the event and offer resources.</p>
        </div>

        <div class="issue">
          <p>Should we have deep structure in JSON output?</p>
          <p>This example relies on recursion through the <a title="object">objects</a> defined for each <a>subject</a> within a <a>row</a> in order to "plug" related <a title="object">objects</a> together in a hierarchy. This adds a little complexity - but is worth doing (I think) to create graph-like output familiar to most JSON users. Without this recursion, the example would look as shown below with a flat set of <a title="object">objects</a>:</p>
          <pre class="highlight">
[{
  "@id": "http://example.org/events-listing.csv#event-1",
  "rdf:type": "schema:MusicEvent",
  "schema:name": "B.B. King",
  "schema:startDate": "2014-04-12T19:30:00",
  "schema:location": "http://example.org/events-listing.csv#place-1",
  "schema:offer": "http://example.org/events-listing.csv#offer-1"
}, {
  "@id": "http://example.org/events-listing.csv#place-1",
  "rdf:type": "schema:Place",
  "schema:name": "Lupos Heartbreak Hotel",
  "schema:address": "79 Washington St., Providence, RI"
}, {
  "@id": "http://example.org/events-listing.csv#offer-1",
  "rdf:type": "schema:Offer",
  "schema:offer": "https://www.etix.com/ticket/1771656"
}, {
  "@id": "http://example.org/events-listing.csv#event-2",
  "rdf:type": "schema:MusicEvent",
  "schema:name": "B.B. King",
  "schema:startDate": "2014-04-13T20:00:00",
  "schema:location": "http://example.org/events-listing.csv#place-2",
  "schema:offer": "http://example.org/events-listing.csv#offer-2"
}, {
  "@id": "http://example.org/events-listing.csv#place-2",
  "rdf:type": "schema:Place",
  "schema:name": "Lynn Auditorium",
  "schema:address": "Lynn, MA, 01901"
}, {
  "@id": "http://example.org/events-listing.csv#offer-2",
  "rdf:type": "schema:Offer",
  "schema:offer": "http://frontgatetickets.com/venue.php?id=11766"
}]
          </pre>
        </div>

        <p><strong><a title="standard mode">Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight" id="example-events-listing-standard-json">
{
  "table": [{
    "url": "http://example.org/events-listing.csv",
    "row": [{
      "rownum": 1,
      "url": "http://example.org/events-listing.csv#row=2",
      "describes": [{ 
        "@id": "http://example.org/events-listing.csv#event-1",
        "rdf:type": "schema:MusicEvent",
        "schema:name": "B.B. King",
        "schema:startDate": "2014-04-12T19:30:00",
        "schema:location": {
          "@id": "http://example.org/events-listing.csv#place-1",
          "rdf:type": "schema:Place",
          "schema:name": "Lupos Heartbreak Hotel",
          "schema:address": "79 Washington St., Providence, RI"
        },
        "schema:offer": {
          "@id": "http://example.org/events-listing.csv#offer-1",
          "rdf:type": "schema:Offer",
          "schema:offer": "https://www.etix.com/ticket/1771656"
        }
      }]
    }, {
      "rownum": 2,
      "url": "http://example.org/events-listing.csv#row=3",
      "describes": [{ 
        "@id": "http://example.org/events-listing.csv#event-2",
        "rdf:type": "schema:MusicEvent",
        "schema:name": "B.B. King",
        "schema:startDate": "2014-04-13T20:00:00",
        "schema:location": {
          "@id": "http://example.org/events-listing.csv#place-2",
          "rdf:type": "schema:Place",
          "schema:name": "Lynn Auditorium",
          "schema:address": "Lynn, MA, 01901"
        },
        "schema:offer": {
          "@id": "http://example.org/events-listing.csv#offer-2",
          "rdf:type": "schema:Offer",
          "schema:offer": "http://frontgatetickets.com/venue.php?id=11766"
        }
      }]
    }]
  }]
}
        </pre>

        <div class="note">
          <p>The resources described by each <a>row</a> are explcitly defined using the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a> property - in this case three resources per <a>row</a> (event, location and offer); the <a title="object">objects</a> containing the name-values pairs associated with the <a title="cell value">cell values</a> of a <a>row</a> are related to the <a>object</a> for each <a>subject</a> in that <a>row</a> using the name-value pair with <a>name</a> <code>describes</code>.</p>
        </div>
        
      </section>

      <section id="example-public-sector-roles-and-salaries">
        <h3>Example with table group comprising three interrelated tables</h3>
        <p>
          This example is based on <a href="http://www.w3.org/TR/csvw-ucr/#UC-OrganogramData">Use Case #4 - Publication of public sector roles and salaries</a> and uses three <a title="annotated table">annotated tables</a> published within a <a>table group</a>. Information about senior roles and junior roles within a government department are published in CSV format by each department. These are validated against a centrally published <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema" class="externalDFN">schema</a> to ensure that all the data published by departments is consistent. Additionally, a list of professions is also published centrally, providing a <em>controlled vocabulary</em> against which departmental submissions are validated.
        </p>

        <p> 
          The input CSV+ files and the associated metadata description are provided below:
        </p>
        <pre class="example" id="example-public-sector-roles-and-salaries-csv+-professions" title="http://example.org/conf/professions.csv">
Profession
Finance
Information Technology
Operational Delivery
Policy
        </pre>
        <pre class="example" id="example-public-sector-roles-and-salaries-csv+-senior-roles" title="http://example.org/senior-roles.csv">
Post Unique Reference,Name,Grade,Job Title,Reports to Senior Post,Profession
90115,Steve Egan,SCS1A,Deputy Chief Executive,90334,Finance
90334,Sir Alan Langlands,SCS4,Chief Executive,xx,Policy
        </pre>
        <pre class="example" id="example-public-sector-roles-and-salaries-csv+-junior-roles" title="http://example.org/junior-roles.csv">
Reporting Senior Post,Grade,Payscale Minimum (),Payscale Maximum (),Generic Job Title,Number of Posts (FTE),Profession
90115,4,17426,20002,Administrator,8.67,Operational Delivery
90115,5,19546,22478,Administrator,0.5,Operational Delivery
        </pre>
        <pre class="example highlight" id="example-public-sector-roles-and-salaries-metadata" title="http://example.org/metadata.json">
{
  "@type": "TableGroup",
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "resources": [{
    "url": "professions.csv",
    "tableSchema": {
      "columns": [{
        "name": "name",
        "title": "Profession",
        "datatype": "string",
        "required": true
      }],
      "primaryKey": "name"
    },
    "suppressOutput": true
  }, {
    "url": "senior-roles.csv",
    "tableSchema": {
      "columns": [{
        "name": "ref",
        "title": "Post Unique Reference",
        "datatype": "string",
        "required": true,
        "propertyUrl": "dc:identifier"
      }, {
        "name": "name",
        "title": "Name",
        "datatype": "string",
        "propertyUrl": "foaf:name"
      }, {
        "name": "grade",
        "title": "Grade",
        "datatype": "string",
        "propertyUrl": "http://example.org/def/grade"
      }, {
        "name": "job",
        "title": "Job Title",
        "datatype": "string",
        "propertyUrl": "http://example.org/def/job"
      }, {
        "name": "reportsTo",
        "title": "Reports to Senior Post",
        "datatype": "string",
        "null": "xx",
        "propertyUrl": "http://example.org/def/reportsTo",
        "valueUrl": "senior-roles.csv#post-{reportsTo}"
      }, {
        "name": "profession",
        "title": "Profession",
        "datatype": "string",
        "propertyUrl": "http://example.org/def/profession"
      }],
      "primaryKey": "ref",
      "aboutUrl": "#post-{ref}",
      "foreignKeys": [{
        "columns": "reportsTo",
        "reference": {
          "resource": "senior-roles.csv",
          "columns": "ref"
        }
      }, {
        "columns": "profession",
        "reference": {
          "resource": "professions.csv",
          "columns": "name"
        }
      }]
    }
  }, {
    "url": "junior-roles.csv",
    "tableSchema": {
      "columns": [{
        "name": "reportsToSenior",
        "title": "Reporting Senior Post",
        "datatype": "string",
        "propertyUrl": "http://example.org/def/reportsTo",
        "valueUrl": "senior-roles.csv#post-{reportsToSenior}",
        "required": true
      }, {
        "name": "grade",
        "title": "Grade",
        "datatype": "string",
        "propertyUrl": "http://example.org/def/grade"
      }, {
        "name": "min-pay",
        "title": "Payscale Minimum ()",
        "datatype": "integer",
        "propertyUrl": "http://example.org/def/min-pay"
      }, {
        "name": "max-pay",
        "title": "Payscale Maximum ()",
        "datatype": "integer",
        "propertyUrl": "http://example.org/def/max-pay"
      }, {
        "name": "job",
        "title": "Generic Job Title",
        "datatype": "string",
        "propertyUrl": "http://example.org/def/job"
      }, {
        "name": "number",
        "title": "Number of Posts (FTE)",
        "datatype": "number",
        "propertyUrl": "http://example.org/def/number-of-posts" 
      }, {
        "name": "profession",
        "title": "Profession",
        "datatype": "string",
        "propertyUrl": "http://example.org/def/profession"
      }],
      "foreignKeys": [{
        "columns": "reportsToSenior",
        "reference": {
          "resource": "senior-roles.csv",
          "columns": "ref"
        }
      }, {
        "columns": "profession",
        "reference": {
          "resource": "professions.csv",
          "columns": "name"
        }
      }]
    }
  }]
}
        </pre>

        <div class="issue" data-number="286">
          <p>Currently <code>professions.csv</code> is identified using a relative URL; it is supposed to be centrally published at a remote address (e.g. <code>http://example.org/conf/professions.csv</code>) and referenced from the metadata description file which is in the same directory as the <code>senior-roles.csv</code> and <code>junior-roles.csv</code> files published by the government department.</p>
          <p><strong>@gkellogg</strong> says: "<em>Need to pervasively use relative URLs as, at least for my implementation, using a separate local location vs. declared location doesn't work."</em></p>
        </div>

        <p class="note">The metadata description, <code>http://example.org/metadata.json</code>, need not be modified by the government departments publishing information about their senior roles and junior roles. The CSV+ files containing this information are <em>assumed</em> to be in the same directory as the metadata description and named <code>senior-roles.csv</code> and <code>junior-roles.csv</code>.</p>

        <p>The <a>table group</a> generated from parsing the CSV+ files and associated metadata is shown below and provides the basis for the conversion to RDF.</p>

        <p>Annotations for the <a>table group</a> <var>G</var> and the three <a title="annotated table">tables</a> <var>Ta</var>, <var>Tb</var>, and <var>Tc</var> are shown below.</p>

        <p><a title="table group">Table Group</a> annotations:</p>
        <table>
          <thead>
            <tr><th rowspan="2">id</th><th>core annotations</th><th rowspan="2" colspan="2">annotations</th></tr>
            <tr><th><code>resources</code></th>
          </thead>
          <tbody>
            <tr><td><var>G</var></td><td><var>Ta</var>, <var>Tb</var>, <var>Tc</var></td><td><strong><code>@type</code></strong></td><td><code>TableGroup</code></td></tr>
          </tbody>
        </table>

        <p><a title="annotated table">Table</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="3">id</th><th colspan="3">core annotations</th><th colspan="3">annotations</th></tr>
            <tr><th rowspan="2"><code>url</code></th><th rowspan="2">columns</th><th rowspan="2">rows</th><th rowspan="2"><code>primaryKey</code></th><th rowspan="2"><code>suppressOutput</code></th><th colspan="2"><code>foreignKeys</code></th></tr>
            <tr><th><code>columns</code></th><th><code>reference</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>Ta</var></td><td><code>http://example.org/conf/professions.csv</code></td><td><var>Ca1</var></td><td><var>Ra1</var>, <var>Ra2</var>, <var>Ra3</var>, <var>Ra4</var></td><td><var>Ca1</var></td><td><code>true</code></td><td></td><td></td></tr>

            <tr><td><var>Tb</var></td><td><code>http://example.org/senior-roles.csv</code></td><td><var>Cb1</var>, <var>Cb2</var>, <var>Cb3</var>, <var>Cb4</var>, <var>Cb5</var>, <var>Cb6</var></td><td><var>Rb1</var>, <var>Rb2</var></td><td><var>Cb1</var></td><td></td><td><var>Cb5</var></td><td><var>Cb1</var></td></tr>
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td><var>Cb6</var></td><td><var>Ca1</var></td></tr>
            
            <tr><td><var>Tc</var></td><td><code>http://example.org/junior-roles.csv</code></td><td><var>Cc1</var>, <var>Cc2</var>, <var>Cc3</var>, <var>Cc4</var>, <var>Cc5</var>, <var>Cc6</var>, <var>Cc7</var></td><td><var>Rc1</var>, <var>Rc2</var></td><td></td><td></td><td><var>Cc1</var></td><td><var>Cb1</var></td></tr>
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td><var>Cc7</var></td><td><var>Ca1</var></td></tr>
          </tbody>
        </table>

        <p class="note">In this example, output for the centrally published list of professions, table <var>Ta</var> (<code>http://example.org/conf/professions.csv</code>), is not required; only information from the departmental submissions is to be translated to RDF. Note the <a href="http://www.w3.org/TR/tabular-metadata/#table-suppressOutput"><code>suppressOutput</code></a> annotation on this <a title="annotated table">table</a>.</p>

        <p>Annotations for the <a title="column">columns</a>, <a title="row">rows</a> and <a title="cell">cells</a> in <a title="annotated table">table</a> <var>T</var> are shown in the tables below.</p>

        <p><a title="column">Column</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th><th colspan="3">annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th><th><code>name</code></th><th><code>title</code></th><th><code>required</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>Ca1</var></td><td><var>Ta</var></td><td>1</td><td>1</td><td><var>Ca1.1</var>, <var>Ca2.1</var>, <var>Ca3.1</var>, <var>Ca4.1</var></td><td><code>name</code></td><td><code>Profession</code></td><td><code>true</code></td></tr>

            <tr><td><var>Cb1</var></td><td><var>Tb</var></td><td>1</td><td>1</td><td><var>Cb1.1</var>, <var>Cb2.1</var></td><td><code>ref</code></td><td><code>Post Unique Reference</code></td><td><code>true</code></td></tr>
            <tr><td><var>Cb2</var></td><td><var>Tb</var></td><td>2</td><td>2</td><td><var>Cb1.2</var>, <var>Cb2.2</var></td><td><code>name</code></td><td><code>Name</code></td><td></td></tr>
            <tr><td><var>Cb3</var></td><td><var>Tb</var></td><td>3</td><td>3</td><td><var>Cb1.3</var>, <var>Cb2.3</var></td><td><code>grade</code></td><td><code>Grade</code></td><td></td></tr>
            <tr><td><var>Cb4</var></td><td><var>Tb</var></td><td>4</td><td>4</td><td><var>Cb1.4</var>, <var>Cb2.4</var></td><td><code>job</code></td><td><code>Job Title</code></td><td></td></tr>
            <tr><td><var>Cb5</var></td><td><var>Tb</var></td><td>5</td><td>5</td><td><var>Cb1.5</var>, <var>Cb2.5</var></td><td><code>reportsTo</code></td><td><code>Reports to Senior Post</code></td><td></td></tr>
            <tr><td><var>Cb6</var></td><td><var>Tb</var></td><td>6</td><td>6</td><td><var>Cb1.6</var>, <var>Cb2.6</var></td><td><code>profession</code></td><td><code>Profession</code></td><td></td></tr>

            <tr><td><var>Cc1</var></td><td><var>Tc</var></td><td>1</td><td>1</td><td><var>Cc1.1</var>, <var>Cc2.1</var></td><td><code>reportsToSenior</code></td><td><code>Reporting Senior Post</code></td><td></td></tr>
            <tr><td><var>Cc2</var></td><td><var>Tc</var></td><td>2</td><td>2</td><td><var>Cc1.2</var>, <var>Cc2.2</var></td><td><code>grade</code></td><td><code>Grade</code></td><td></td></tr>
            <tr><td><var>Cc3</var></td><td><var>Tc</var></td><td>3</td><td>3</td><td><var>Cc1.3</var>, <var>Cc2.3</var></td><td><code>min-pay</code></td><td><code>Payscale Minimum ()</code></td><td></td></tr>
            <tr><td><var>Cc4</var></td><td><var>Tc</var></td><td>4</td><td>4</td><td><var>Cc1.4</var>, <var>Cc2.4</var></td><td><code>max-pay</code></td><td><code>Payscale Maximum ()</code></td><td></td></tr>
            <tr><td><var>Cc5</var></td><td><var>Tc</var></td><td>5</td><td>5</td><td><var>Cc1.5</var>, <var>Cc2.5</var></td><td><code>job</code></td><td><code>Generic Job Title</code></td><td></td></tr>
            <tr><td><var>Cc6</var></td><td><var>Tc</var></td><td>6</td><td>6</td><td><var>Cc1.6</var>, <var>Cc2.6</var></td><td><code>number</code></td><td><code>Number of Posts (FTE)</code></td><td></td></tr>
            <tr><td><var>Cc7</var></td><td><var>Tc</var></td><td>7</td><td>7</td><td><var>Cc1.7</var>, <var>Cc2.7</var></td><td><code>profession</code></td><td><code>Profession</code></td><td></td></tr>
          </tbody>
        </table>

        <p><a title="row">Row</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="4">core annotations</th></tr>
            <tr><th>table</th><th>number</th><th>source number</th><th>cells</th></tr>
          </thead>
          <tbody>
            <tr><td><var>Ra1</var></td><td><var>Ta</var></td><td>1</td><td>2</td><td><var>Ca1.1</var></td></tr>
            <tr><td><var>Ra2</var></td><td><var>Ta</var></td><td>2</td><td>3</td><td><var>Ca2.1</var></td></tr>
            <tr><td><var>Ra3</var></td><td><var>Ta</var></td><td>3</td><td>4</td><td><var>Ca3.1</var></td></tr>
            <tr><td><var>Ra4</var></td><td><var>Ta</var></td><td>4</td><td>5</td><td><var>Ca4.1</var></td></tr>

            <tr><td><var>Rb1</var></td><td><var>Tb</var></td><td>1</td><td>2</td><td><var>Cb1.1</var>, <var>Cb1.2</var>, <var>Cb1.3</var>, <var>Cb1.4</var>, <var>Cb1.5</var>, <var>Cb1.6</var></td></tr>
            <tr><td><var>Rb2</var></td><td><var>Tb</var></td><td>2</td><td>3</td><td><var>Cb2.1</var>, <var>Cb2.2</var>, <var>Cb2.3</var>, <var>Cb2.4</var>, <var>Cb2.5</var>, <var>Cb2.6</var></td></tr>

            <tr><td><var>Rc1</var></td><td><var>Tc</var></td><td>1</td><td>2</td><td><var>Cc1.1</var>, <var>Cc1.2</var>, <var>Cc1.3</var>, <var>Cc1.4</var>, <var>Cc1.5</var>, <var>Cc1.6</var>, <var>Cc1.7</var></td></tr>
            <tr><td><var>Rc2</var></td><td><var>Tc</var></td><td>2</td><td>3</td><td><var>Cc2.1</var>, <var>Cc2.2</var>, <var>Cc2.3</var>, <var>Cc2.4</var>, <var>Cc2.5</var>, <var>Cc2.6</var>, <var>Cc2.7</var></td></tr>
          </tbody>
        </table>

        <p><a title="cell">Cell</a> annotations:</p>
        <table style="width: 100%; text-align: left">
          <thead>
            <tr><th rowspan="2">id</th><th colspan="6">core annotations</th><th colspan="5">annotations</th></tr>
            <tr><th>table</th><th>column</th><th>row</th><th>string value</th><th>value</th><th>errors</th><th><code>datatype</code></th><th><code>null</code></th><th><code>aboutUrl</code></th><th><code>propertyUrl</code></th><th><code>valueUrl</code></th></tr>
          </thead>
          <tbody>
            <tr><td><var>Ca1.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra1</var></td><td><code>"Finance"</code></td><td><code>"Finance"</code></td><td></td><td><code>string</code></td><td></td><td></td><td></td><td></td></tr>

            <tr><td><var>Ca2.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra2</var></td><td><code>"Information Technology"</code></td><td><code>"Information Techology"</code></td><td></td><td><code>string</code></td><td></td><td></td><td></td><td></td></tr>

            <tr><td><var>Ca3.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra3</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td><code>string</code></td><td></td><td></td><td></td><td></td></tr>

            <tr><td><var>Ca4.1</var></td><td><var>Ta</var></td><td><var>Ca1</var></td><td><var>Ra4</var></td><td><code>"Policy"</code></td><td><code>"Policy"</code></td><td></td><td><code>string</code></td><td></td><td></td><td></td><td></td></tr>


            <tr><td><var>Cb1.1</var></td><td><var>Tb</var></td><td><var>Cb1</var></td><td><var>Rb1</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>dc:identifier</code></td><td></td></tr>
            <tr><td><var>Cb1.2</var></td><td><var>Tb</var></td><td><var>Cb2</var></td><td><var>Rb1</var></td><td><code>"Steve Egan"</code></td><td><code>"Steve Egan"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>foaf:name</code></td><td></td></tr>
            <tr><td><var>Cb1.3</var></td><td><var>Tb</var></td><td><var>Cb3</var></td><td><var>Rb1</var></td><td><code>"SCS1A"</code></td><td><code>"SCS1A"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>&lt;http://example.org/def/grade&gt;</code></td><td></td></tr>
            <tr><td><var>Cb1.4</var></td><td><var>Tb</var></td><td><var>Cb4</var></td><td><var>Rb1</var></td><td><code>"Deputy Chief Executive"</code></td><td><code>"Deputy Chief Executive"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>&lt;http://example.org/def/job&gt;</code></td><td></td></tr>
            <tr><td><var>Cb1.5</var></td><td><var>Tb</var></td><td><var>Cb5</var></td><td><var>Rb1</var></td><td><code>"90334"</code></td><td><code>"90334"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>&lt;http://example.org/def/reportsTo&gt;</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td></tr>
            <tr><td><var>Cb1.6</var></td><td><var>Tb</var></td><td><var>Cb6</var></td><td><var>Rb1</var></td><td><code>"Finance"</code></td><td><code>"Finance"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td><td><code>&lt;http://example.org/def/profession&gt;</code></td><td></td></tr>  

            <tr><td><var>Cb2.1</var></td><td><var>Tb</var></td><td><var>Cb1</var></td><td><var>Rb2</var></td><td><code>"90334"</code></td><td><code>"90334"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>dc:identifier</code></td><td></td></tr>
            <tr><td><var>Cb2.2</var></td><td><var>Tb</var></td><td><var>Cb2</var></td><td><var>Rb2</var></td><td><code>"Sir Alan Langlands"</code></td><td><code>"Sir Alan Langlands"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>foaf:name</code></td><td></td></tr>
            <tr><td><var>Cb2.3</var></td><td><var>Tb</var></td><td><var>Cb3</var></td><td><var>Rb2</var></td><td><code>"SCS4"</code></td><td><code>"SCS4"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>&lt;http://example.org/def/grade&gt;</code></td><td></td></tr>
            <tr><td><var>Cb2.4</var></td><td><var>Tb</var></td><td><var>Cb4</var></td><td><var>Rb2</var></td><td><code>"Chief Executive"</code></td><td><code>"Chief Executive"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>&lt;http://example.org/def/job&gt;</code></td><td></td></tr>
            <tr><td><var>Cb2.5</var></td><td><var>Tb</var></td><td><var>Cb5</var></td><td><var>Rb2</var></td><td><code>"xx"</code></td><td><code>null</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>&lt;http://example.org/def/reportsTo&gt;</code></td><td></td></tr>
            <tr><td><var>Cb2.6</var></td><td><var>Tb</var></td><td><var>Cb6</var></td><td><var>Rb2</var></td><td><code>"Policy"</code></td><td><code>"Policy"</code></td><td></td><td><code>string</code></td><td></td><td><code>&lt;http://example.org/senior-roles.csv#post-90334&gt;</code></td><td><code>&lt;http://example.org/def/profession&gt;</code></td><td></td></tr>


            <tr><td><var>Cc1.1</var></td><td><var>Tc</var></td><td><var>Cc1</var></td><td><var>Rc1</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/def/reportsTo&gt;</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td></tr>
            <tr><td><var>Cc1.2</var></td><td><var>Tc</var></td><td><var>Cc2</var></td><td><var>Rc1</var></td><td><code>"4"</code></td><td><code>"4"</code></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/def/grade&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.3</var></td><td><var>Tc</var></td><td><var>Cc3</var></td><td><var>Rc1</var></td><td><code>"17426"</code></td><td><code>17426</code></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/def/min-pay&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.4</var></td><td><var>Tc</var></td><td><var>Cc4</var></td><td><var>Rc1</var></td><td><code>"20002"</code></td><td><code>20002</code></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/def/max-pay&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.5</var></td><td><var>Tc</var></td><td><var>Cc5</var></td><td><var>Rc1</var></td><td><code>"Administrator"</code></td><td><code>"Administrator"</code></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/def/job&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.6</var></td><td><var>Tc</var></td><td><var>Cc6</var></td><td><var>Rc1</var></td><td><code>"8.67"</code></td><td><code>8.67</code></td><td></td><td><code>number</code></td><td></td><td></td><td><code>&lt;http://example.org/def/number-of-posts&gt;</code></td><td></td></tr>
            <tr><td><var>Cc1.7</var></td><td><var>Tc</var></td><td><var>Cc7</var></td><td><var>Rc1</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/def/profession&gt;</code></td><td></td></tr>

            <tr><td><var>Cc2.1</var></td><td><var>Tc</var></td><td><var>Cc1</var></td><td><var>Rc2</var></td><td><code>"90115"</code></td><td><code>"90115"</code></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/def/reportsTo&gt;</code></td><td><code>&lt;http://example.org/senior-roles.csv#post-90115&gt;</code></td></tr>
            <tr><td><var>Cc2.2</var></td><td><var>Tc</var></td><td><var>Cc2</var></td><td><var>Rc2</var></td><td><code>"5"</code></td><td><code>"5"</code></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/def/grade&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.3</var></td><td><var>Tc</var></td><td><var>Cc3</var></td><td><var>Rc2</var></td><td><code>"19546"</code></td><td><code>19546</code></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/def/min-pay&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.4</var></td><td><var>Tc</var></td><td><var>Cc4</var></td><td><var>Rc2</var></td><td><code>"22478"</code></td><td><code>22478</code></td><td></td><td><code>integer</code></td><td></td><td></td><td><code>&lt;http://example.org/def/max-pay&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.5</var></td><td><var>Tc</var></td><td><var>Cc5</var></td><td><var>Rc2</var></td><td><code>"Administrator"</code></td><td><code>"Administrator"</code></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/def/job&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.6</var></td><td><var>Tc</var></td><td><var>Cc6</var></td><td><var>Rc2</var></td><td><code>"0.5"</code></td><td><code>0.5</code></td><td></td><td><code>number</code></td><td></td><td></td><td><code>&lt;http://example.org/def/number-of-posts&gt;</code></td><td></td></tr>
            <tr><td><var>Cc2.7</var></td><td><var>Tc</var></td><td><var>Cc7</var></td><td><var>Rc2</var></td><td><code>"Operational Delivery"</code></td><td><code>"Operational Delivery"</code></td><td></td><td><code>string</code></td><td></td><td></td><td><code>&lt;http://example.org/def/profession&gt;</code></td><td></td></tr>
          </tbody>
        </table>

        <p><strong><a title="minimal mode">Minimal mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight" id="example-public-sector-roles-and-salaries-minimal-json">
[{
  "@id": "http://example.org/senior-roles.csv#post-90115",
  "dc:identifier": "90115",
  "foaf:name": "Steve Egan",
  "http://example.org/def/grade": "SCS1A",
  "http://example.org/def/job": "Deputy Chief Executive",
  "http://example.org/def/reportsTo": "http://example.org/senior-roles.csv#post-90334",
  "http://example.org/def/profession": "Finance"
}, {
  "@id": "http://example.org/senior-roles.csv#post-90334",
  "dc:identifier": "90334",
  "foaf:name": "Sir Alan Langlands",
  "http://example.org/def/grade": "SCS4",
  "http://example.org/def/job": "Chief Executive",
  "http://example.org/def/profession": "Policy"
}, {
  "http://example.org/def/reportsTo": "http://example.org/senior-roles.csv#post-90115",
  "http://example.org/def/grade": "4",
  "http://example.org/def/min-pay": 17426,
  "http://example.org/def/max-pay": 20002,
  "http://example.org/def/job": "Administrator",
  "http://example.org/def/number-of-posts": 8.67,
  "http://example.org/def/profession": "Operational Delivery"
}, {
  "http://example.org/def/reportsTo": "http://example.org/senior-roles.csv#post-90115",
  "http://example.org/def/grade": "5",
  "http://example.org/def/min-pay": 19546,
  "http://example.org/def/max-pay": 22478,
  "http://example.org/def/job": "Administrator",
  "http://example.org/def/number-of-posts": 0.5,
  "http://example.org/def/profession": "Operational Delivery"
}]
        </pre>

        <div class="note">
          <p>Prefixes defined within the <a href="http://www.w3.org/2011/rdfa-context/rdfa-1.1">RDFa 1.1 Initial Context</a> ([[rdfa-core]]) are not expanded; e.g. <code>dc:</code> for &lt;http://purl.org/dc/terms/&gt;.</p>
          <p>Output for <a title="annotated table">table</a> <var>Ta</var> (<code>{ "url": "http://example.org/conf/professions.csv" }</code>) is not included as property <a href="http://www.w3.org/TR/tabular-metadata/#table-suppressOutput"><code>suppressOutput</code></a> has value <var>true</var>.</p>
          <p>The <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> is specified for all <a title="cell">cells</a> in <a title="annotated table">tables</a> <var>Tb</var> and <var>Tc</var>.</p>
          <p><a title="column">Columns</a> <var>Cb5</var> and <var>Cc1</var> (<code>{ "name": "reportsTo" }</code> and <code>{ "name": "reportsToSenior" }</code>) use the <a href="http://www.w3.org/TR/tabular-metadata/#cell-aboutUrl"><code>aboutUrl</code></a>, <a href="http://www.w3.org/TR/tabular-metadata/#cell-propertyUrl"><code>propertyUrl</code></a> and <a href="http://www.w3.org/TR/tabular-metadata/#cell-valueUrl"><code>valueUrl</code></a> properties to assert the relationship between the given post and the senior post it reports to for the <a title="cell">cells</a> therein. However, since senior posts and junior posts are described in different tables so it is not possible to create nested <a title="object">objects</a> for this particular case.</p>
        </div>

        <p><strong><a title="standard mode">Standard mode</a></strong> output for this example is provided below:</p>

        <pre class="example highlight" id="example-public-sector-roles-and-salaries-standard-json">
{
  "table": [{
    "url": "http://example.org/senior-roles.csv",
    "row": [{
      "rownum": 1,
      "url": "http://example.org/senior-roles.csv#row=2",
      "describes": [{ 
        "@id": "http://example.org/senior-roles.csv#post-90115",
        "dc:identifier": "90115",
        "foaf:name": "Steve Egan",
        "http://example.org/def/grade": "SCS1A",
        "http://example.org/def/job": "Deputy Chief Executive",
        "http://example.org/def/reportsTo": "http://example.org/senior-roles.csv#post-90334",
        "http://example.org/def/profession": "Finance"
      }]
    }, {
      "rownum": 2,
      "url": "http://example.org/senior-roles.csv#row=3",
      "describes": [{ 
        "@id": "http://example.org/senior-roles.csv#post-90334",
        "dc:identifier": "90334",
        "foaf:name": "Sir Alan Langlands",
        "http://example.org/def/grade": "SCS4",
        "http://example.org/def/job": "Chief Executive",
        "http://example.org/def/profession": "Policy"
      }]
    }]
  }, {
    "url": "http://example.org/junior-roles.csv",
    "row": [{
      "rownum": 1,
      "url": "http://example.org/junior-roles.csv#row=2",
      "describes": [{ 
        "http://example.org/def/reportsTo": "http://example.org/senior-roles.csv#post-90115",
        "http://example.org/def/grade": "4",
        "http://example.org/def/min-pay": 17426,
        "http://example.org/def/max-pay": 20002,
        "http://example.org/def/job": "Administrator",
        "http://example.org/def/number-of-posts": 8.67,
        "http://example.org/def/profession": "Operational Delivery"
      }]
    }, {
      "rownum": 2,
      "url": "http://example.org/junior-roles.csv#row=3",
      "describes": [{ 
        "http://example.org/def/reportsTo": "http://example.org/senior-roles.csv#post-90115",
        "http://example.org/def/grade": "5",
        "http://example.org/def/min-pay": 19546,
        "http://example.org/def/max-pay": 22478,
        "http://example.org/def/job": "Administrator",
        "http://example.org/def/number-of-posts": 0.5,
        "http://example.org/def/profession": "Operational Delivery"
      }]
    }]
  }]
}
        </pre>
      </section>

    </section>

    <section id="map-core-tab">
      <h2>Mapping Core Tabular Data</h2>
        <p>The procedures and rules for mapping tabular data compliant with the
          <a href="http://www.w3.org/TR/tabular-data-model/#dfn-core-tabular-data-model">
          core tabular data model</a> are described below.</p>
        <p class="note">Core Tabular Data lacks any annotation; neither from the header
          line within the CSV file nor from a separate metadata document.</p>
      <section id="map-core-tab-json">
        <h3>Generating JSON</h3>
        <section id="map-core-tab-table">
          <h4>Table-level processing</h4>
          <ol>
            <li>
              <p>The root object of the <a title="output graph">output graph</a> SHALL 
                describe the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table">table</a>.</p>
            </li>
            <li>
              <p>The root object SHALL contain a reference to the CSV-encoded <em>
                distribution</em> of the tabular data.</p>
              <p>The <em>distribution</em> SHALL be described using an object with <em>name</em>
                <code>distribution</code> that contains the <em>name/value pair</em> 
                <code>"downloadURL": "<em>[CSV-LOCATION]</em>"</code> where <code><em>[CSV-LOCATION]</em></code>
                is the absolute URL of the source CSV file.</p> 
              <p class="note">The semantics of properties <code>distribution</code> and 
                <code>downloadURL</code> correspond with the properties 
                <code><a href="http://www.w3.org/ns/dcat#distribution">dcat:distribution</a></code> and 
                <code><a href="http://www.w3.org/ns/dcat#downloadURL">dcat:downloadURL</a></code> as defined 
                in [[vocab-dcat]].</p>
              <p class="issue" data-number="93">Are the abstract tabular data and the CSV that 
                encodes it the same thing? (Is DCAT distribution appropriate?)</p>
            </li> 
            <li>
              <p>The root object SHALL contain an array named <code>row</code> containing 
                one object for each of the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">rows</a> within the 
                tabular data.</p>
              <p class="issue" data-number="97">What should the name of the property be that 
                relates rows to the table? <code>row</code> is one option; <code>hasRow</code>
                is another.</p>
              <p>Refer to <a href="#map-core-tab-row">Section 3.1.2 Row-level processing</a>
                for further details.</p>
            </li>
          </ol>
        </section>
        <section id="map-core-tab-row">
          <h4>Row-level processing</h4>
          <p>Each <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">row</a>
            in the tabular data is processed sequentially.</p>
          <ol>
            <li>
              <p>Each object in the <a title="output graph">output graph</a> corresponding to a 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">row</a> in the
                tabular data SHALL contain one <em>name/value pair</em> for each
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a> 
                where the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                is not <em>null</em> (e.g. where the cell does not contain an empty string; 
                <code>""</code>).</p>
            </li>
            <li>
              <p>The value of <em>name</em> SHALL be <code>_col.<em>[N]</em></code> 
                where <code><em>[N]</em></code> is the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column-number">column number</a>,
                whilst the value of <em>value</em> SHALL be provided by the associated
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>.</p>
              <p class="issue" data-number="33">What do to with conversion if no column name 
                is given?</p>
            </li>
            <li>
              <p>Where the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                is <em>null</em>, the <em>name/value pair</em> SHALL be omitted from the 
                <a title="output graph">output graph</a>.</p>
            </li>
            <li>
              <p>Given the absence of metadata annotations to indicate the type of data present
               in a given column, all 
               <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell values</a> 
               SHALL be treated as strings.</p>  
            </li>
          </ol>
          <p class="issue" data-number="98">Should the mapping output for a given row include 
            a reference to the CSV source row?</p>
        </section>
      </section>
      <section id="map-core-tab-examples">
        <h3>Examples</h3>
        <p>The following example provides a numeric score for four fictional people. A row
          number is included for convenience. There are four columns and four rows. Given 
          that no metadata annotations are provided, it is very difficult to ascertain the 
          subject of the tabular data without additional insight.</p>

        <table style="width: 60%">
          <tr>
            <td>1</td>
            <td>Jill</td>
            <td>Smith</td> 
            <td>50</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Eve</td>
            <td></td> 
            <td>94</td>
          </tr>
          <tr>
            <td>3</td>
            <td>Adam</td>
            <td>Johnson</td> 
            <td></td>
          </tr>
          <tr>
            <td>4</td>
            <td>John</td>
            <td>Doe</td> 
            <td>80</td>
          </tr>
        </table>

        <p>The CSV input (published at <code>http://example.org/people-and-points.csv</code>):</p>

        <pre class="example" id="map-core-tab-examples-input" title="CSV input ">
1,Jill,Smith,50
2,Eve,,94
3,Adam,Johnson,
4,John,Doe,80
        </pre>

        <p>The resulting JSON output graph:</p>

        <pre class="example" id="map-core-tab-examples-output" title="JSON output">
{
  "distribution": {
    "downloadURL": "http://example.org/people-and-points.csv"
  },
  "row": [{
    "_col.1": "1",
    "_col.2": "Jill",
    "_col.3": "Smith",
    "_col.4": "50"
  },{
    "_col.1": "2",
    "_col.2": "Eve",
    "_col.4": "94"
  },{
    "_col.1": "3",
    "_col.2": "Adam",
    "_col.3": "Johnson"
  },{
    "_col.1": "4",
    "_col.2": "John",
    "_col.3": "Doe",
    "_col.4": "80"
  }]
}
        </pre>

      </section>
    </section>
    <section id="map-annotated-tab">
      <h2>Mapping Annotated Tabular Data</h2>
      <p>The procedures and rules for mapping annotated tabular data compliant with the
        <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotated-tabular-data-model">
        annotated tabular data model</a> are described below.</p>
      <p>The metadata for annotated tabular data MAY be provided by either or both
        of the following sources:</p>
      <ul>
        <li>the <a href="http://www.w3.org/TR/tabular-data-model/#dfn-header-line">
          header line</a> within the CSV file; and/or</li>
        <li>the <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-description">
          table description</a>, 
          <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema">tableSchema</a> and 
          <a href="http://www.w3.org/TR/tabular-metadata/#dfn-column-description">
          column descriptions</a> (as defined in [[!tabular-metadata]]) within the 
          associated metadata document.</li>
      </ul>
      <p>Mapping applications SHALL establish a 
        <a title="column description object">column description object</a> for each
        <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a> within
        the annotated tabular data. The <dfn title="column description object">column 
        description object</dfn> contains the aggregated set
        of metadata properties for a given column that affect how the 
        <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell values</a>
        within the associated column are expressed in the <a title="output graph">
        output graph</a>. Metadata properties are sourced from the 
        <a href="http://www.w3.org/TR/tabular-data-model/#dfn-header-line">header line</a>
        in the CSV file and <a href="http://www.w3.org/TR/tabular-metadata/#dfn-column-description">
        column description</a> in the metadata document and enriched with 
        <a href="http://www.w3.org/TR/tabular-metadata/#dfn-inherited-property">
        inherited properties</a> from the 
        <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-description">
        table description</a> and  
        <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema">tableSchema</a>.</p>
      <p>The <a title="output graph">output graph</a> MAY include some 
        <a href="http://www.w3.org/TR/tabular-metadata/#dfn-direct-annotation">Direct Annotations</a>
        sourced from the metadata document. Where these are 
        <a href="http://www.w3.org/TR/tabular-metadata/#dfn-natural-language-property">
        natural language properties</a>, no locale information can be provided given the
        lack of multi-lingual support in JSON. Where an array of values
        for a property are provided using a 
        <a href="http://www.w3.org/TR/json-ld/#dfn-language-map">language map</a> (as
        defined in [[json-ld]]) the array of locale-specific values SHALL be
        included in the <a title="output graph">output graph</a> - albeit
        without the inferred semantics about language codes.</p>
      <p>Clearly, in order to process annotated tabular data, a mapping application MUST have
        access to the full metadata description associated with the tabular data.</p>
      <p>URL expansion behaviour of relative URLs SHALL be consistent with
        <a href="http://www.w3.org/TR/json-ld-api/#iri-expansion">Section 6.3 IRI Expansion</a> 
        in [[json-ld-api]]. The <dfn title="baseURL">base URL</dfn> provides the URL against 
        which relative URLs from annotated tabular data are resolved. The 
        <a title="baseURL">base URL</a> SHALL be that of the source CSV file.</p>  
      <p class="issue" data-number="91">What is default value if @base is not defined in the 
        metadata description?</p>
      <section id="map-annotated-tab-json">
        <h3>Generating JSON</h3>
        <section id="map-annotated-tab-table">
          <h4>Table-level processing</h4>
          <ol>
            <li>
              <p>The root object of the <a title="output graph">output graph</a> SHALL 
                describe the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-annotated-table">annotated table</a>.</p>
            </li>
            <li>
              <p>Where provided in the 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-description">table 
                description</a>, the metadata property <code>url</code> SHALL be used to identify the 
                root object.</p>
              <p>The root object SHALL be identified using the <em>name/value pair</em> 
                <code>"url": "<em>[url]</em>"</code> where <code><em>[url]</em></code> is the value
                of metadata property <code>url</code>.</p>
            </li>
            <li>
              <p>The root object SHALL contain a reference to the CSV-encoded <em>
                distribution</em> of the tabular data.</p>
              <p>The <em>distribution</em> SHALL be described using an object with <em>name</em>
                <code>distribution</code> that contains the <em>name/value pair</em> 
                <code>"downloadURL": "<em>[CSV-LOCATION]</em>"</code> where <code><em>[CSV-LOCATION]</em></code>
                is the absolute URL of the source CSV file.</p> 
              <p class="note">The semantics of properties <code>distribution</code> and 
                <code>downloadURL</code> correspond with the properties 
                <code><a href="http://www.w3.org/ns/dcat#distribution">dcat:distribution</a></code> and 
                <code><a href="http://www.w3.org/ns/dcat#downloadURL">dcat:downloadURL</a></code> as defined 
                in [[vocab-dcat]].</p>
              <p class="issue" data-number="93">Are the abstract tabular data and the CSV that 
                encodes it the same thing? (Is DCAT distribution appropriate?)</p>
            </li>
            <li>
              <p>Where a 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-header-line">header line</a>
                is present in the CSV file then, for each 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a>, the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                from the column header SHALL be assigned to metadata property <code>name</code>
                within the <a title="column description object">column description object</a> for
                that <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a>.</p>
              <p>Where the column header is <em>null</em>, the value assigned to <code>name</code> SHALL be 
                <code>_col.<em>[N]</em></code> where <code><em>[N]</em></code> is the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column-number">column number</a>.</p>
            </li>
            <li>
              <p>Where present in the 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-description">
                table description</a>, the following metadata properties SHALL be included in the
                <a title="output graph">output graph</a> within the root object:</p>
                <ul>
                  <li>
                    <p><code>notes</code> - the array of objects representing structured annotations 
                      on the tabular data SHALL be included verbatim.</p>
                    <p class="note">The <a href="http://www.w3.org/annotation/">Web Annotation Working 
                      Group</a> is developing a vocabulary for expressing annotations which we anticipate 
                      referencing from this specification. Issues likely to be covered therein include: 
                      how to anchor the annotation to a target in the tabular data and/or CSV file, 
                      what form the annotations themselves may take (e.g. a simple literal annotation 
                      body, or whether additional formatting properties are required to indicate that 
                      the annotation is expressed in, say, Markdown or HTML).</p>
                    <div class="issue" data-number="71">
                      <p>Exact handling of annotations.</p> 
                      <p>Additionally, the mechanism to reference the annotation target (within tabular
                        data) is still unclear - especially given the confusion on identifying row
                        numbers (<a href="https://github.com/w3c/csvw/issues/68">ISSUE #68</a> refers).</p>
                    </div>
                  </li>
                  <li>
                    <p>Any <dfn title="common property">Common Properties</dfn> (as defined in 
                      <a href="http://www.w3.org/TR/tabular-metadata/#common-properties">Section 3.3 
                      Common Properties</a> of [[!tabular-metadata]]).</p>
                  </li>
                </ul>  
            </li>
            <li>
              <p>Any of the <a href="http://www.w3.org/TR/tabular-metadata/#dfn-inherited-property">
                inherited properties</a> <code>null</code>,
                <code>separator</code>, <code>format</code>, <code>datatype</code>, 
                or <code>default</code>
                defined within the 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-description">
                table description</a> and/or 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema">tableSchema</a>
                SHALL be added to the <a title="column description object">column description 
                object</a> for each 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a>.</p>
              <p>Where the same property is defined in both the
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-description">
                table description</a> and the
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema">tableSchema</a>, the 
                value from the <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema">tableSchema</a>
                SHALL take precedence.</p>
            </li>
            <li>
              <p>Each <a href="http://www.w3.org/TR/tabular-metadata/#dfn-column-description">
                column description</a> SHALL be matched to a 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a> in
                the tabular data based on the order that the description is listed in the <code>columns</code>
                array of the <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema">tableSchema</a>.</p>
              <p>For each <a href="http://www.w3.org/TR/tabular-metadata/#dfn-column-description">
                column description</a> in the metadata document, the following metadata properties
                SHALL be added to the relevant <a title="column description object">column description
                object</a> established by the mapping application:
                <ul>
                  <li>
                    <p><code>name</code>.</p>
                    <p>Where metadata property <code>name</code> is also provided via the
                      <a href="http://www.w3.org/TR/tabular-data-model/#dfn-header-line">header line</a>
                      the value from the 
                      <a href="http://www.w3.org/TR/tabular-metadata/#dfn-column-description">
                      column description</a> in the metadata document SHALL take precedence.</p>
                  </li>
                  <li>
                    <p><code>propertyUrl</code>.</p>
                  </li>
                  <li>
                    <p><code>aboutUrl</code>.</p>
                  </li>
                  <li>
                    <p><a href="http://www.w3.org/TR/tabular-metadata/#dfn-inherited-property">
                      Inherited properties</a> <code>null</code>, 
                      <code>separator</code>, <code>format</code>, <code>datatype</code>, 
                      and <code>default</code> are added to the <a title="column description object">
                      column description object</a>, overwriting values added in the previous step
                      where properties are duplicated.</p>
                  </li>
                </ul>
              </p>
            </li>
            <li>
              <p>For each <a title="column description object">column description object</a>
                where metadata property <code>propertyUrl</code> has <em>not</em> been 
                assigned within the 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-column-description">
                column description</a>, the value of <code>propertyUrl</code> SHALL be
                set as the value of metadata property <code>name</code>.</p>
            </li>
            <li>
              <p>The root object SHALL contain an array named <code>row</code> containing 
                one object for each of the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">rows</a> within the 
                tabular data.</p>
              <p>Refer to <a href="#map-annotated-tab-row">Section 4.1.2 Row-level processing</a>
                for further details.</p>
            </li>
            <li>
              <p>The <a title="output graph">output graph</a> MAY contain information about the 
                metadata documents that were used when when creating the 
                <a title="output graph">output graph</a> using the following 
                <em>name/value pair</em> for each metadata document:</p>
              <p><code>&nbsp;&nbsp;"describedBy": "<em>[Metadata Location]</em>"</code></p>
              <p>where <code><em>[Metadata Location]</em></code> is the absolute URL of the
                metadata document.</p>
            </li>
          </ol>
        </section>
        <section id="map-annotated-tab-row">
          <h4>Row-level processing</h4>
          <p>Each <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">row</a>
            in the tabular data is processed sequentially. The behaviour exhibited when
            processing a given 
            <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell">cell</a> within the 
            current <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">row</a> is 
            dependent on the metadata properties of the 
            <a title="column description object">column description object</a> for the 
            <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a> that
            that <a href="http://www.w3.org/TR/tabular-data-model/#dfn-cell">cell</a> resides
            in. The effect of each metadata property is defined in 
            <a href="#map-annotated-tab-metadata">Section 4.1.3 Metadata property effects on row-level 
            mapping behaviour</a></p>
          <ol>
            <li>
              <p>Each object in the <a title="output graph">output graph</a> corresponding to a 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">row</a> in the
                tabular data SHALL contain one <em>name/value pair</em> for each
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a> 
                where the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                is not <em>null</em>.</p>
            </li>
            <li>
              <p>Where the metadata property <code>aboutUrl</code> is provided in the 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema">tableSchema</a>, 
                each object in the <a title="output graph">output graph</a> corresponding to a 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">row</a> in the
                tabular data SHALL be explicitly identified using the <em>name/value pair</em> 
                <code>"url": "<em>[EXPANDED-URI-TEMPLATE]</em>"</code> where 
                <code><em>[EXPANDED-URI-TEMPLATE]</em></code> is the value resulting from 
                the expansion of the [[!uri-template]] specified in the <code>aboutUrl</code>
                property.</p>
              <div class="note">
                <p>The <em>variables</em> in the URI Template expression relate to
                  the <code>name</code> property specified for each
                  <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a>. 
                  During template expansion, the <em>variables</em> evaluate to the 
                  <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                  within the 
                  <a href="http://www.w3.org/TR/tabular-data-model/#dfn-row">row</a>
                  being processed that is associated with the named 
                  <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a>.</p>
                <p>The <em>variable</em> <code>_row</code> evaluates to the number of the row being
                  processed.</p>
                <p>Once the URL has been generated via the template expansion, relative URLs are
                  resolved against the <a title="baseURL">base URL</a> to create an absolute
                  URL.</p>
              </div>
            </li>
            <li>
              <p>Where the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                is <em>null</em>, the <em>name/value pair</em> SHALL be omitted from the 
                <a title="output graph">output graph</a> unless a <em>default value</em> is
                specified for that <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a>
                (see metadata properties <code>null</code> and <code>default</code>).</p>  
            </li>
            <li>
              <p>The value of <em>name</em> for the <em>name/value pair</em> SHALL be provided by the 
                <code>propertyUrl</code> metadata property within the <a title="column description object">
                column description object</a>.</p>
              <p>In accordance with [[!RFC7159]], all unicode characters may be used. However, the
                following characters SHALL be <em>escaped</em>:</p>
              <ul>
                <li>quotation mark; <code>"</code> (<code>U+0022</code>)</li>
                <li>reverse solidus; <code>\</code> (<code>U+005C</code>)</li>
                <li>control characters; (<code>U+0000</code> through <code>U+001F</code>)</li>
              </ul>
            </li>
            <li>
              <p>The value of <em>value</em> SHALL be provided by the associated
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                subject to the effect of the metadata properties for that 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a>
                (if any are specified).</p>
              <div class="note">
                <p>Given the lack of multi-lingual support in JSON, internationalized strings 
                  are simply copied verbatim into the <a title="output graph">output graph</a> 
                  without any additional locale information.</p>
                <p>Also note that values of metadata property <code>name</code> must be unique 
                  within a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table">table</a>. 
                  Therefore if, say, English and French versions of the same property are provided 
                  as complementary columns in a CSV file then their <code>name</code> properties 
                  must be different; e.g. <code>title_en</code> and <code>title_fr</code>. It may 
                  be possible for applications to infer a language from the name of a
                  <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a> - 
                  but this is entirely dependant on the syntax used by the metadata author when 
                  defining values of the <code>name</code> property.</p>
              </div>
            </li>
          </ol>
        </section>
        <section id="map-annotated-tab-metadata">
          <h4>Metadata property effects on row-level mapping behaviour</h4>
          <p>The following metadata properties modify the way that 
            <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell values</a>
            are incorporated into the <a title="output graph">output graph</a>:</p>
          <dl>
            <dt id="metadata-property-null"><code>null</code></dt>
            <dd>
              <p>By default, a
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                is deemed to be <em>null</em> if it contains an empty string. If specified, the 
                metadata property <code>null</code> provides a token (string) that can be used to 
                identify <em>null</em> values.</p>
            </dd>
            <dt id="metadata-property-separator"><code>separator</code></dt>
            <dd>
              <p>Where metadata property <code>separator</code> is defined, the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a> SHALL be
                parsed into an ordered list of values, using the value of <code>separator</code> as the 
                delimiter.</p>
              <p>The list of values SHALL be expressed in the <a title="output graph">output graph</a> as an array.</p>
            </dd>
            <dt id="metadata-property-datatype-and-format"><code>datatype</code> and <code>format</code></dt>
            <dd>
              <p>Where metadata property <code>datatype</code> is undefined, the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a> SHALL be 
                inferred to hold values of datatype <code>string</code>.</p>
              <p>The following datatypes are given special attention:</p>
              <ul>
                <li>
                  <p>Datatypes with embedded syntax: <code>xml</code>, <code>json</code> and <code>html</code>.</p>
                  <p>These datatypes are treated as literal values; no attempt SHOULD be made to
                      'unpack' the structured syntax to create sub-objects within the <a title="output graph">
                      output graph</a></p>
                </li>
                <li>
                  <p>Booleans: <code>boolean</code>.</p>
                  <p>Metadata property <code>format</code> MAY be provided for a boolean-typed 
                    <a href="http://www.w3.org/TR/tabular-data-model/#dfn-column">column</a>; 
                    providing non-standard tokens for <em>true</em> and <em>false</em> (e.g. 
                    <code>Y|N</code>. <a href="http://www.w3.org/TR/tabular-metadata/#formats-for-booleans">
                    Section 3.12.3 Formats for booleans</a> from [[!tabular-metadata]] refers.</p>
                  <p>If a boolean type is declared, the 
                    <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a>
                    SHALL be processed as follows:</p>
                  <ol>
                    <li>if the value is <code>true</code>, <code>1</code> or, if the <code>format</code> 
                      property is defined, the value of <em>true</em>, then the <a title="output graph">output graph</a>
                      SHALL include the value <code>true</code>;</li>
                    <li>else if the value is <code>false</code>, <code>0</code> or, if the <code>format</code> 
                      property is defined, the value of <em>false</em>, then the <a title="output graph">output graph</a>
                      SHALL include the value <code>false</code>;</li>
                    <li>else the <a title="output graph">output graph</a> SHALL include the
                      <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a> verbatim.</li>
                  </ol>
                </li>
                <li>
                  <p>Numbers: <code>number</code>, <code>decimal</code>, <code>integer</code>, 
                    <code>nonPositiveInteger</code>, <code>negativeInteger</code>, <code>long</code>, 
                    <code>int</code>, <code>short</code>, <code>nonNegativeInteger</code>, 
                    <code>unsignedLong</code>, <code>unsignedInt</code>, <code>unsignedShort</code>,
                    <code>positiveInteger</code>, <code>float</code> and <code>double</code>.</p>
                  <p><a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">Cell values</a> 
                    that are asserted to be numeric shall be expressed in the <a title="output graph">
                    output graph</a> as numbers; double quotes will be omitted.</p>
                  <p>It is not uncommon for numbers within tabular data to be formatted for human consumption, 
                    which may involve using commas for decimal points, grouping digits in the number using commas, 
                    or adding currency symbols or percent signs to the number.</p>
                  <p>Metadata property <code>format</code> MAY be provided to describe the formatting of the
                    <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell values</a> 
                    to assist the mapping application convert the 
                    <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a> 
                    to a number format readily consumable by downstream applications.</p>
                  <div class="issue" data-number="54">
                    <p>Describing the formatting of numbers is currently 
                      unresolved and is likely to require information on decimal separator characters, 
                      grouping characters and possibly others such as Infinity, Nan, currency tokens, 
                      negative numbers appearing in parentheses etc.</p> 
                    <p>In the interim, mapping applications are not required to undertake any reformatting 
                      and may simply pass the cell value to the output graph verbatim.</p>
                  </div>
                </li>
                <li>
                  <p>Dates, times and durations: <code>date</code>, <code>time</code>, 
                    <code>datetime</code>, <code>dateTime</code> and <code>duration</code>.</p>
                  <p>A standard syntax for dates and times is defined by [[!iso8601]]. This format can be 
                    readily consumed by software applications. However, dates and times are often provided 
                    in a locale-specific format, or use alternate calendars and/or eras.</p>
                  <p>Metadata property <code>format</code> MAY be provided to describe the formatting of 
                    <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell values</a> 
                    and assist the mapping application convert the 
                    <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a> 
                    to a date, time, date-time or duration format readily consumable by downstream 
                    applications.</p>
                  <p class="note">Where possible, data publishers SHOULD provide dates and times in 
                    the [[!iso8601]] format. However, where data publishers choose to use locale-specific 
                    date and time formatting, they SHOULD also provide equivalent values in [[!iso8601]] 
                    format (e.g. in a complementary column).</p>
                  <div class="issue" data-number="54">
                    <p>Describing the formatting of dates and times is currently unresolved. The favoured 
                      option is to defer the parsing of dates and times to implementations based a picture 
                      string provided in the metadata. Unfortunately, there is no standard syntax for 
                      picture strings, therefore an array of picture strings relating to common implementations 
                      seems like the best option. For example:</p>
                    <p><code>"datatype": "date",</code></p>
                    <p><code>"format": {</code></p>
                    <p><code>&nbsp;&nbsp;"picture-strings": [</code></p>
                    <p><code>&nbsp;&nbsp;&nbsp;&nbsp;"unicode": "dd MMM yyyy",</code></p>
                    <p><code>&nbsp;&nbsp;&nbsp;&nbsp;"xpath": "[D01] [MN,*-3] [Y0001]"</code></p>
                    <p><code>&nbsp;&nbsp;]</code></p>
                    <p><code>}</code></p>
                    <p>Where an implementation is able to interpret one of the provided picture strings, 
                      the date-time value reformatted in [[!iso8601]] format shall be included in the output graph, 
                      else the original cell value shall be included verbatim.</p>
                    <p>In the interim, mapping applications are not required to undertake any reformatting 
                      and may simply pass the cell value to the output graph verbatim.</p>
                  </div>
                  <div class="issue" data-number="65">
                    <p>A list of potential date-time formatting implementations needs to be defined.</p>
                  </div>
                </li>
              </ul>
              <p class="note">Where the metadata property <code>separator</code> is specified (e.g.
                to indicate that a 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a> 
                is to be parsed into a list of values), the datatype specified by <code>datatype</code>
                SHALL be inferred to apply to the members of the resulting list.</p>  
            </dd>
            <dt id="metadata-property-aboutUrl"><code>aboutUrl</code></dt>
            <dd>
              <p>If metadata property <code>aboutUrl</code> is specified, the value used 
                in the <a title="output graph">output graph</a> SHALL be 
                the result of the URI Template expansion, as defined in 
                <a href="http://www.w3.org/TR/tabular-metadata/#property-syntax">Section 3.1 Property Syntax</a> 
                of [[!tabular-metadata]].</p>
              <p>Once the URL has been generated via the template expansion, relative URLs are
                resolved against the <a title="baseURL">base URL</a> to create an absolute
                URL.</p>
            </dd>
            <dt id="metadata-property-default"><code>default</code></dt>
            <dd>
              <p>If metadata property <code>default</code> is specified and the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-string-value">cell value</a> 
                is deemed to be <em>null</em>, then the value of <code>default</code> SHALL be used 
                in the <a title="output graph">output graph</a>.</p>
            </dd>
          </dl>
        </section>
      </section>
      <section id="map-annotated-tab-examples">
        <h3>Examples</h3>
        <p class="issue" data-number="">These examples don't really show the edge cases - 
          probably need to rework them</p>
        <p>The first example illustrates how a CSV file with metadata annotations drawn <em>only</em> 
          from a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-header-line">header line</a> is 
          processed. The tabular data describes lists countries, giving their country code and name.
          There are two columns, named <code>country</code> and <code>name</code>, and four rows.</p>

        <table style="width: 30%">
          <tr>
            <th>country </th>
            <th>name</th>
          </tr>
          <tr>
            <td>AD</td>
            <td>Andorra</td>
          </tr>
          <tr>
            <td>AF</td>
            <td>Afghanistan</td>
          </tr>
          <tr>
            <td>AI</td>
            <td>Anguilla</td>
          </tr>
          <tr>
            <td>AL</td>
            <td>Albania</td>
          </tr>
        </table>

        <p>The CSV input (published at <code>http://example.org/country-codes-and-names.csv</code>):</p>

        <pre class="example" id="map-annotated-tab-examples-1-input" title="CSV input ">
country,name
AD,Andorra
AF,Afghanistan
AI,Anguilla
AL,Albania
        </pre>

        <p>The resulting JSON output graph:</p>

        <pre class="example" id="map-annotated-tab-examples-1-output" title="JSON output">
{
  "distribution": {
    "downloadURL": "http://example.org/country-codes-and-names.csv"
  },
  "row": [{
    "country": "AD",
    "name": "Andorra"
  },{
    "country": "AF",
    "name": "Afghanistan"
  },{
    "country": "AI",
    "name": "Anguilla"
  },{
    "country": "AL",
    "name": "Albania"
  }]
}
        </pre>


        <p>The second example illustrates how the mapping is modified with the addition of metadata
          annotations in a metadata document. The CSV file is a small extract from a much larger
          Tree Inventory dataset from the City of Palo Alto which supports the maintaining and 
          tracking the city's public trees and urban forest. There are five columns, named 
          <code>GID</code>, <code>On Street</code>, <code>Species</code>, <code>Trim Cycle</code> 
          and <code>Inventory Date</code>, and three rows.</p>

        <table style="width:80%">
          <tr>
            <th>GID</th>
            <th>On Street</th>
            <th>Species</th>
            <th>Trim Cycle</th>
            <th>Inventory Date</th>
          </tr>
          <tr>
            <td>1</td>
            <td>ADDISON AV</td>
            <td>Celtis australis</td>
            <td>Large Tree Routine Prune</td>
            <td>10/18/2010</td>
          </tr>
          <tr>
            <td>2</td>
            <td>EMERSON ST</td>
            <td>Liquidambar styraciflua</td>
            <td>Large Tree Routine Prune</td>
            <td>6/2/2010</td>
          </tr>
          <tr>
            <td>3</td>
            <td>EMERSON ST</td>
            <td>Liquidambar styraciflua</td>
            <td>Large Tree Routine Prune</td>
            <td>6/2/2010</td>
          </tr>
        </table>

        <p>The CSV input (published at <code>http://example.org/tree-ops.csv</code>):</p>

        <pre class="example" id="map-annotated-tab-examples-2-input" title="CSV input ">
GID,On Street,Species,Trim Cycle,Inventory Date
1,ADDISON AV,Celtis australis,Large Tree Routine Prune,10/18/2010
2,EMERSON ST,Liquidambar styraciflua,Large Tree Routine Prune,6/2/2010
3,EMERSON ST,Liquidambar styraciflua,Large Tree Routine Prune,6/2/2010
        </pre>

        <p>The metadata description (published at <code>http://example.org/tree-ops.csv-metadata.json</code>):</p>

        <pre class="example" id="map-annotated-tab-examples-2-metadata" title="Metadata description">
{
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "url": "tree-ops",
  "dcat:distribution": {
    "dcat:downloadURL": "tree-ops.csv"
  }
  "dc:title": "Tree Operations",
  "dc:keywords": ["tree", "street", "maintenance"],
  "dc:publisher": [{
    "schema:name": "Example Municipality",
    "schema:web": "http://example.org"
  }],
  "dc:license": "http://opendefinition.org/licenses/cc-by/",
  "dc:modified": "2010-12-31",
  "tableSchema": {
    "columns": [{
      "name": "GID",
      "title": [
        "GID",
        "Generic Identifier"
      ],
      "dc:description": "An identifier for the operation on a tree.",
      "datatype": "string",
      "required": true,
      "unique": true
    }, {
      "name": "on_street",
      "title": "On Street",
      "dc:description": "The street that the tree is on.",
      "datatype": "string"
    }, {
      "name": "species",
      "title": "Species",
      "dc:description": "The species of the tree.",
      "datatype": "string"
    }, {
      "name": "trim_cycle",
      "title": "Trim Cycle",
      "dc:description": "The operation performed on the tree.",
      "datatype": "string"
    }, {
      "name": "inventory_date",
      "title": "Inventory Date",
      "dc:description": "The date of the operation that was performed.",
      "datatype": "date"
    }]
    "primaryKey": "GID",  
    "aboutUrl": "#gid-{GID}"
  }
}
        </pre>

        <p>The resulting JSON output graph:</p>

        <pre class="example" id="map-annotated-tab-examples-2-output" title="JSON output">
{
  "url": "tree-ops"
  "distribution": {
    "downloadURL": "http://example.org/tree-ops.csv"
  },
  "dc:title": "Tree Operations",
  "dc:keywords": ["tree", "street", "maintenance"],
  "dc:publisher": [{
    "schema:name": "Example Municipality",
    "schema:web": "http://example.org"
  }],
  "dc:license": "http://opendefinition.org/licenses/cc-by/",
  "dc:modified": "2010-12-31",
  "row": [{
    "url": "http://example.org/tree-ops.csv#gid-1",
    "GID": "1",
    "on_street": "ADDISON AV",
    "species": "Celtis australis",
    "trim_cycle": "Large Tree Routine Prune",
    "inventory_date": "10/18/2010"
  },{
    "url": "http://example.org/tree-ops.csv#gid-2",
    "GID": "2",
    "on_street": "EMERSON ST",
    "species": "Liquidambar styraciflua",
    "trim_cycle": "Large Tree Routine Prune",
    "inventory_date": "6/2/2010"
  },{
    "url": "http://example.org/tree-ops.csv#gid-3",
    "GID": "3",
    "on_street": "EMERSON ST",
    "species": "Liquidambar styraciflua",
    "trim_cycle": "Large Tree Routine Prune",
    "inventory_date": "6/2/2010"
  }],
  "describedBy": "http://example.org/tree-ops.csv-metadata.json"
}
        </pre>

      </section>
    </section>
    <section id="map-grouped-tab">
      <h2>Mapping Grouped Tabular Data</h2>
        <p>The procedures and rules for mapping a collection of tabular data compliant with the
          <a href="http://www.w3.org/TR/tabular-data-model/#dfn-grouped-tabular-data-model">
          grouped tabular data model</a> are described below.</p>
        <p>The metadata for a <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables">
          group of tables</a> SHALL be provided by a
            <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-group-description">
            table group description</a> (as defined in [[!tabular-metadata]]) within the 
            associated metadata document.</p>
      <section id="map-grouped-tab-json">
        <h3>Generating JSON</h3>
        <section id="map-grouped-tab-table">
          <h4>Group-level processing</h4>
          <ol>
            <li>
              <p>The root object of the <a title="output graph">output graph</a> SHALL 
                describe the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-group-of-tables">table group</a>.</p>
            </li>
            <li>
              <p>Where present in the 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-group-description">
                table group description</a>, any <a title="common property">Common Properties</a> 
                (as defined in 
                <a href="http://www.w3.org/TR/tabular-metadata/#common-properties">Section 3.3 
                Common Properties</a> of [[!tabular-metadata]]) SHALL 
                be included in the <a title="output graph">output graph</a> within the root object.</p>
            </li>
            <li>
              <p>The root object SHALL contain an array named <code>table</code> containing 
                one object for each of the 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table">tables</a> listed in 
                the <code>resources</code> array of the 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-group-description">
                table group description</a>.</p>
              <p>Each <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table">table</a> SHALL be 
                processed sequentially according to the appropriate set of rules for mapping core
                or annotated <a href="http://www.w3.org/TR/tabular-data-model/#dfn-tabular-data">
                tabular data</a>. Refer to <a href="#map-core-tab">Section 3 Mapping Core Tabular
                Data</a> and <a href="#map-annotated-tab">Section 4 Mapping Annotated Tabular Data</a>
                for further details.</p>
              <p>The JSON generated from processing the
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table">tables</a> SHALL be
                incorporated into the <a title="output graph">output graph</a> as objects within
                the <code>table</code> array.</p>
            </li>
            <li>
              <p>Any of the <a href="http://www.w3.org/TR/tabular-metadata/#dfn-inherited-property">
                inherited properties</a> <code>null</code>,
                <code>separator</code>, <code>format</code>, <code>datatype</code>, 
                or <code>default</code> defined within the 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-group-description">
                table group description</a> SHALL be used to pre-populate the 
                <a title="column description object">column description objects</a> for each 
                <a href="http://www.w3.org/TR/tabular-data-model/#dfn-table">table</a> in the
                group.</p>
              <p>Where the same property is defined in the
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-group-description">
                table group description</a>, 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-table-description">
                table description</a>,
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-tableSchema">tableSchema</a> or 
                <a href="http://www.w3.org/TR/tabular-metadata/#dfn-column-description">
                column description</a> the order of precedence SHALL be:</p>
              <ol>
                <li>column description</li>
                <li>schema description</li>
                <li>table description</li>
                <li>table group description</li>
              </ol>
            </li>
          </ol>
          <p class="issue" data-number="">The presence of foreign-key references within the table 
            descriptions may affect the way the data is packaged in the output graph. Reviewers are 
            invited to comment on how grouped tabular data with foreign-key references might best be 
            organised.</p>
        </section>
      </section>
      <section id="map-grouped-tab-examples">
        <h3>Examples</h3>
        <p class="TBD"><a href="http://www.w3.org/TR/csvw-ucr/#UC-OrganogramData">
          Use Case 4: Publication of public sector roles and salaries</a> likely provides a good 
          source of material for these examples. To be added.</p>
      </section>
    </section>
  </body>
</html>
